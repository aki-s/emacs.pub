<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Accessing package.xml properties with Pyrus</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="pyrus.extending.html" title="Using Pyrus in your programs: Pyrus's Public API" />
  <link rel="prev" href="pyrus.extending.html" title="Using Pyrus in your programs: Pyrus's Public API" />
  <link rel="next" href="pyrus.extending.configuration.html" title="Pyrus's configuration API" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Accessing package.xml properties with Pyrus</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="pyrus.extending.html" title="Using Pyrus in your programs: Pyrus's Public API">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="pyrus.extending.configuration.html" title="Pyrus's configuration API">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="section" id="pyrus.extending.packagefile">
 <div class="info"><h1>Accessing package.xml properties with Pyrus</h1>
</div>

 <div class="section" id="pyrus.extending.packagefile.intro">
  <div class="info"><h2 class="title">Introduction</h2></div>
  <p class="para">
   If you are not familiar with the package.xml format, you will need to read
   <a href="guide.developers.package2.html" class="link">The description of the file</a>.
  </p>
  <p class="para">
   This guide is divided into several segments.
   </p><ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      If you want to access basic properties such as the name of the package,
      the channel, summary, description, license, version, stability, date,
      time, or notes, read the section on
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.basic" class="link">Accessing basic properties</a>
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      To learn about how to manage maintainers of the package, read the section on
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.maintainers" class="link">Accessing package maintainers</a>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      To learn about how to manage and iterate over dependencies, read the section on
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.deps" class="link">Accessing dependencies</a>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      To understand how to iterate over and add files to both the contents
      and release sections of package.xml, read the section on
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.files" class="link">Accessing files</a>
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      To learn about managing custom tasks, roles, and compatible packages, read the section on
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.custom" class="link">usesrole, usestask and compatible</a>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      To learn about accessing PECL-specific properties such as configureoption,
      srcpackage, srcuri and providesextension, read the section on
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.pecl" class="link">Accessing PECL properties</a>
     </p>
    </li>
   </ul>
  
  <p class="para">
   The package.xml file is represented using a <code class="literal">PEAR2\Pyrus\PackageFile\v2</code>
   object, but most of the time you will access it using the most packagefile
   version-agnostic <code class="literal">PEAR2\Pyrus\Package</code> class, which supports
   the same API seamlessly for accessing any kind of package as well as a few
   higher level options such as directly accessing the source of a file in a package.
   This documentation assumes you are working with a <code class="literal">PEAR2\Pyrus\Package</code>
   object named <code class="literal">$package</code>.
  </p>
  <p class="para">
   To instantiate a <code class="literal">PEAR2\Pyrus\Package</code>, simply pass in the
   path to a local package, a URI of a remote package, or an abstract remote package
   name to the constructor.
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$package&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Package</span><span style="color: #007700">(</span><span style="color: #DD0000">'package.xml'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Package</span><span style="color: #007700">(</span><span style="color: #DD0000">'Release-1.2.3.tgz'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Package</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/Release-1.2.3.tgz'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Package</span><span style="color: #007700">(</span><span style="color: #DD0000">'pear2/Release-1.2.3'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
 </div>
 <div class="section" id="pyrus.extending.packagefile.basic">
  <div class="info"><h2 class="title">Accessing basic properties</h2></div>
  <p class="para">
   Basic properties can be accessed as if they were object properties:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;name&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;channel&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">channel</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;summary&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">summary</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;description&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">description</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;license&nbsp;name&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />if&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'uri'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;license&nbsp;URI&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'uri'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br />if&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'filesource'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;license&nbsp;path&nbsp;within&nbsp;the&nbsp;package.xml&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'filesource'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;release&nbsp;version&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">version</span><span style="color: #007700">[</span><span style="color: #DD0000">'release'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;API&nbsp;version&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">version</span><span style="color: #007700">[</span><span style="color: #DD0000">'api'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;release&nbsp;stability&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stability</span><span style="color: #007700">[</span><span style="color: #DD0000">'release'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;API&nbsp;stability&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stability</span><span style="color: #007700">[</span><span style="color: #DD0000">'api'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;release&nbsp;date&nbsp;in&nbsp;YYYY-MM-DD&nbsp;format&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />if&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">time</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;release&nbsp;time&nbsp;in&nbsp;HH:MM:SS&nbsp;format&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">time</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br />echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;release&nbsp;notes&nbsp;is&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">notes</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   By the same token, changing these properties is as simple as setting an object
   property:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'MyPackage'</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;this&nbsp;must&nbsp;be&nbsp;full&nbsp;channel,&nbsp;not&nbsp;a&nbsp;shortcut&nbsp;like&nbsp;"pear2"<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">channel&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'pear2.php.net'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">summary&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"My&nbsp;package's&nbsp;short&nbsp;description"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">description&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"My&nbsp;package's&nbsp;multi-line&nbsp;description<br />of&nbsp;how&nbsp;things&nbsp;are&nbsp;done&nbsp;with&nbsp;it."</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'BSD&nbsp;License'</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;or<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'BSD&nbsp;License'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'uri'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'http://www.opensource.org/licenses/bsd-license.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">license</span><span style="color: #007700">[</span><span style="color: #DD0000">'filesource'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'LICENSE'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">version</span><span style="color: #007700">[</span><span style="color: #DD0000">'release'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'1.2.3'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">version</span><span style="color: #007700">[</span><span style="color: #DD0000">'api'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'1.0.0'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stability</span><span style="color: #007700">[</span><span style="color: #DD0000">'release'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'stable'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">version</span><span style="color: #007700">[</span><span style="color: #DD0000">'api'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'stable'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'2009-12-25'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'00:00:01'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">notes&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"This&nbsp;version&nbsp;of&nbsp;MyPackage&nbsp;has&nbsp;the&nbsp;blessing&nbsp;of&nbsp;the&nbsp;pope,&nbsp;so<br />it's&nbsp;way&nbsp;better&nbsp;than&nbsp;the&nbsp;last&nbsp;one."</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
 </div>
 <div class="section" id="pyrus.extending.packagefile.maintainers">
  <div class="info"><h2 class="title">Accessing package maintainers</h2></div>
  <p class="para">
   Maintainers are accessed through the <code class="literal">maintainer</code>
   property.  An of maintainers organized by maintainer role can be obtained via
   the <code class="literal">allmaintainers</code> property, but it is also possible to
   iterate over the <code class="literal">maintainer</code> property to iterate over all
   maintainers.
  </p>
  <p class="para">
   The <code class="literal">maintainer</code> property acts as an array organized by
   developer handle.  To learn more about maintainers in package.xml, see
   the <a href="guide.users.concepts.maintainer.html" class="link">concepts section on maintainers</a>
   in the user guide.
  </p>
  <p class="para">
   An individual maintainer&#039;s properties are set via a fluent method call.  The
   order of method call is not important, but a call to the <strong class="function">role()</strong>
   method is required in order to properly save the data.
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;a&nbsp;maintainer's&nbsp;properties<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer</span><span style="color: #007700">[</span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">]<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">role</span><span style="color: #007700">(</span><span style="color: #DD0000">'lead'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">(</span><span style="color: #DD0000">'Gregory&nbsp;Beaver'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">email</span><span style="color: #007700">(</span><span style="color: #DD0000">'cellog@php.net'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">active</span><span style="color: #007700">(</span><span style="color: #DD0000">'yes'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;access&nbsp;a&nbsp;maintainer's&nbsp;properties<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;cellog's&nbsp;name&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer</span><span style="color: #007700">[</span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Gregory&nbsp;Beaver<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;cellog's&nbsp;role&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer</span><span style="color: #007700">[</span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">role</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;lead<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;cellog's&nbsp;handle&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer</span><span style="color: #007700">[</span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">user</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;cellog<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;cellog's&nbsp;email&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer</span><span style="color: #007700">[</span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">email</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;cellog@php.net<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Is&nbsp;maintainer&nbsp;cellog&nbsp;active?&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer</span><span style="color: #007700">[</span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">active</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;yes<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   The maintainers can be iterated over as well, and even modified:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">maintainer&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$handle&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;</span><span style="color: #0000BB">$handle</span><span style="color: #DD0000">'s&nbsp;name&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;</span><span style="color: #0000BB">$handle</span><span style="color: #DD0000">'s&nbsp;role&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">role</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;</span><span style="color: #0000BB">$handle</span><span style="color: #DD0000">'s&nbsp;handle&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">user</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Maintainer&nbsp;</span><span style="color: #0000BB">$handle</span><span style="color: #DD0000">'s&nbsp;email&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">email</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Is&nbsp;maintainer&nbsp;</span><span style="color: #0000BB">$handle</span><span style="color: #DD0000">&nbsp;active?&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">active</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$maintainer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">active</span><span style="color: #007700">(</span><span style="color: #DD0000">'no'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;shows&nbsp;modifying&nbsp;a&nbsp;setting&nbsp;in&nbsp;iteration<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   The <code class="literal">allmaintainers</code> property returns an associative
   array of arrays of maintainer objects indexed by maintainer role.
  </p>
 </div>
 <div class="section" id="pyrus.extending.packagefile.deps">
  <div class="info"><h2 class="title">Accessing dependencies</h2></div>
  <p class="para">
   Before it is possible to understand how Pyrus provides access to dependencies,
   it is necessary to understand their format in package.xml, which is
   documented <a href="guide.developers.package2.dependencies.html" class="link">here</a>.
  </p>
  <p class="para">
   Pyrus provides access to dependencies through the <code class="literal">dependencies</code>
   property.  In addition to supporting access to and creation of individual
   dependencies, it is possible to iterate over all dependencies, or over just
   required dependencies, or just a particular dependency type.
  </p>
  <p class="para">
   Each of the dependency types (<code class="literal">package</code>, <code class="literal">subpackage</code>,
   <code class="literal">pearinstaller</code>, <code class="literal">extension</code>, <code class="literal">php</code>,
   <code class="literal">arch</code>, and <code class="literal">os</code>) is accessed slightly
   differently based on how they are used in package.xml.
  </p>
  <p class="para">
   Perhaps the best introduction is 3 examples highlighting the different
   methods of accessing dependency properties.  First, an example highlighting
   the methods for reading existing dependency properties:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"First,&nbsp;required/optional&nbsp;dependencies:\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;these&nbsp;same&nbsp;principles&nbsp;apply&nbsp;to&nbsp;all&nbsp;properties&nbsp;for&nbsp;dependencies.<br />//&nbsp;isset()&nbsp;is&nbsp;used&nbsp;to&nbsp;test&nbsp;presence,&nbsp;-&gt;get&nbsp;to&nbsp;retrieve.<br /><br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Minimum&nbsp;PHP&nbsp;version&nbsp;supported:&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Minimum&nbsp;PEAR&nbsp;Installer/Pyrus&nbsp;version&nbsp;required:&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pearinstaller</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />if&nbsp;(isset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pearinstaller</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">max</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Maximum&nbsp;PEAR&nbsp;Installer/Pyrus&nbsp;version&nbsp;supported:&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pearinstaller</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">max</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">"PHP&nbsp;extension&nbsp;ext&nbsp;is&nbsp;required?&nbsp;"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">isset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">extension</span><span style="color: #007700">[</span><span style="color: #DD0000">'ext'</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #DD0000">"Yes\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"No\n"</span><span style="color: #007700">;<br /><br />if&nbsp;(isset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">os</span><span style="color: #007700">[</span><span style="color: #DD0000">'windows'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Conflicts&nbsp;with&nbsp;Windows&nbsp;operating&nbsp;system?&nbsp;"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">os</span><span style="color: #007700">[</span><span style="color: #DD0000">'windows'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">conflicts<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"Yes\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"No\n"</span><span style="color: #007700">;<br />}<br /><br />if&nbsp;(isset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">arch</span><span style="color: #007700">[</span><span style="color: #DD0000">'*386*'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Requires&nbsp;i386&nbsp;processor?&nbsp;"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">arch</span><span style="color: #007700">[</span><span style="color: #DD0000">'*386*'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">conflicts<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"No\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"Yes\n"</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Now&nbsp;for&nbsp;package&nbsp;and&nbsp;subpackage&nbsp;dependencies:\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Is&nbsp;package&nbsp;foo&nbsp;from&nbsp;channel&nbsp;gronk.example.com&nbsp;required?&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'gronk.example.com/foo'</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;</span><span style="color: #DD0000">"Yes\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"No\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Does&nbsp;this&nbsp;package&nbsp;conflict&nbsp;with&nbsp;our&nbsp;package?&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'gronk.example.com/foo'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">conflicts<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"Yes\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"No\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"gronk.example.com/foo2&nbsp;minimum&nbsp;version&nbsp;required&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">subpackage</span><span style="color: #007700">[</span><span style="color: #DD0000">'gronk.example.com/foo2'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"gronk.example.com/foo2&nbsp;incompatible&nbsp;versions:"</span><span style="color: #007700">;<br />foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">subpackage</span><span style="color: #007700">[</span><span style="color: #DD0000">'gronk.example.com/foo2'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">exclude<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$version</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\n&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$version</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Optional&nbsp;dependencies&nbsp;are&nbsp;accessed&nbsp;the&nbsp;same&nbsp;way&nbsp;with&nbsp;optional&nbsp;index\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Optional&nbsp;dependency&nbsp;gronk.example.com/foo3&nbsp;minimum&nbsp;version&nbsp;allowed&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'optional'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">subpackage</span><span style="color: #007700">[</span><span style="color: #DD0000">'gronk.example.com/foo3'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Dependency&nbsp;groups&nbsp;are&nbsp;accessed&nbsp;with&nbsp;the&nbsp;group&nbsp;index\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Dependency&nbsp;group&nbsp;foo&nbsp;hint&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'group'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hint</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"channel&nbsp;pear2.php.net&nbsp;package&nbsp;Foo&nbsp;package&nbsp;dependency&nbsp;in&nbsp;dependency&nbsp;group"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;foo&nbsp;minimum&nbsp;version&nbsp;is&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependecies</span><span style="color: #007700">[</span><span style="color: #DD0000">'group'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear2.php.net/Foo'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;and&nbsp;so&nbsp;on...<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   Iteration is similar to the access, in that each dependency object is the
   same object as that when accessed using the full access syntax:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;display&nbsp;all&nbsp;required&nbsp;and&nbsp;optional&nbsp;package&nbsp;and&nbsp;subpackage&nbsp;dependencies<br /></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'optional'</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$required</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(array(</span><span style="color: #DD0000">'package'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'subpackage'</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$packagedep</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #0000BB">$required</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">$packagedep&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$required</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$packagedep</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">dependency</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">channel</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">uri</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;the&nbsp;channel&nbsp;is&nbsp;"__uri"&nbsp;for&nbsp;all&nbsp;URI&nbsp;dependencies<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"\nPackage&nbsp;URI:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">uri</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\nMinimum&nbsp;version:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">recommended</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\nRecommended&nbsp;installation&nbsp;version:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">recommended</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;iterating&nbsp;over&nbsp;dependency&nbsp;groups&nbsp;and&nbsp;their&nbsp;contents<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'group'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$group</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Optional&nbsp;dependency&nbsp;group&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$group</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;("</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$group</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hint</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">")\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$group</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">extension&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$ext</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Extension&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ext</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(array(</span><span style="color: #DD0000">'package'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'subpackage'</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$group</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$type&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">ucfirst</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">channel</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dep</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   Finally, setting dependencies can be accomplished in several ways.
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;minimum&nbsp;PHP&nbsp;version&nbsp;required:<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'5.3.0'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'5.3.0'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #DD0000">'5.3.0'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;minimum&nbsp;PEAR&nbsp;Installer/Pyrus&nbsp;version&nbsp;required:<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pearinstaller&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'2.0.0a1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pearinstaller</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'2.0.0a1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pearinstaller</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #DD0000">'2.0.0a1'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;excluded&nbsp;versions&nbsp;(all&nbsp;deps&nbsp;supporting&nbsp;the&nbsp;&lt;exclude&gt;&nbsp;tag&nbsp;use&nbsp;this&nbsp;syntax):<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exclude&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'5.2.0'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exclude</span><span style="color: #007700">(</span><span style="color: #DD0000">'5.2.0'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">exclude</span><span style="color: #007700">(</span><span style="color: #DD0000">'5.2.10'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">php</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exclude</span><span style="color: #007700">(</span><span style="color: #DD0000">'5.2.0'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'5.2.10'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;OS/architecture&nbsp;requirements:<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">os</span><span style="color: #007700">[</span><span style="color: #DD0000">'windows'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Windows&nbsp;required<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">arch</span><span style="color: #007700">[</span><span style="color: #DD0000">'386'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Conflicts&nbsp;with&nbsp;386&nbsp;architecture<br /><br />//&nbsp;saying&nbsp;"this&nbsp;package&nbsp;must&nbsp;be&nbsp;installed"&nbsp;to&nbsp;the&nbsp;installer<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear2.php.net/Packagename'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;saying&nbsp;"this&nbsp;package&nbsp;must&nbsp;not&nbsp;be&nbsp;installed"<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear2.php.net/Packagename'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">conflicts</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;up&nbsp;complex&nbsp;versioning&nbsp;requirements<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'optional'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear2.php.net/Packagename'</span><span style="color: #007700">]<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.2.0'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">max</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.3.0'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">recommended</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.2.3'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">exclude</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.3.0'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'1.2.2'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;depending&nbsp;on&nbsp;a&nbsp;PECL&nbsp;package<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'required'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'pecl.php.net/lua'</span><span style="color: #007700">]<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">providesextension</span><span style="color: #007700">(</span><span style="color: #DD0000">'lua'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;optionally&nbsp;depending&nbsp;on&nbsp;a&nbsp;core&nbsp;PHP&nbsp;extension<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'optional'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">extension</span><span style="color: #007700">[</span><span style="color: #DD0000">'PDO'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;up&nbsp;a&nbsp;dependency&nbsp;group&nbsp;"remotefeatures"<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'group'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">remotefeatures</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hint</span><span style="color: #007700">(</span><span style="color: #DD0000">'Remote&nbsp;management&nbsp;capabilities'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;add&nbsp;dependencies&nbsp;to&nbsp;the&nbsp;group<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'group'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">remotefeatures<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear2.php.net/Foo'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dependencies</span><span style="color: #007700">[</span><span style="color: #DD0000">'group'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">remotefeatures<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">extension</span><span style="color: #007700">[</span><span style="color: #DD0000">'curl'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
 </div>
 <div class="section" id="pyrus.extending.packagefile.files">
  <div class="info"><h2 class="title">Accessing files</h2></div>
  <p class="para">
   There are two reasons to access the files within a package.xml
   </p><ol type="1">
    <li class="listitem">
     <p class="para">
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.files.iterate" class="link">iterating over contents</a>
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <a href="pyrus.extending.packagefile.html#pyrus.extending.packagefile.files.setting" class="link">adding new files/setting properties</a>
     </p>
    </li>
   </ol>
  
  <div class="section" id="pyrus.extending.packagefile.files.iterate">
   <div class="info"><h3 class="title">Iterating over package.xml contents</h3></div>
   <p class="para">
    Pyrus supports several use cases for iterating over package.xml:
    </p><ul class="itemizedlist">
     <li class="listitem"><span class="simpara">Iterating for installation purposes</span></li>
     <li class="listitem"><span class="simpara">Iterating for packaging purposes</span></li>
     <li class="listitem"><span class="simpara">Iterating for traversing a deep package.xml tree</span></li>
     <li class="listitem"><span class="simpara">General-purpose iteration</span></li>
    </ul><p>
    All of these use cases are illustrated in the following example:
   </p>
   <p class="para">
    </p><div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;***************&nbsp;installation&nbsp;iteration&nbsp;***************<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">installcontents&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;actual&nbsp;file&nbsp;path&nbsp;to&nbsp;be&nbsp;used&nbsp;with&nbsp;fopen<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$path&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilePath</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">packagedname</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;open&nbsp;file&nbsp;pointer<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileContents</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">packagedname</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;file&nbsp;contents&nbsp;as&nbsp;string<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$contents&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileContents</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">packagedname</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;file&nbsp;properties&nbsp;(XML&nbsp;attributes&nbsp;of&nbsp;the&nbsp;&lt;file&gt;&nbsp;tag)<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$role&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">role</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">md5sum</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$md5sum&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">md5sum</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;relative&nbsp;path&nbsp;of&nbsp;file&nbsp;after&nbsp;applying&nbsp;all&nbsp;modifications&nbsp;such<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;as&nbsp;&lt;install&nbsp;name=""&nbsp;as=""/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$relativepath&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;path&nbsp;as&nbsp;specified&nbsp;in&nbsp;the&nbsp;&lt;contents&gt;&nbsp;&lt;file&gt;&nbsp;tag<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;$file-&gt;name&nbsp;if&nbsp;no&nbsp;&lt;install&nbsp;as&gt;&nbsp;tags&nbsp;exist<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$originalpath&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">packagedname</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;tasks&nbsp;associated&nbsp;with&nbsp;this&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tasks&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tasks</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;iterate&nbsp;over&nbsp;the&nbsp;tasks<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lastversion&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'1.0.0'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;last&nbsp;version&nbsp;of&nbsp;$package&nbsp;that&nbsp;was&nbsp;installed,&nbsp;or&nbsp;null<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(new&nbsp;\</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Package</span><span style="color: #007700">\</span><span style="color: #0000BB">Creator</span><span style="color: #007700">\</span><span style="color: #0000BB">TaskIterator</span><span style="color: #007700">(</span><span style="color: #0000BB">$tasks</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Task</span><span style="color: #007700">\</span><span style="color: #0000BB">Common</span><span style="color: #007700">::</span><span style="color: #0000BB">INSTALL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lastversion</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$task</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$name&nbsp;is&nbsp;the&nbsp;task&nbsp;name,&nbsp;$task&nbsp;is&nbsp;the&nbsp;actual&nbsp;task&nbsp;object,&nbsp;which&nbsp;can&nbsp;be<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;processed&nbsp;with&nbsp;$task-&gt;startSession(resource&nbsp;$fp,&nbsp;'/full/final/install/path');<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;***************&nbsp;packaging&nbsp;iteration&nbsp;***************<br /></span><span style="color: #0000BB">$packagingloc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/tmp/example'</span><span style="color: #007700">;<br />foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">packagingcontents&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$packageat&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$packageat&nbsp;is&nbsp;the&nbsp;location&nbsp;in&nbsp;which&nbsp;the&nbsp;file&nbsp;will&nbsp;reside&nbsp;in&nbsp;package.xml,<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;which&nbsp;is&nbsp;often&nbsp;the&nbsp;same&nbsp;relative&nbsp;path&nbsp;it&nbsp;will&nbsp;end&nbsp;up&nbsp;being&nbsp;installed&nbsp;into<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$info&nbsp;is&nbsp;an&nbsp;array&nbsp;representing&nbsp;the&nbsp;actual&nbsp;file&nbsp;XML<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'attribs'</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;this&nbsp;retrieves&nbsp;an&nbsp;open&nbsp;file&nbsp;pointer&nbsp;to&nbsp;the&nbsp;file&nbsp;in&nbsp;order&nbsp;to&nbsp;process&nbsp;it<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$contents&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileContents</span><span style="color: #007700">(</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'attribs'</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$packagingloc&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$packageat</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mkdir</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$packagingloc&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$packageat</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">0777</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$packagingloc&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">DIRECTORY_SEPARATOR&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$packageat</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'wb+'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ftruncate</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;copy&nbsp;from&nbsp;the&nbsp;source&nbsp;directory&nbsp;to&nbsp;the&nbsp;packaging&nbsp;location<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">stream_copy_to_stream</span><span style="color: #007700">(</span><span style="color: #0000BB">$contents</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$contents</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">rewind</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lastversion&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'1.0.0'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;last&nbsp;version&nbsp;of&nbsp;$package&nbsp;that&nbsp;was&nbsp;installed,&nbsp;or&nbsp;null<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(new&nbsp;\</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Package</span><span style="color: #007700">\</span><span style="color: #0000BB">Creator</span><span style="color: #007700">\</span><span style="color: #0000BB">TaskIterator</span><span style="color: #007700">(</span><span style="color: #0000BB">$info</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\</span><span style="color: #0000BB">PEAR2</span><span style="color: #007700">\</span><span style="color: #0000BB">Pyrus</span><span style="color: #007700">\</span><span style="color: #0000BB">Task</span><span style="color: #007700">\</span><span style="color: #0000BB">Common</span><span style="color: #007700">::</span><span style="color: #0000BB">PACKAGE</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lastversion</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$task</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;do&nbsp;pre-processing&nbsp;of&nbsp;file&nbsp;contents<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$task</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">startSession</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$packageat</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(\</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;handle&nbsp;task&nbsp;processing&nbsp;problems&nbsp;here<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;***************&nbsp;traversing&nbsp;deep&nbsp;tree&nbsp;iteration&nbsp;***************<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">contents&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;actual&nbsp;file&nbsp;path&nbsp;to&nbsp;be&nbsp;used&nbsp;with&nbsp;fopen<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$path&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFilePath</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;open&nbsp;file&nbsp;pointer<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileContents</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;file&nbsp;contents&nbsp;as&nbsp;string<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$contents&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFileContents</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;file&nbsp;properties&nbsp;(XML&nbsp;attributes&nbsp;of&nbsp;the&nbsp;&lt;file&gt;&nbsp;tag)<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$role&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">role</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">md5sum</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$md5sum&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">md5sum</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;unlike&nbsp;installcontents,&nbsp;&lt;install&nbsp;as&gt;&nbsp;tags&nbsp;are&nbsp;not&nbsp;applied,&nbsp;so<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$file-&gt;name&nbsp;==&nbsp;$file-&gt;packagedname<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$relativepath&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;***************&nbsp;general&nbsp;purpose&nbsp;iteration&nbsp;***************<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">files&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$relativepath&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$infoarray</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$relativepath&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;$file-&gt;name&nbsp;in&nbsp;the&nbsp;other&nbsp;examples<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$infoarray&nbsp;is&nbsp;the&nbsp;same&nbsp;array&nbsp;returned&nbsp;by&nbsp;the&nbsp;packagingcontents<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;iterator<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #FF8000">//&nbsp;***************&nbsp;retrieving&nbsp;post-install&nbsp;scripts&nbsp;***************<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scriptfiles&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$file&nbsp;is&nbsp;the&nbsp;same&nbsp;object&nbsp;returned&nbsp;by&nbsp;the&nbsp;installcontents&nbsp;iterator<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   
  </div>
  <div class="section" id="pyrus.extending.packagefile.files.setting">
   <div class="info"><h3 class="title">Adding new files, changing file properties</h3></div>
   <p class="para">
    Finally, adding files to package.xml is done by directly setting an
    index in the <code class="literal">files</code> property.  Properties are
    manipulated with the <strong class="function">setFileAttribute()</strong> method.
   </p>
   <p class="para">
    </p><div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">files</span><span style="color: #007700">[</span><span style="color: #DD0000">'path/to/file.php'</span><span style="color: #007700">]&nbsp;=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'role'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'php'<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFileAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'md5sum'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">md5</span><span style="color: #007700">(</span><span style="color: #DD0000">'hi'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;adding&nbsp;a&nbsp;task&nbsp;to&nbsp;a&nbsp;file<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTask</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'replace'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setReplacement</span><span style="color: #007700">(</span><span style="color: #DD0000">'package-info'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'@API-VER@'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'api-version'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFileAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'tasks:replace'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   
  </div>
  <div class="section" id="pyrus.extending.packagefile.files.release">
   <div class="info"><h3 class="title">Working with &lt;release&gt; sections</h3></div>
   <p class="para">
    Releases are documented <a href="guide.developers.package2.release.html" class="link">here</a>,
    you should familiarize yourself with this before continuing.
   </p>
   <p class="para">
    Release properties can be accessed with the following syntax:
   </p>
   <p class="para">
    </p><div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;setting&nbsp;release&nbsp;type<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'extsrc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'zendextsrc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bin'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'zendextbin'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bundle'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;for&nbsp;types&nbsp;other&nbsp;than&nbsp;bundle<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'php'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #DD0000">'5.2.0'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;defaults&nbsp;to&nbsp;"min"<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'php'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'5.2.0'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;defaults&nbsp;to&nbsp;"pattern"<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'arch'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'i386'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'arch'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">pattern</span><span style="color: #007700">(</span><span style="color: #DD0000">'i386'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">conflicts</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;defaults&nbsp;to&nbsp;"name"<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'os'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'windows'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;defaults&nbsp;to&nbsp;existing<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'extension'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">(</span><span style="color: #DD0000">'PDO'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installconditions</span><span style="color: #007700">[</span><span style="color: #DD0000">'extension'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">(</span><span style="color: #DD0000">'PDO'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.0'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">ignore</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.ext'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installAs</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/anotherfile.ext'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'new/name.php'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;add&nbsp;another&nbsp;release<br /></span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">ignore</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/anotherfile.ext'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">installAs</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.ext'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'new/name.php'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;release<br /></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;all&nbsp;releases<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">release&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;retrieve&nbsp;the&nbsp;release&nbsp;that&nbsp;will&nbsp;be&nbsp;used&nbsp;on&nbsp;this&nbsp;system<br /></span><span style="color: #0000BB">$release&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">installrelease</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   
  </div>
 </div>
 <div class="section" id="pyrus.extending.packagefile.pecl">
  <div class="info"><h2 class="title">Accessing PECL properties</h2></div>
  <p class="para">
   Accessing PECL properties is relatively simple, here is an example
   illustrating them:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'extsrc'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;extension&nbsp;source&nbsp;release<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">configureoption</span><span style="color: #007700">[</span><span style="color: #DD0000">'foothing'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">prompt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Value&nbsp;for&nbsp;thing'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">configureoption</span><span style="color: #007700">[</span><span style="color: #DD0000">'with-zlib'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">prompt</span><span style="color: #007700">(</span><span style="color: #DD0000">'Support&nbsp;zlib&nbsp;compression?'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">default</span><span style="color: #007700">(</span><span style="color: #DD0000">'yes'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">providesextension&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'extbin'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;extension&nbsp;binary&nbsp;package&nbsp;release<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">srcpackage&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'pecl.php.net/foo'</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;for&nbsp;packages&nbsp;that&nbsp;are&nbsp;binary&nbsp;releases&nbsp;of&nbsp;URI-based&nbsp;packages<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">srcuri&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'http://example.com/foo-1.2.3'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
 </div>
 <div class="section" id="pyrus.extending.packagefile.custom">
  <div class="info"><h2 class="title">Accessing usesrole, usestask and compatible tags</h2></div>
  <p class="para">
   When declaring that a package.xml uses a custom role or task, this code should
   be used:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">files</span><span style="color: #007700">[</span><span style="color: #DD0000">'example/file.php'</span><span style="color: #007700">]&nbsp;=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'role'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'myrole'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'tasks:mytask'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />);<br /><br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">usesrole</span><span style="color: #007700">[</span><span style="color: #DD0000">'myrole'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">(</span><span style="color: #DD0000">'MyRole'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">channel</span><span style="color: #007700">(</span><span style="color: #DD0000">'mypear.example.com'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">usestask</span><span style="color: #007700">[</span><span style="color: #DD0000">'mytask'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">package</span><span style="color: #007700">(</span><span style="color: #DD0000">'MyTask'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">channel</span><span style="color: #007700">(</span><span style="color: #DD0000">'mypear.example.com'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;for&nbsp;uri-based&nbsp;packages:<br /></span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">usesrole</span><span style="color: #007700">[</span><span style="color: #DD0000">'myrole'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">uri</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://my.example.com/MyRole-1.2.3'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   If you are unfamiliar with the <code class="literal">&lt;compatible&gt;</code> tag,
   you should first read the documentation on its use
   <a href="guide.developers.package2.compatible.html" class="link">here</a>.  Creating
   and accessing compatible tags in Pyrus is as easy as:
  </p>
  <p class="para">
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compatible</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear.php.net/Archive_Tar'</span><span style="color: #007700">]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.2'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">max</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.3.0'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">exclude</span><span style="color: #007700">(</span><span style="color: #DD0000">'1.2.1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'1.2.2'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;a&nbsp;compatibility&nbsp;declaration<br /></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compatible</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear.php.net/Archive_Tar'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;test&nbsp;for&nbsp;existence&nbsp;of&nbsp;compatible&nbsp;declaration<br /></span><span style="color: #007700">isset(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compatible</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear.php.net/Archive_Tar'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;display&nbsp;info:<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compatible</span><span style="color: #007700">[</span><span style="color: #DD0000">'pear.php.net/Archive_Tar'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;iterating&nbsp;over&nbsp;compatible&nbsp;packages<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$package</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compatible&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$package&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Package&nbsp;:"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$package</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"min:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">min</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"max:&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">max</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$info</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exclude</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Excludes&nbsp;versions&nbsp;"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$info</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exclude&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$version</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$version</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="pyrus.extending.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="pyrus.extending.html">Using Pyrus in your programs: Pyrus's Public API</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="pyrus.extending.configuration.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Using Pyrus in your programs: Pyrus's Public API</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Pyrus's configuration API</td>
  </tr>
 </table>
</div>
</body></html>
