<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Introduction</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.xml.xml-sql2xml.html" title="XML_sql2xml" />
  <link rel="prev" href="package.xml.xml-sql2xml.intro-passing.html" title="Introduction" />
  <link rel="next" href="package.xml.xml-sql2xml.xml-sql2xml.xml-sql2xml.html" title="XML_sql2xml::XML_sql2xml" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Introduction</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.xml.xml-sql2xml.intro-passing.html" title="Introduction">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.xml.xml-sql2xml.xml-sql2xml.xml-sql2xml.html" title="XML_sql2xml::XML_sql2xml">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.xml.xml-sql2xml.intro-xpath">
   
    <h1 class="refname">Introduction</h1>
    <div class="refnamediv">Introduction &ndash; Using XPath</div>

  
 
  <div class="refsection" id="package.xml.xml-sql2xml.intro-xpath.why"><div class="info"><h1>Why XPath support?</h1>
</div>
    
   <p class="para">
    The XPath support was introduced to provide an access to the result
    set after doing the SQL query. This allows further proccessing of the 
    result set without quering the database again.
   </p>
   <p class="para">
    XPath is a W3-Standard and for further information about that, 
    ask your preferred XSL/XML book, or 
    <a href="http://www.w3.org/" class="link external">http://www.w3.org/</a>.
   </p>
  </div>
  <div class="refsection" id="package.xml.xml-sql2xml.intro-xpath.getxpath"><div class="info"><h1>Passing an XPath expression</h1>
</div>
   
   <p class="para">
    <strong class="classname">XML_sql2xml</strong> provides two functions for
    querying the result set: <a href="package.xml.xml-sql2xml.xml-sql2xml.getxpathvalue.html" class="link">
     <strong class="function">getXpathValue()</strong></a> and <a href="package.xml.xml-sql2xml.xml-sql2xml.getxpathchildvalues.html" class="link">
     <strong class="function">getXpathChildValues()</strong></a>. Both expect a
    XPath query and return the result as string or array.
    </p><div class="example"><div class="info"><p><strong>getXpathValue</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">include_once(</span><span style="color: #DD0000">"XML/sql2xml.php"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">xml_sql2xml</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql://username:password@localhost/xmltest"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;bands"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$xmlstring&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getXpathValue</span><span style="color: #007700">(</span><span style="color: #DD0000">"/root/result/row[id&nbsp;=&nbsp;'2']/name"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
     <div class="example-contents"><p>
      <em><code class="parameter">$xmlstring</code></em> contains:
     </p></div>
     <div class="programlisting">
      <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xmlstring&nbsp;=&nbsp;&#039;Only&nbsp;Stupids&#039;
     </div>
    </div>
    <div class="example"><div class="info"><p><strong>getXpathChildValues</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">include_once(</span><span style="color: #DD0000">"XML/sql2xml.php"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">xml_sql2xml</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql://username:password@localhost/xmltest"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;bands"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$xmlstring&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getXpathChildValues</span><span style="color: #007700">(</span><span style="color: #DD0000">"/root/result/row[id&nbsp;=&nbsp;'2']"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
     <div class="example-contents"><p>
      <em><code class="parameter">$xmlstring</code></em> contains:
     </p></div>
     <div class="programlisting">
      <br/>Array<br/>(<br/>&nbsp;&nbsp;&nbsp;&nbsp;[]&nbsp;=&gt;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;[id]&nbsp;=&gt;&nbsp;2<br/>&nbsp;&nbsp;&nbsp;&nbsp;[name]&nbsp;=&gt;&nbsp;Only&nbsp;Stupids<br/>&nbsp;&nbsp;&nbsp;&nbsp;[birth_year]&nbsp;=&gt;&nbsp;1997<br/>&nbsp;&nbsp;&nbsp;&nbsp;[birth_place]&nbsp;=&gt;&nbsp;New&nbsp;York<br/>&nbsp;&nbsp;&nbsp;&nbsp;[genre]&nbsp;=&gt;&nbsp;Hip&nbsp;Hop<br/>)      
     </div>
     </div>    
    
     
   </div>
   <div class="refsection" id="package.xml.xml-sql2xml.intro-xpath.mixsqlxpath"><div class="info"><h1>Mixing SQL and XPath query</h1>
</div>
    
    <p class="para">
     You can insert an XPath query into an SQL query. In the example, first
     a SQL query is done, in the second a SQL query done again - but the
     parameter for <em><code class="parameter">bandsID</code></em> is taken from
     the XPath expression in the curly braces. This expression is processed on
     the result set of the <em class="emphasis">first</em> SQL query. 
    </p>
    <div class="example"><div class="info"><p><strong>Mixed query</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">include_once(</span><span style="color: #DD0000">"XML/sql2xml.php"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">xml_sql2xml</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql://username:password@localhost/xmltest"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;bands"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;albums&nbsp;where&nbsp;bandsID&nbsp;=&nbsp;{/root/result/row[name&nbsp;=&nbsp;'The&nbsp;Blabbers']/id}"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$xmlstring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sql2xmlclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getxml</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
     <div class="programlisting">
      <br/>$xmlstring&nbsp;=&nbsp;&#039;<br/><br/>&lt;?xml&nbsp;version=&quot;1.0&quot;?&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;root&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;1&lt;/id&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;The&nbsp;Blabbers&lt;/name&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;birth_year&gt;1998&lt;/birth_year&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;birth_place&gt;London&lt;/birth_place&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;genre&gt;Rock&#039;n&#039;Roll&lt;/genre&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;2&lt;/id&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;Only&nbsp;Stupids&lt;/name&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;birth_year&gt;1997&lt;/birth_year&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;birth_place&gt;New&nbsp;York&lt;/birth_place&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;genre&gt;Hip&nbsp;Hop&lt;/genre&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/result&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;result&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;1&lt;/id&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bandsID&gt;1&lt;/bandsID&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;BlaBla&lt;/title&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;year&gt;1998&lt;/year&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;comment&gt;Their&nbsp;first&nbsp;one&lt;/comment&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;2&lt;/id&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bandsID&gt;1&lt;/bandsID&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;More&nbsp;Talks&lt;/title&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;year&gt;2000&lt;/year&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;comment&gt;The&nbsp;second&nbsp;one&lt;/comment&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/result&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/root&gt;
     </div>
    </div>
   </div>
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.xml.xml-sql2xml.intro-passing.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.xml.xml-sql2xml.html">XML_sql2xml</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.xml.xml-sql2xml.xml-sql2xml.xml-sql2xml.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Introduction</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">XML_sql2xml::XML_sql2xml</td>
  </tr>
 </table>
</div>
</body></html>
