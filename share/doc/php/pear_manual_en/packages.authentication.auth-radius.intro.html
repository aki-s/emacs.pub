<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Introduction</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.authentication.auth-radius.html" title="Auth_RADIUS" />
  <link rel="prev" href="package.authentication.auth-radius.html" title="Auth_RADIUS" />
  <link rel="next" href="package.authentication.liveuser.html" title="LiveUser" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Introduction</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.authentication.auth-radius.html" title="Auth_RADIUS">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.authentication.liveuser.html" title="LiveUser">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="packages.authentication.auth-radius.intro">
    
     <h1 class="refname">Introduction</h1>
     <div class="refnamediv">Introduction &ndash; 
      Basic usage of Auth_RADIUS
     </div>

    
    <div class="refsection"><div class="info"><h1>What is Auth_RADIUS?</h1>
</div> 
     
     <p class="para">
      Auth_RADIUS is a php wrapper around the php radius extension.
      If you are unfamiliar with the RADIUS protocol, the
      <a href="http://en.wikipedia.org/wiki/RADIUS" class="link external">Wikipedia article</a>
      provides an excellent introduction.
     </p>
     <p class="para">
      Auth_RADIUS is structured around the facilities built into the radius extension.
      Understanding Auth_RADIUS generally first requires a basic understanding of
      how the radius extension is designed.  Documentation of the radius extension
      is available through the PHP manual at
      <a href="http://www.php.net/radius" class="link external">http://www.php.net/radius</a>
     </p>
     <p class="para">
      There are different Classes for the different authentication methods available
      through RADIUS.  If you are using CHAP-MD5 or MS-CHAP authentication, you will
      also need the <a href="http://pear.php.net/package/Crypt_CHAP" class="link external">Crypt_CHAP</a> package.
      In addition, if using MS-CHAP authentication, you will need to enable
      the mhash and mcrypt extension in php.ini, or compile them in statically.
     </p>
     <p class="para">
      Note that if you have the latest radius extension (version 1.2 or newer), you will
      not need to enable the mcrypt extension.
     </p>
    </div>
    <div class="refsection" id="packages.authentication.auth-radius.intro.how"><div class="info"><h1>How do I use Auth_RADIUS?</h1>
</div> 
     
     <p class="para">
      Basic usage examples follow, pulled from the package itself.
     </p>
     <p class="para">
      </p><div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;vim:&nbsp;set&nbsp;expandtab&nbsp;tabstop=4&nbsp;shiftwidth=4:&nbsp;*/<br />/*<br />Copyright&nbsp;(c)&nbsp;2003,&nbsp;Michael&nbsp;Bretterklieber&nbsp;&lt;michael@bretterklieber.com&gt;<br />All&nbsp;rights&nbsp;reserved.<br /><br />Redistribution&nbsp;and&nbsp;use&nbsp;in&nbsp;source&nbsp;and&nbsp;binary&nbsp;forms,&nbsp;with&nbsp;or&nbsp;without&nbsp;<br />modification,&nbsp;are&nbsp;permitted&nbsp;provided&nbsp;that&nbsp;the&nbsp;following&nbsp;conditions&nbsp;<br />are&nbsp;met:<br /><br />1.&nbsp;Redistributions&nbsp;of&nbsp;source&nbsp;code&nbsp;must&nbsp;retain&nbsp;the&nbsp;above&nbsp;copyright&nbsp;<br />&nbsp;&nbsp;&nbsp;notice,&nbsp;this&nbsp;list&nbsp;of&nbsp;conditions&nbsp;and&nbsp;the&nbsp;following&nbsp;disclaimer.<br />2.&nbsp;Redistributions&nbsp;in&nbsp;binary&nbsp;form&nbsp;must&nbsp;reproduce&nbsp;the&nbsp;above&nbsp;copyright&nbsp;<br />&nbsp;&nbsp;&nbsp;notice,&nbsp;this&nbsp;list&nbsp;of&nbsp;conditions&nbsp;and&nbsp;the&nbsp;following&nbsp;disclaimer&nbsp;in&nbsp;the&nbsp;<br />&nbsp;&nbsp;&nbsp;documentation&nbsp;and/or&nbsp;other&nbsp;materials&nbsp;provided&nbsp;with&nbsp;the&nbsp;distribution.<br />3.&nbsp;The&nbsp;names&nbsp;of&nbsp;the&nbsp;authors&nbsp;may&nbsp;not&nbsp;be&nbsp;used&nbsp;to&nbsp;endorse&nbsp;or&nbsp;promote&nbsp;products&nbsp;<br />&nbsp;&nbsp;&nbsp;derived&nbsp;from&nbsp;this&nbsp;software&nbsp;without&nbsp;specific&nbsp;prior&nbsp;written&nbsp;permission.<br /><br />THIS&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;BY&nbsp;THE&nbsp;COPYRIGHT&nbsp;HOLDERS&nbsp;AND&nbsp;CONTRIBUTORS&nbsp;"AS&nbsp;IS"&nbsp;AND&nbsp;<br />ANY&nbsp;EXPRESS&nbsp;OR&nbsp;IMPLIED&nbsp;WARRANTIES,&nbsp;INCLUDING,&nbsp;BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO,&nbsp;THE&nbsp;IMPLIED&nbsp;<br />WARRANTIES&nbsp;OF&nbsp;MERCHANTABILITY&nbsp;AND&nbsp;FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;ARE&nbsp;DISCLAIMED.&nbsp;<br />IN&nbsp;NO&nbsp;EVENT&nbsp;SHALL&nbsp;THE&nbsp;COPYRIGHT&nbsp;OWNER&nbsp;OR&nbsp;CONTRIBUTORS&nbsp;BE&nbsp;LIABLE&nbsp;FOR&nbsp;ANY&nbsp;DIRECT,&nbsp;<br />INDIRECT,&nbsp;INCIDENTAL,&nbsp;SPECIAL,&nbsp;EXEMPLARY,&nbsp;OR&nbsp;CONSEQUENTIAL&nbsp;DAMAGES&nbsp;(INCLUDING,&nbsp;<br />BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO,&nbsp;PROCUREMENT&nbsp;OF&nbsp;SUBSTITUTE&nbsp;GOODS&nbsp;OR&nbsp;SERVICES;&nbsp;LOSS&nbsp;OF&nbsp;USE,&nbsp;<br />DATA,&nbsp;OR&nbsp;PROFITS;&nbsp;OR&nbsp;BUSINESS&nbsp;INTERRUPTION)&nbsp;HOWEVER&nbsp;CAUSED&nbsp;AND&nbsp;ON&nbsp;ANY&nbsp;THEORY&nbsp;<br />OF&nbsp;LIABILITY,&nbsp;WHETHER&nbsp;IN&nbsp;CONTRACT,&nbsp;STRICT&nbsp;LIABILITY,&nbsp;OR&nbsp;TORT&nbsp;(INCLUDING&nbsp;<br />NEGLIGENCE&nbsp;OR&nbsp;OTHERWISE)&nbsp;ARISING&nbsp;IN&nbsp;ANY&nbsp;WAY&nbsp;OUT&nbsp;OF&nbsp;THE&nbsp;USE&nbsp;OF&nbsp;THIS&nbsp;SOFTWARE,&nbsp;<br />EVEN&nbsp;IF&nbsp;ADVISED&nbsp;OF&nbsp;THE&nbsp;POSSIBILITY&nbsp;OF&nbsp;SUCH&nbsp;DAMAGE.<br /><br />This&nbsp;code&nbsp;cannot&nbsp;simply&nbsp;be&nbsp;copied&nbsp;and&nbsp;put&nbsp;under&nbsp;the&nbsp;GNU&nbsp;Public&nbsp;License&nbsp;or&nbsp;<br />any&nbsp;other&nbsp;GPL-like&nbsp;(LGPL,&nbsp;GPL2)&nbsp;License.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;$Id:&nbsp;intro.xml,v&nbsp;1.4&nbsp;2008-10-09&nbsp;15:16:20&nbsp;cweiske&nbsp;Exp&nbsp;$<br />*/<br /><br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Auth/RADIUS.php'</span><span style="color: #007700">;<br />require_once&nbsp;</span><span style="color: #DD0000">'Crypt/CHAP.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//$type&nbsp;=&nbsp;'PAP';<br />//$type&nbsp;=&nbsp;'CHAP_MD5';<br /></span><span style="color: #0000BB">$type&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'MSCHAPv1'</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//$type&nbsp;=&nbsp;'MSCHAPv2';<br /><br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'sepp'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'sepp'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$classname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Auth_RADIUS_'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$rauth&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">$classname</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addServer</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'testing123'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setConfigfile</span><span style="color: #007700">(</span><span style="color: #DD0000">'/etc/radius.conf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br /><br />switch(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)&nbsp;{<br />case&nbsp;</span><span style="color: #DD0000">'CHAP_MD5'</span><span style="color: #007700">:<br />case&nbsp;</span><span style="color: #DD0000">'MSCHAPv1'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$classname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$type&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'MSCHAPv1'&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">'Crypt_CHAP_MSv1'&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">'Crypt_CHAP_MD5'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$crpt&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">$classname</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">challenge&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">challenge</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">chapid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">chapid</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">challengeResponse</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flags&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;If&nbsp;you&nbsp;must&nbsp;use&nbsp;deprecated&nbsp;and&nbsp;weak&nbsp;LAN-Manager-Responses&nbsp;use&nbsp;this:<br />//&nbsp;&nbsp;&nbsp;&nbsp;$rauth-&gt;lmResponse&nbsp;=&nbsp;$crpt-&gt;lmChallengeResponse();<br />//&nbsp;&nbsp;&nbsp;&nbsp;$rauth-&gt;flags&nbsp;=&nbsp;0;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">break;<br />&nbsp;&nbsp;<br />case&nbsp;</span><span style="color: #DD0000">'MSCHAPv2'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$crpt&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Crypt_CHAP_MSv2</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">challenge&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">authChallenge</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">peerChallenge&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">peerChallenge</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">chapid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">chapid</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$crpt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">challengeResponse</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />default:<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;break;<br />}<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">start</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;start:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getError</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;send&nbsp;failed:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Auth&nbsp;succeeded&lt;br&gt;\n"</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Auth&nbsp;rejected&lt;br&gt;\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;attributes,&nbsp;even&nbsp;if&nbsp;auth&nbsp;failed<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttributes</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;getAttributes:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getError</span><span style="color: #007700">());<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dumpAttributes</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">$rauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /><br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
      </div>
     
     <p class="para">
      Here is the second example:
     </p>
     <p class="para">
      </p><div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;vim:&nbsp;set&nbsp;expandtab&nbsp;tabstop=4&nbsp;shiftwidth=4:&nbsp;*/<br />/*<br />Copyright&nbsp;(c)&nbsp;2003,&nbsp;Michael&nbsp;Bretterklieber&nbsp;&lt;michael@bretterklieber.com&gt;<br />All&nbsp;rights&nbsp;reserved.<br /><br />Redistribution&nbsp;and&nbsp;use&nbsp;in&nbsp;source&nbsp;and&nbsp;binary&nbsp;forms,&nbsp;with&nbsp;or&nbsp;without&nbsp;<br />modification,&nbsp;are&nbsp;permitted&nbsp;provided&nbsp;that&nbsp;the&nbsp;following&nbsp;conditions&nbsp;<br />are&nbsp;met:<br /><br />1.&nbsp;Redistributions&nbsp;of&nbsp;source&nbsp;code&nbsp;must&nbsp;retain&nbsp;the&nbsp;above&nbsp;copyright&nbsp;<br />&nbsp;&nbsp;&nbsp;notice,&nbsp;this&nbsp;list&nbsp;of&nbsp;conditions&nbsp;and&nbsp;the&nbsp;following&nbsp;disclaimer.<br />2.&nbsp;Redistributions&nbsp;in&nbsp;binary&nbsp;form&nbsp;must&nbsp;reproduce&nbsp;the&nbsp;above&nbsp;copyright&nbsp;<br />&nbsp;&nbsp;&nbsp;notice,&nbsp;this&nbsp;list&nbsp;of&nbsp;conditions&nbsp;and&nbsp;the&nbsp;following&nbsp;disclaimer&nbsp;in&nbsp;the<br />&nbsp;&nbsp;&nbsp;documentation&nbsp;and/or&nbsp;other&nbsp;materials&nbsp;provided&nbsp;with&nbsp;the&nbsp;distribution.<br />3.&nbsp;The&nbsp;names&nbsp;of&nbsp;the&nbsp;authors&nbsp;may&nbsp;not&nbsp;be&nbsp;used&nbsp;to&nbsp;endorse&nbsp;or&nbsp;promote&nbsp;products&nbsp;<br />&nbsp;&nbsp;&nbsp;derived&nbsp;from&nbsp;this&nbsp;software&nbsp;without&nbsp;specific&nbsp;prior&nbsp;written&nbsp;permission.<br /><br />THIS&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;BY&nbsp;THE&nbsp;COPYRIGHT&nbsp;HOLDERS&nbsp;AND&nbsp;CONTRIBUTORS&nbsp;"AS&nbsp;IS"&nbsp;AND&nbsp;<br />ANY&nbsp;EXPRESS&nbsp;OR&nbsp;IMPLIED&nbsp;WARRANTIES,&nbsp;INCLUDING,&nbsp;BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO,&nbsp;THE&nbsp;IMPLIED&nbsp;<br />WARRANTIES&nbsp;OF&nbsp;MERCHANTABILITY&nbsp;AND&nbsp;FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;ARE&nbsp;DISCLAIMED.&nbsp;<br />IN&nbsp;NO&nbsp;EVENT&nbsp;SHALL&nbsp;THE&nbsp;COPYRIGHT&nbsp;OWNER&nbsp;OR&nbsp;CONTRIBUTORS&nbsp;BE&nbsp;LIABLE&nbsp;FOR&nbsp;ANY&nbsp;DIRECT,&nbsp;<br />INDIRECT,&nbsp;INCIDENTAL,&nbsp;SPECIAL,&nbsp;EXEMPLARY,&nbsp;OR&nbsp;CONSEQUENTIAL&nbsp;DAMAGES&nbsp;(INCLUDING,&nbsp;<br />BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO,&nbsp;PROCUREMENT&nbsp;OF&nbsp;SUBSTITUTE&nbsp;GOODS&nbsp;OR&nbsp;SERVICES;&nbsp;LOSS&nbsp;OF&nbsp;USE,&nbsp;<br />DATA,&nbsp;OR&nbsp;PROFITS;&nbsp;OR&nbsp;BUSINESS&nbsp;INTERRUPTION)&nbsp;HOWEVER&nbsp;CAUSED&nbsp;AND&nbsp;ON&nbsp;ANY&nbsp;THEORY&nbsp;<br />OF&nbsp;LIABILITY,&nbsp;WHETHER&nbsp;IN&nbsp;CONTRACT,&nbsp;STRICT&nbsp;LIABILITY,&nbsp;OR&nbsp;TORT&nbsp;(INCLUDING&nbsp;<br />NEGLIGENCE&nbsp;OR&nbsp;OTHERWISE)&nbsp;ARISING&nbsp;IN&nbsp;ANY&nbsp;WAY&nbsp;OUT&nbsp;OF&nbsp;THE&nbsp;USE&nbsp;OF&nbsp;THIS&nbsp;SOFTWARE,&nbsp;<br />EVEN&nbsp;IF&nbsp;ADVISED&nbsp;OF&nbsp;THE&nbsp;POSSIBILITY&nbsp;OF&nbsp;SUCH&nbsp;DAMAGE.<br /><br />This&nbsp;code&nbsp;cannot&nbsp;simply&nbsp;be&nbsp;copied&nbsp;and&nbsp;put&nbsp;under&nbsp;the&nbsp;GNU&nbsp;Public&nbsp;License&nbsp;or&nbsp;<br />any&nbsp;other&nbsp;GPL-like&nbsp;(LGPL,&nbsp;GPL2)&nbsp;License.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;$Id:&nbsp;intro.xml,v&nbsp;1.4&nbsp;2008-10-09&nbsp;15:16:20&nbsp;cweiske&nbsp;Exp&nbsp;$<br />*/<br /><br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Auth/RADIUS.php'</span><span style="color: #007700">;<br />require_once&nbsp;</span><span style="color: #DD0000">'Crypt/CHAP.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'sepp'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$starttime&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$racct&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Auth_RADIUS_Acct_Start</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addServer</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'testing123'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;RADIUS_AUTH_RADIUS&nbsp;=&gt;&nbsp;authenticated&nbsp;via&nbsp;Radius<br />//&nbsp;RADIUS_AUTH_LOCAL&nbsp;=&gt;&nbsp;authenicated&nbsp;local<br />//&nbsp;RADIUS_AUTH_REMOTE&nbsp;=&gt;&nbsp;authenticated&nbsp;remote<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">authentic&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">RADIUS_AUTH_LOCAL</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$status&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">start</span><span style="color: #007700">();<br />if(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$status</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;start:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$status</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #FF8000">//&nbsp;you&nbsp;can&nbsp;put&nbsp;any&nbsp;additional&nbsp;attributes&nbsp;here<br />//&nbsp;$racct-&gt;putAttribute(RADIUS_ACCT_INPUT_PACKETS,&nbsp;45236);<br />//&nbsp;$racct-&gt;putAttribute(RADIUS_ACCT_OUTPUT_PACKETS,&nbsp;1212);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;send&nbsp;failed:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Acounting&nbsp;succeeded&lt;br&gt;\n"</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Acounting&nbsp;rejected&lt;br&gt;\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Wait&nbsp;a&nbsp;bit,&nbsp;that&nbsp;we&nbsp;can&nbsp;put&nbsp;the&nbsp;session-time<br /></span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;send&nbsp;an&nbsp;accounting&nbsp;update<br /></span><span style="color: #0000BB">$racct&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Auth_RADIUS_Acct_Update</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addServer</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'testing123'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">session_time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">$starttime</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$status&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">start</span><span style="color: #007700">();<br />if(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$status</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;start:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$status</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;send&nbsp;failed:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Acounting&nbsp;succeeded&lt;br&gt;\n"</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Acounting&nbsp;rejected&lt;br&gt;\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Wait&nbsp;a&nbsp;bit,&nbsp;that&nbsp;we&nbsp;can&nbsp;put&nbsp;the&nbsp;session-time<br /></span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;send&nbsp;the&nbsp;stop<br /></span><span style="color: #0000BB">$racct&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Auth_RADIUS_Acct_Stop</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addServer</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'testing123'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">session_time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">$starttime</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$status&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">start</span><span style="color: #007700">();<br />if(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$status</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;start:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$status</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /></span><span style="color: #FF8000">//&nbsp;you&nbsp;can&nbsp;put&nbsp;any&nbsp;additional&nbsp;attributes&nbsp;here<br />//&nbsp;$racct-&gt;putAttribute(RADIUS_ACCT_TERMINATE_CAUSE,&nbsp;RADIUS_TERM_SESSION_TIMEOUT);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();<br />if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;send&nbsp;failed:&nbsp;%s&lt;br&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Acounting&nbsp;succeeded&lt;br&gt;\n"</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Radius&nbsp;Acounting&nbsp;rejected&lt;br&gt;\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$racct</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
      </div>
     
    </div>
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.authentication.auth-radius.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.authentication.auth-radius.html">Auth_RADIUS</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.authentication.liveuser.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Auth_RADIUS</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">LiveUser</td>
  </tr>
 </table>
</div>
</body></html>
