<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Structures_DataGrid_Renderer_Flexy</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.structures.structures-datagrid.structures-datagrid-renderer.html" title="Renderer drivers" />
  <link rel="prev" href="package.structures.structures-datagrid.structures-datagrid-renderer.csv.html" title="Structures_DataGrid_Renderer_CSV" />
  <link rel="next" href="package.structures.structures-datagrid.structures-datagrid-renderer.htmleditform.html" title="Structures_DataGrid_Renderer_HTMLEditForm" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Structures_DataGrid_Renderer_Flexy</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.structures.structures-datagrid.structures-datagrid-renderer.csv.html" title="Structures_DataGrid_Renderer_CSV">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.structures.structures-datagrid.structures-datagrid-renderer.htmleditform.html" title="Structures_DataGrid_Renderer_HTMLEditForm">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.structures.structures-datagrid.structures-datagrid-renderer.flexy">
 
  <h1 class="refname">Structures_DataGrid_Renderer_Flexy</h1>
  <div class="refnamediv">Structures_DataGrid_Renderer_Flexy &ndash; Flexy Rendering Driver</div>

 
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-renderer.flexy.release"><div class="info"><h1>Availability</h1>
</div>
  
  <p class="para">
  This driver is <em class="emphasis">experimental</em>
  and has not been officially released yet.
  It is <em class="emphasis">only available from SVN</em>.
  </p>
 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-renderer.flexy.modes"><div class="info"><h1>Supported operations modes</h1>
</div>
  
  <p class="para">
   This driver supports the following operation modes:
  </p>
  <table class="doctable table"><caption>Supported operations modes of this driver</caption>
   
   
    <thead>
     <tr>
      <th>Mode</th>
      <th>Supported?</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>Container Support</td>
      <td>yes</td>
     </tr>

     <tr>
      <td>Output Buffering</td>
      <td>yes</td>
     </tr>

     <tr>
      <td>Direct Rendering</td>
      <td>no</td>
     </tr>

     <tr>
      <td>Streaming</td>
      <td>no</td>
     </tr>

     <tr>
      <td>Object Preserving</td>
      <td>no</td>
     </tr>

    </tbody>
   
  </table>

 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-renderer.flexy.options"><div class="info"><h1>Options</h1>
</div>
  
  <p class="para">
   This driver accepts the following options:
  </p>
  <table class="doctable table"><caption>Options for this driver</caption>
   
   
    <thead>
     <tr>
      <th>Option</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default Value</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>assocColumns</td>
      <td>bool</td>
      <td>Whether or not to build the column header as an associate
       array.</td>
      <td>true</td>
     </tr>

     <tr>
      <td>buildFooter</td>
      <td>bool</td>
      <td>Whether to build the footer.</td>
      <td>true</td>
     </tr>

     <tr>
      <td>buildHeader</td>
      <td>bool</td>
      <td>Whether to build the header.</td>
      <td>true</td>
     </tr>

     <tr>
      <td>columnAttributes</td>
      <td>array</td>
      <td>Column cells attributes. This is an array of the form:
       array(fieldName =&gt; array(attribute =&gt; value, ...) ...) This option
       is only used by XML/HTML based drivers.</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>columnNames</td>
      <td>array</td>
      <td>The set of column names to use for the column header.</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>convertEntities</td>
      <td>bool</td>
      <td>Whether or not to convert html entities. This calls
       htmlspecialchars().</td>
      <td>true</td>
     </tr>

     <tr>
      <td>defaultCellValue</td>
      <td>string</td>
      <td>What value to put by default into empty cells.</td>
      <td>null</td>
     </tr>

     <tr>
      <td>defaultColumnValues</td>
      <td>array</td>
      <td>Per-column default cell value. This is an array of the form:
       array(fieldName =&gt; value, ...).</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>encoding</td>
      <td>string</td>
      <td>The content encoding. If the mbstring extension is present the
       default value is set from mb_internal_encoding(), otherwise it is
       ISO-8859-1.</td>
      <td>&#039;ISO-8859-1&#039;</td>
     </tr>

     <tr>
      <td>evenRowAttribute</td>
      <td>string</td>
      <td>The css class to be used for the even row listings.</td>
      <td>&#039;even&#039;</td>
     </tr>

     <tr>
      <td>excludeVars</td>
      <td>array</td>
      <td>Variables to be removed from the generated HTTP queries.</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>extraVars</td>
      <td>array</td>
      <td>Variables to be added to the generated HTTP queries.</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>fillWithEmptyRows</td>
      <td>bool</td>
      <td>Ensures that all pages have the same number of rows.</td>
      <td>false</td>
     </tr>

     <tr>
      <td>formatter</td>
      <td>array</td>
      <td>The callback array for a column header formatter method.</td>
      <td>array($this,&#039;defaultHeaderFormatter&#039;)</td>
     </tr>

     <tr>
      <td>hideColumnLinks</td>
      <td>array</td>
      <td>By default sorting links are enabled on all columns. With this
       option it is possible to disable sorting links on specific columns. This
       is an array of the form: array(fieldName, ...). This option only affects
       drivers that support sorting.</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>numberAlign</td>
      <td>bool</td>
      <td>Whether to right-align numeric values.</td>
      <td>true</td>
     </tr>

     <tr>
      <td>oddRowAttribute</td>
      <td>string</td>
      <td>The css class to be used for odd row listings.</td>
      <td>&#039;odd&#039;</td>
     </tr>

     <tr>
      <td>onMove</td>
      <td>string</td>
      <td>Name of a Javascript function to call on onClick/onSubmit events
       when the user is either paging or sorting the data. This function
       receives a single object argument of the form: { page: &lt;page&gt;,
       sort: [{field: &lt;field&gt;, direction: &lt;direction&gt;}, ...], data:
       &lt;user_data&gt; }. Remark: setting this option doesn&#039;t remove the href
       attribute, you should return false from your handler function to void it
       (eg: for AJAX, etc..).</td>
      <td>null</td>
     </tr>

     <tr>
      <td>onMoveData</td>
      <td>string</td>
      <td>User data passed in the &quot;data&quot; member of the object
       argument passed to onMove. No JSON serialization is performed, this is
       assigned as a raw string to the &quot;data&quot; attribute. It&#039;s up to
       you to add quotes, slashes, etc...</td>
      <td>&#039;&#039;</td>
     </tr>

     <tr>
      <td>pagerOptions</td>
      <td>array</td>
      <td>The custom options to be sent to the Pager renderer.</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td>resultsFormat</td>
      <td>string</td>
      <td>The format of the results message in sprintf format.</td>
      <td>&#039;You have %s results in %s pages&#039;</td>
     </tr>

     <tr>
      <td>selfPath</td>
      <td>string</td>
      <td>The complete path for sorting and paging links.</td>
      <td>$_SERVER[&#039;PHP_SELF&#039;]</td>
     </tr>

     <tr>
      <td>sortingResetsPaging</td>
      <td>bool</td>
      <td>Whether sorting HTTP queries reset paging.</td>
      <td>true</td>
     </tr>

    </tbody>
   
  </table>

 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-renderer.flexy.notes"><div class="info"><h1>General notes</h1>
</div>
  
  <p class="para">
   This driver does not support the render() method, it only is able to be attached
   setting the container to a current Flexy instance. Options to the renderer must
   also be passed using the setOptions() method.
  </p>
  <p class="para">   
   Flexy output is buffered using the DataGrid getOutput() method.
  </p>
  <p class="para">   
   This driver assigns the following Flexy template variables:
   - columnSet:       array of columns&#039; labels and sorting links
   - columnHeader:    object of columns&#039; labels and sorting links
   - recordSet:       associate array of records values
   - numberedSet:     numbered array of records values
   - currentPage:     current page (starting from 1)
   - recordLimit:     number of rows per page
   - pagesNum:        number of pages
   - columnsNum:      number of columns
   - recordsNum:      number of records in the current page
   - totalRecordsNum: total number of records
   - firstRecord:     first record number (starting from 1)
   - lastRecord:      last record number (starting from 1)
  </p>
  <p class="para">   
   This driver also register a Smarty custom function named getPaging
   that can be called from Smarty templates with {getPaging} in order
   to print paging links. This function accepts any of the Pager::factory()
   options as parameters.
  </p>
  <p class="para">   
   Dynamic Template example, featuring sorting and paging:
  </p>
  <p class="para">   
   </p><div class="programlisting"><pre class="programlisting">&lt;!-- Show paging links using the custom getPaging function --&gt;
{getPaging():h}

&lt;p&gt;Showing records {firstRecord} to {lastRecord}
from {totalRecordsNum}, page {currentPage} of {pagesNum}&lt;/p&gt;

&lt;table cellspacing=&quot;0&quot;&gt;
   &lt;!-- Build header --&gt;
   &lt;tr&gt;
       &lt;th&gt;
           {foreach:columnSet,column}
               &lt;td&gt;&lt;a href=&quot;{column[link]:h}&quot;&gt;{column[label]:h}&lt;/a&gt;&lt;/td&gt;
           {end:}
       &lt;/th&gt;
   &lt;/tr&gt;

   &lt;!-- Build body --&gt;
   &lt;tr class=&quot;{getRowCSS()}&quot; flexy:foreach=&quot;numberedSet,k,row&quot;&gt;
       {foreach:row,field}
           &lt;td&gt;{field}&lt;/td&gt;
       {end:}
   &lt;/tr&gt;
&lt;/table&gt;</pre>
</div>
  
  <p class="para">   
   Static Template example, featuring sorting and paging:
  </p>
  <p class="para">   
   </p><div class="programlisting"><pre class="programlisting">&lt;table cellspacing=&quot;0&quot;&gt;
   &lt;!-- Build header --&gt;
   &lt;tr&gt;
       &lt;th&gt;
           &lt;td&gt;
               &lt;a href=&quot;{columnHeader.name[link]:h}&quot;&gt;{columnHeader.field1[label]:h}&lt;/a&gt;
           &lt;/td&gt;
           &lt;td&gt;
              &lt;a href=&quot;{columnHeader.surname[link]:h}&quot;&gt;{columnHeader.field2[label]:h}&lt;/a&gt;
           &lt;/td&gt;
       &lt;/th&gt;
   &lt;/tr&gt;

   &lt;!-- Build body --&gt;
   &lt;tr class=&quot;{getRowCSS()}&quot; flexy:foreach=&quot;recordSet,k,row&quot;&gt;
       &lt;td&gt;{row[field1]}&lt;/td&gt;
       &lt;td&gt;{row[field2]}&lt;/td&gt;
   &lt;/tr&gt;
&lt;/table&gt;</pre>
</div>
  
  <p class="para">   
   </p><div class="programlisting"><pre class="programlisting">require_once &#039;HTML/Template/Flexy.php&#039;;
require_once &#039;Structures/DataGrid.php&#039;;
require_once &#039;Structures/DataGrid/Renderer/Flexy.php&#039;;

$tpl = new HTML_Template_Flexy($config[&#039;HTML_Template_Flexy&#039;]);
$dg =&amp; new Structures_DataGrid($_GET[&#039;setPerPage&#039;] ? $_GET[&#039;setPerPage&#039;]
                                                   : 10,$_GET[&#039;page&#039;]
                                                   ? $_GET[&#039;page&#039;] : 1);
$dg-&gt;bind($dataObject);
$renderer = new Structures_DataGrid_Renderer_Flexy();
$renderer-&gt;setContainer($tpl);
$renderer-&gt;setOptions($config[&#039;Structures_DataGrid&#039;]);
$dg-&gt;attachRenderer($renderer);
$this-&gt;tpl-&gt;compile($template);
echo $dg-&gt;getOutput();</pre>
</div>
  
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.structures.structures-datagrid.structures-datagrid-renderer.csv.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.structures.structures-datagrid.structures-datagrid-renderer.html">Renderer drivers</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.structures.structures-datagrid.structures-datagrid-renderer.htmleditform.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Structures_DataGrid_Renderer_CSV</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Structures_DataGrid_Renderer_HTMLEditForm</td>
  </tr>
 </table>
</div>
</body></html>
