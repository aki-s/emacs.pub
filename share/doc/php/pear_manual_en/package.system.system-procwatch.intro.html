<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Intro</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.system.system-procwatch.intro-and-features.html" title="Introduction and Features" />
  <link rel="prev" href="package.system.system-procwatch.intro-and-features.html" title="Introduction and Features" />
  <link rel="next" href="package.system.system-procwatch.constants.html" title="Constants" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Intro</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.system.system-procwatch.intro-and-features.html" title="Introduction and Features">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.system.system-procwatch.constants.html" title="Constants">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.system.system-procwatch.intro">
 
  <h1 class="refname">Intro</h1>
  <div class="refnamediv">Intro &ndash; Introduction to System::ProcWatch</div>

 
 
 <div class="refsection" id="package.system.system-procwatch.intro.whatis"><div class="info"><h1>What is System::ProcWatch?</h1>
</div>
  
  <p class="para">
   System::ProcWatch is a small collection of classes to ease monitoring
   of system processes based on the Unix program procps (<strong class="command">ps</strong>).
  </p>
  <p class="para">
   To use System::ProcWatch you simply have to define a ruleset on which
   based System::ProcWatch operates. A rule (or job, watch) defines what
   actions should happen if a condition evaluates to true.
  </p>
  <p class="para">
   
   To be continued...
  </p>
 </div>
 
 <div class="refsection" id="package.system.system-procwatch.intro.shellscripts"><div class="info"><h1>Shell Scripts</h1>
</div>
  
  <p class="para">
   You can use System::ProcWatch out of the box, by utilizing the shipped
   shell scripts <strong class="command">procwatch</strong> and <strong class="command">procwatch-lint</strong>.
  </p>
  
  <div class="refsection" id="package.system.system-procwatch.intro.shellscripts.procwatch"><div class="info"><h1><strong class="command">procwatch</strong></h1>
</div>
   
   <p class="para">
    The <strong class="command">procwatch</strong> command is meant to be used for system 
    diagnosis - run as daemon or by cron.
   </p>
   <p class="para">
    The usage is best described by the output of <strong class="command">procwatch -h</strong>:
    </p><div class="programlisting">
<br/>USAGE:<br/>$&nbsp;procwatch&nbsp;(-x|-i)&nbsp;&lt;file&gt;&nbsp;[-d&nbsp;[-s&nbsp;&lt;sec&gt;]]&nbsp;[-a&nbsp;&lt;args&gt;]&nbsp;[-p&nbsp;&lt;file&gt;]<br/><br/>OPTIONS:<br/>&nbsp;&nbsp;&nbsp;&nbsp;-x&nbsp;|&nbsp;--xml=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;to&nbsp;XML&nbsp;configuration&nbsp;file<br/>&nbsp;&nbsp;&nbsp;&nbsp;-i&nbsp;|&nbsp;--ini=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;to&nbsp;INI&nbsp;configuration&nbsp;file<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;-d&nbsp;|&nbsp;--daemon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run&nbsp;procwatch&nbsp;in&nbsp;daemon&nbsp;mode<br/>&nbsp;&nbsp;&nbsp;&nbsp;-s&nbsp;|&nbsp;--sleep=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seconds&nbsp;to&nbsp;sleep&nbsp;in&nbsp;daemon&nbsp;mode&nbsp;(default=1800)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;-a&nbsp;|&nbsp;--args=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arguments&nbsp;that&nbsp;should&nbsp;be&nbsp;passed&nbsp;to&nbsp;ps&nbsp;(default=aux)<br/>&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;|&nbsp;--php=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;php&nbsp;file&nbsp;that&nbsp;should&nbsp;be&nbsp;included<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;-h&nbsp;|&nbsp;--help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;help&nbsp;message<br/><br/>EXAMPLE:<br/>&nbsp;&nbsp;&nbsp;&nbsp;$&nbsp;procwatch&nbsp;-x&nbsp;/etc/procwatch.xml&nbsp;-d&nbsp;-s&nbsp;3600<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;command&nbsp;will&nbsp;run&nbsp;procwatch&nbsp;in&nbsp;daemon&nbsp;mode&nbsp;with&nbsp;an&nbsp;interval<br/>&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;an&nbsp;hour&nbsp;using&nbsp;the&nbsp;configuration&nbsp;file&nbsp;&#039;/etc/procwatch.xml&#039;
    </div>
   
  </div>

  <div class="refsection" id="package.system.system-procwatch.intro.shellscripts.procwatchlint"><div class="info"><h1><strong class="command">procwatch-lint</strong></h1>
</div>
   
   <p class="para">
    The <strong class="command">procwatch-lint</strong> is meant to validate procwatchs
    configurtation files written in XML by utilizing XML::DTD::XmlValidator.
   </p>
   <p class="para">
    Once again synopsis is best described by the output of 
    <strong class="command">procwatch-lint -h</strong>:
    </p><div class="programlisting">
<br/>USAGE:<br/>$&nbsp;procwatch-lint&nbsp;-c&nbsp;&lt;file&gt;&nbsp;[-d&nbsp;&lt;dtd&gt;]&nbsp;[-v]<br/><br/>OPTIONS:<br/>&nbsp;&nbsp;&nbsp;&nbsp;-c&nbsp;|&nbsp;--conf=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;to&nbsp;XML&nbsp;configuration&nbsp;file<br/>&nbsp;&nbsp;&nbsp;&nbsp;-d&nbsp;|&nbsp;--dtd=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;to&nbsp;DTD<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;-v&nbsp;|&nbsp;--verbose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verbose&nbsp;output&nbsp;on&nbsp;errors<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;-h&nbsp;|&nbsp;--help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;help&nbsp;message<br/><br/>EXAMPLE:<br/>&nbsp;&nbsp;&nbsp;&nbsp;procwatch-lint&nbsp;-c&nbsp;/etc/procwatch.xml<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;command&nbsp;will&nbsp;validate&nbsp;the&nbsp;configuration&nbsp;file&nbsp;&#039;/etc/procwatch.xml&#039;<br/>&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;the&nbsp;DTD&nbsp;at&nbsp;&#039;/usr/share/pear/data/System_ProcWatch/procwatch-1.0.dtd&#039;
    </div>
   
  </div>
 
 </div>
 
 <div class="refsection" id="package.system.system-procwatch.intro.configuration"><div class="info"><h1>Configuration</h1>
</div>
  
  <p class="para">
   There are three methods to configure your System::ProcWatch application:
   </p><ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">XML string/file</span>
    </li>
    <li class="listitem">
     <span class="simpara">INI file</span>
    </li>
    <li class="listitem">
     <span class="simpara">PHP array</span>
    </li>
   </ul>
  
  
  <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml"><div class="info"><h1>Xml string/file</h1>
</div>
   
   <p class="para">
    Configuring System::ProcWatch by XML is the preferred way. It is as simple
    as powerful.
   </p>
   
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.root"><div class="info"><h1>Ruleset: The Root Element</h1>
</div>
    
    <p class="para">
     The root element of an XML configuration file/string is the 
     <em class="emphasis">procwatch</em> element. It has one implicit attribute,
     the <em class="emphasis">version</em> attribute, set to &quot;1.0&quot;.
    </p>
    <p class="para">
     The <em class="emphasis">procwatch</em> element symbolizes our ruleset, 
     and the childs of the root are our rules.
    </p>
   </div>
   
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.watch"><div class="info"><h1>Rules: The Childs of the Root</h1>
</div>
    
    <p class="para">
     The direct descendants of the root element <em class="emphasis">procwatch</em>,
     are the <em class="emphasis">watch</em> elements, which can occur 1 time or 
     more often.
    </p>
    <p class="para">
     The <em class="emphasis">watch</em> element has one required attribute, the
     <em class="emphasis">name</em> attribute, which gives the watch (or job, rule)
     a descriptive name like &quot;httpd-count&quot;.
    </p>
    <p class="para">
     Each <em class="emphasis">watch</em> element symbolizes a single rule,
     containing a regular expression to search for, one or more conditions to
     evaluate and one or more actions to be taken.
    </p>
   </div>
   
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.rule"><div class="info"><h1>A Rule</h1>
</div>
    
    <p class="para">
     A rule consists of three child elements:
     </p><ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">pattern</em>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">condition</em>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">execute</em>
       </span>
      </li>
     </ul>
    
   </div>
   
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.rule.pattern"><div class="info"><h1>Rule Element: pattern</h1>
</div>
    
    <p class="para">
     The <em class="emphasis">pattern</em> element describes the perl compatible 
     regular expression which should be evaluated against a column of the 
     output of <strong class="command">ps</strong>.
    </p>
    <p class="para">
     There is one required attribute, the <em class="emphasis">match</em> attribute,
     defining the column name of the output of <strong class="command">ps</strong> in
     lowercase like &quot;command&quot; or &quot;vsz&quot;. 
    </p>
    <p class="para">
     This makes System::ProcWatch highliy versatile and should make it 
     usable with any platforms <strong class="command">procps</strong> program.
    </p>
    <p class="para">
     The <em class="emphasis">pattern</em> elements content solely consists of
     the perl compatible regular expression to match against the column
     defined in the <em class="emphasis">match</em> attribute. The PCRE MUST
     contain the start and end delimiter and MAY contain any PCRE modifiers.
    </p>
    <p class="para">
     Example: &lt;pattern&nbsp;match=&quot;command&quot;&gt;/sbin\/httpd/&lt;/pattern&gt;
    </p>
   </div>
    
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.rule.condition"><div class="info"><h1>Rule Element: condition</h1>
</div>
    
    <p class="para">
     The <em class="emphasis">condition</em> element defines conditions that
     MUST evaluate to <strong class="constant">TRUE</strong> at all so that later defined actions will
     be executed.
    </p>
    <p class="para">
     The <em class="emphasis">condition</em> element has one required and one 
     optional attribute, the required one being <em class="emphasis">type</em>,
     which MUST be one of &quot;presence&quot; or &quot;attr&quot;, and
     the optional one being <em class="emphasis">attr</em>. However, if the
     <em class="emphasis">type</em> attribute equals to &quot;attr&quot; the
     <em class="emphasis">attr</em> attribute MUST be present.
    </p>
    <p class="para">
     The <em class="emphasis">attr</em> attribute represents a column of
     <strong class="command">procps</strong>&#039; output like &quot;user&quot; or &quot;%mem&quot;.
    </p>
   </div>
    
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.condition.conditions"><div class="info"><h1>Conditions</h1>
</div>
    
    <p class="para">
     Dependent on the content of the <em class="emphasis">type</em> attribute,
     syntax and behavior of the <em class="emphasis">condition</em> element differ.
    </p>
    <p class="para">
     A <em class="emphasis">condition</em> with <em class="emphasis">type</em> 
     &quot;presence&quot; MAY be empty, thus always evaluating to true.
    </p>
    <p class="para">
     Child Elements of <em class="emphasis">condition</em> may be:
     </p><ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">min</em>
       </span>
       <span class="simpara">
        Found value MUST exceed defined value.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">max</em>
       </span>
       <span class="simpara">
        Found value MUST NOT exceed defined value.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">is</em>
       </span>
       <span class="simpara">
        Found value MUST be equal to defined value.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">isnot</em>
       </span>
       <span class="simpara">
        Found value MUST NOT be equal to defined value.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">sum</em>
       </span>
       <span class="simpara">
        The sum of found values MUST NOT exceed defined sum.
       </span>
      </li>
     </ul>
    
    <p class="para">
     You may combine them to define for instance a range from min to max.
    </p>
   </div>
   
   <div class="refsection" id="package.system.system-procwatch.intro.configuration.xml.rule.execute"><div class="info"><h1>Rule Element: execute</h1>
</div>
    
    <p class="para">
     The <em class="emphasis">execute</em> element defines actions that should be
     taken if the <em class="emphasis">condition</em> applies.
    </p>
    <p class="para">
     It has one required attribute, the <em class="emphasis">type</em> attribute,
     which MUST equal to one of &quot;shell&quot; or &quot;php&quot;.
    </p>
    <p class="para">
     Obviously the content of the <em class="emphasis">execute</em> element
     is executed either on the shell through <strong class="function">shell_exec()</strong>
     or directly in PHP through <strong class="function">eval()</strong>.
    </p>
    <p class="para">
     The <em class="emphasis">execute</em> element MAY occur any times.
    </p>
    <p class="para">
     There are some special variables that will automagically be available
     in execute statements:
     </p><ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">$msg</em>
       </span>
       <span class="simpara">
        This contains a general message, what has happened.
        It is quoted in single quotes for save usage and
        is available in shell and php executes.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">$pids</em>
       </span>
       <span class="simpara">
        This contains all PIDs of the processes that have been
        found. They are enclosed by single quotes and parenthesis.
       </span>
       <span class="simpara">
        Example: &#039;(433, 444, 455, 466)&#039;       
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <em class="emphasis">$procs</em>
       </span>
       <span class="simpara">
        This is a serialized php array in string format
        containing all information gained from ps and looks like:
        array(array(&#039;pid&#039; =&gt; 344, &#039;command&#039; =&gt; &#039;/usr/sbin/httpd&#039; ...))
       </span>
       <span class="simpara">
        It is only available in php executes and can easily be 
        used in function callbacks:
       </span>
       <span class="simpara">
         &lt;execute type=&quot;php&quot;&gt;get_procs($procs);&lt;/execute&gt;
       </span>
      </li>
     </ul>
    
   </div>
  </div>
  
  <div class="refsection"><div class="info"><h1>Example XML configuration file</h1>
</div>
   
   <div class="example" id="package.system.system-procwatch.intro.configuration.xml.example"><div class="info"><p><strong>XML configuration file</strong></p></div>
    
    <div class="programlisting"><pre class="programlisting">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;!DOCTYPE procwatch SYSTEM &quot;/usr/share/pear/data/System_ProcWatch/procwatch-1_0.dtd&quot;&gt;
&lt;procwatch&gt;
&lt;!--

    SOME EXAMPLE CONFIGURATIONS
    ===========================

    This job looks for the count of running httpd processes by
    matching the PCRE &quot;/httpd/&quot; against the COMMAND column of ps.

    If there are less than 10 or more than 30 httpd processes found
    the speicified string is executed on the shell.
--&gt;
  &lt;watch name=&quot;httpd-count&quot;&gt;
    &lt;pattern match=&quot;command&quot;&gt;/httpd/&lt;/pattern&gt;
    &lt;condition type=&quot;presence&quot;&gt;
      &lt;min&gt;10&lt;/min&gt;
      &lt;max&gt;30&lt;/max&gt;
    &lt;/condition&gt;
    &lt;execute type=&quot;shell&quot;&gt;echo $msg $pids &amp;gt;&amp;gt; /var/log/procwatch&lt;/execute&gt;
  &lt;/watch&gt;

&lt;!--
  This job looks for the amount of physical memory all httpd processes use
  together by matching the PCRE &quot;/httpd/&quot; against the COMMAND column of ps.

  It adds all %MEM columns of ps that match the pattern together and compares
  the reslut to the specified sum. If the result exceeds the sum the specified
  string is executet on the shell.
--&gt;
  &lt;watch name=&quot;httpd-usage&quot;&gt;
    &lt;pattern match=&quot;command&quot;&gt;/httpd/&lt;/pattern&gt;
    &lt;condition type=&quot;attr&quot; attr=&quot;%mem&quot;&gt;
      &lt;sum&gt;5&lt;/sum&gt;
    &lt;/condition&gt;
    &lt;execute type=&quot;shell&quot;&gt;echo $msg $pids &amp;gt;&amp;gt; /var/log/procwatch&lt;/execute&gt;
  &lt;/watch&gt;

&lt;!--
  This job looks for zombie processes.

  It matches the PCRE &quot;/Z/&quot; against the STAT column of ps and executes the
  specified string on the shell if more than 0 zombies have been found.
--&gt;
  &lt;watch name=&quot;ZOMBIES&quot;&gt;
    &lt;pattern match=&quot;stat&quot;&gt;/Z/&lt;/pattern&gt;
    &lt;condition type=&quot;presence&quot;&gt;
      &lt;max&gt;0&lt;/max&gt;
    &lt;/condition&gt;
    &lt;execute type=&quot;shell&quot;&gt;echo $msg $pids &amp;gt;&amp;gt; /var/log/procwatch&lt;/execute&gt;
  &lt;/watch&gt;

&lt;!--
  This job looks for running processes.

  It matches the PCRE pattern &quot;/R/&quot; against the STAT column of ps and executes
  the specified string on the shell if any running processes have been found.
--&gt;
  &lt;watch name=&quot;running&quot;&gt;
    &lt;pattern match=&quot;stat&quot;&gt;/R/&lt;/pattern&gt;
    &lt;condition type=&quot;presence&quot; /&gt;
    &lt;execute type=&quot;shell&quot;&gt;echo $msg $pids &amp;gt;&amp;gt; /var/log/procwatch&lt;/execute&gt;
  &lt;/watch&gt;

&lt;/procwatch&gt;</pre>
</div>
   </div>
  </div>
  
  <div class="refsection" id="package.system.system-procwatch.intro.configuration.ini"><div class="info"><h1>INI file</h1>
</div>
   
   <p class="para">
    Configuring by INI file is effectively the same except that only
    <em class="emphasis">execute</em>s of <em class="emphasis">type</em> &quot;shell&quot;
    can be defined.
   </p>
  </div>
  <div class="refsection"><div class="info"><h1>Example INI configuration file</h1>
</div>
   
   <div class="example" id="package.system.system-procwatch.intro.configuration.ini.example"><div class="info"><p><strong>INI configuration file</strong></p></div>
    
    <div class="programlisting">
<br/>;<br/>;&nbsp;Example&nbsp;INI&nbsp;file&nbsp;to&nbsp;configure&nbsp;System::ProcWatch<br/>;<br/>;&nbsp;Be&nbsp;aware&nbsp;that&nbsp;you&nbsp;only&nbsp;can&nbsp;define&nbsp;shell&nbsp;executes!<br/>;&nbsp;For&nbsp;better&nbsp;configurability&nbsp;use&nbsp;XML&nbsp;configuration&nbsp;files.<br/>;<br/>[httpd]<br/>pattern=/httpd/<br/>match=command<br/>condition=presence<br/>min=10<br/>max=50<br/>execute=&quot;echo&nbsp;$msg&nbsp;&gt;&gt;&nbsp;/var/log/procwatch&quot;<br/><br/>[zombies]<br/>pattern=/Z/<br/>match=stat<br/>condition=presence<br/>max=0<br/>execute=&quot;kill&nbsp;-9&nbsp;`echo&nbsp;$pids&nbsp;|&nbsp;sed&nbsp;s/[,\(\)]//g`&quot;<br/><br/>[mysqld-mem]<br/>pattern=/mysqld/<br/>match=command<br/>condition=attr<br/>attr=%mem<br/>sum=10<br/>execute=&quot;echo&nbsp;$msg&nbsp;&gt;&gt;&nbsp;/var/log/procwatch&quot;   
    </div>
   </div>
  </div>
  
  <div class="refsection" id="package.system.system-procwatch.intro.configuration.array"><div class="info"><h1>PHP array</h1>
</div>
   
   <p class="para">
    A valid array to configure System::ProcWatch may look similar 
    to the following example.
   </p>
  </div>
  <div class="refsection"><div class="info"><h1>Example PHP configuration array</h1>
</div>
   
   <div class="example" id="package.system.system-procwatch.intro.configuration.array.example"><div class="info"><p><strong>PHP configuration array</strong></p></div>
    
    <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$watches&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /><br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">][</span><span style="color: #DD0000">'pattern'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">][</span><span style="color: #DD0000">'condition'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">][</span><span style="color: #DD0000">'execute'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br /><br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">][</span><span style="color: #DD0000">'pattern'</span><span style="color: #007700">][</span><span style="color: #DD0000">'command'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/httpd/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">][</span><span style="color: #DD0000">'condition'</span><span style="color: #007700">][</span><span style="color: #DD0000">'presence'</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'min'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'max'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job1'</span><span style="color: #007700">][</span><span style="color: #DD0000">'execute'</span><span style="color: #007700">][</span><span style="color: #DD0000">'shell'</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'/usr/bin/mail2admin&nbsp;$msg'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$watches</span><span style="color: #007700">[</span><span style="color: #DD0000">'job2'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br /></span><span style="color: #FF8000">//&nbsp;...<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
  
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.system.system-procwatch.intro-and-features.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.system.system-procwatch.intro-and-features.html">Introduction and Features</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.system.system-procwatch.constants.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Introduction and Features</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Constants</td>
  </tr>
 </table>
</div>
</body></html>
