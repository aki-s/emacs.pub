<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Introduction and Guide</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.networking.net-smtp.html" title="Net_SMTP" />
  <link rel="prev" href="package.networking.net-smtp.net-smtp-summary.html" title="Class Summary Net_SMTP" />
  <link rel="next" href="package.networking.net-smtp.net-smtp.net-smtp.html" title="constructor Net_SMTP::Net_SMTP" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Introduction and Guide</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.networking.net-smtp.net-smtp-summary.html" title="Class Summary Net_SMTP">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.networking.net-smtp.net-smtp.net-smtp.html" title="constructor Net_SMTP::Net_SMTP">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.networking.net-smtp.intro">
   
    <h1 class="refname">Introduction and Guide</h1>
    <div class="refnamediv">Introduction and Guide &ndash; 
     Provides an implementation of the SMTP protocol
    </div>

   

   <div class="refsection"><div class="info"><h1>Net_SMTP Introduction and Guide</h1>
</div>
    
    <p class="para">
     The <strong class="classname">Net_SMTP</strong> package supports the SMTP
     authentication standard (as defined by RFC-2554).
     <strong class="classname">Net_SMTP</strong> supports several authentication
     methods like  DIGEST-MD5, CRAM-MD5, LOGIN and PLAIN.
    </p>
   </div>

   <div class="refsection"><div class="info"><h1>Dependencies</h1>
</div>
    

    <div class="refsection"><div class="info"><h1>The PEAR_Error Class</h1>
</div>
     
     <p class="para">
      The Net_SMTP package uses the
      <a href="core.pear.pear-error.html" class="link"><strong class="classname">PEAR_Error</strong></a>
      class for all of its error handling.
     </p>
    </div>

    <div class="refsection"><div class="info"><h1>The Net_Socket Package</h1>
</div>
     
     <p class="para">
      The
      <a href="http://pear.php.net/package/Net_Socket" class="link external"><strong class="classname">Net_Socket</strong></a>
      package is used as the basis for all network communications.
     </p>
    </div>

    <div class="refsection"><div class="info"><h1>The Auth_SASL Package</h1>
</div>
     
     <p class="para">
      The
      <a href="http://pear.php.net/package/Auth_SASL" class="link external"><strong class="classname">Auth_SASL</strong></a>
      package is an optional dependency.
      If it is available, the <strong class="classname">Net_SMTP</strong> package will be
      able to support the DIGEST-MD5 and CRAM-MD5 SMTP authentication methods.
      Otherwise, only the LOGIN and PLAIN methods will be available.
     </p>
    </div>

   </div>


   <div class="refsection" id="package.networking.net-smtp.intro.errorhandling">
    <div class="info"><h1>Error Handling</h1>
</div>

    <p class="para">
     All of the <strong class="classname">Net_SMTP</strong> class&#039;s public methods return a
     <a href="core.pear.pear-error.html" class="link"><strong class="classname">PEAR_Error</strong></a>
     object if an error occurs.
     The standard way to check for a <strong class="classname">PEAR_Error</strong> object is
     by using
     <a href="core.pear.pear.iserror.html" class="link">PEAR::isError()</a>
    </p>
   </div>


   <div class="refsection"><div class="info"><h1>SMTP Authentication</h1>
</div>
    
    <p class="para">
     The Net_SMTP package supports the SMTP authentication standard
     (as defined by <a href="http://www.faqs.org/rfcs/rfc2554" class="link external">RFC-2554</a>).
     The Net_SMTP package supports the following authentication methods,
     in order of preference:
    </p>


    <div class="refsection"><div class="info"><h1>DIGEST-MD5</h1>
</div>
     
     <p class="para">
      The DIGEST-MD5 authentication method uses RSA Data Security Inc.&#039;s
      MD5 Message Digest algorithm.
      It is considered the most secure method of SMTP authentication.
     </p>

     <blockquote class="note">
      <p class="para">
       The DIGEST-MD5 authentication method is only supported if the
       AUTH_SASL package is available.
      </p>
     </blockquote>

    </div>


    <div class="refsection"><div class="info"><h1>CRAM-MD5</h1>
</div>
     
     <p class="para">
      The CRAM-MD5 authentication method has been superseded by the
      DIGEST-MD5 method in terms of security.
      It is provided here for compatibility with older SMTP servers that
      may not support the newer DIGEST-MD5 algorithm.
     </p>

     <blockquote class="note">
      <p class="para">
       The CRAM-MD5 authentication method is only supported if the
       AUTH_SASL package is available.
      </p>
     </blockquote>

    </div>


    <div class="refsection"><div class="info"><h1>LOGIN</h1>
</div>
     
     <p class="para">
      The LOGIN authentication method encrypts the user&#039;s password using
      the Base64 encoding scheme.
      Because decrypting a Base64-encoded string is trivial,
      LOGIN is not considered a secure authentication method
      and should be avoided.
     </p>
    </div>


    <div class="refsection"><div class="info"><h1>PLAIN</h1>
</div>
     
     <p class="para">
      The PLAIN authentication method sends the user&#039;s password in plain text.
      This method of authentication is not secure and should be avoided.
     </p>
    </div>

   </div>


   <div class="refsection"><div class="info"><h1>Secure Connections</h1>
</div>
    

    <p class="para">
     If <a href="http://www.php.net/transports" class="link external">secure socket transports</a>
     have been enabled in PHP, it is possible to establish
     a secure connection to the remote SMTP server:
    </p>

    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$smtp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Net_SMTP</span><span style="color: #007700">(</span><span style="color: #DD0000">'ssl://mail.example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">465</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

    <p class="para">
     This example connects to mail.example.com on port 465
     (a common SMTPS port) using the ssl:// transport.
    </p>
   </div>


   <div class="refsection"><div class="info"><h1>Data Quoting</h1>
</div>
    

    <p class="para">
     By default, all outbound string data is quoted in accordance with
     SMTP standards. This means that all native Unix (\n) and Mac (\r)
     line endings are converted to Internet-standard CRLF (\r\n) line endings.
     Also, because the SMTP protocol uses a single leading period (.)
     to signal an end to the message data, single leading periods
     in the original data string are &quot;doubled&quot; (e.g. &quot;..&quot;).
    </p>
    <p class="para">
     These string transformation can be expensive when large blocks of data
     are involved.
     For example, the Net_SMTP package is not aware of MIME parts
     (it just sees the MIME message as one big string of characters),
     so it is not able to skip non-text attachments when searching for
     characters that may need to be quoted.
    </p>
    <p class="para">
     Because of this, it is possible to extend the Net_SMTP class
     in order to implement your own custom quoting routine.
     Just create a new class based on the Net_SMTP class
     and reimplement the quotedata() method:
    </p>

    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">'Net/SMTP.php'</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">Net_SMTP_custom&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Net_SMTP<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">quotedata</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Perform&nbsp;custom&nbsp;data&nbsp;quoting&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

    <p class="para">
     Note that the $data parameter will be passed to the quotedata()
     function by reference.
     This means that you can operate directly on $data.
     It also the overhead of copying a large $data string to and
     from the quotedata() method.
    </p>
   </div>


   <div class="refsection" id="package.networking.net-smtp.intro.debugging">
    <div class="info"><h1>Debugging</h1>
</div>
    

    <p class="para">
     The Net_SMTP package contains built-in debugging output routines
     (disabled by default).
     Debugging output must be explicitly enabled via the setDebug() method:
    </p>

    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$smtp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setDebug</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

    <p class="para">
     The debugging messages will be sent to the standard output stream.
    </p>
   </div>


   <div class="refsection"><div class="info"><h1>Examples</h1>
</div>
    

    <p class="para">
     The following script demonstrates how a simple email message can be
     sent using the Net_SMTP package:
    </p>

    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">'Net/SMTP.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$host&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mail.example.com'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$from&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'user@example.com'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$rcpt&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'recipient1@example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'recipient2@example.com'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$subj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Subject:&nbsp;Test&nbsp;Message\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$body&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Body&nbsp;Line&nbsp;1\nBody&nbsp;Line&nbsp;2"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;Create&nbsp;a&nbsp;new&nbsp;Net_SMTP&nbsp;object.&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(!&nbsp;(</span><span style="color: #0000BB">$smtp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Net_SMTP</span><span style="color: #007700">(</span><span style="color: #0000BB">$host</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Unable&nbsp;to&nbsp;instantiate&nbsp;Net_SMTP&nbsp;object\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Connect&nbsp;to&nbsp;the&nbsp;SMTP&nbsp;server.&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$e&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$smtp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect</span><span style="color: #007700">()))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Send&nbsp;the&nbsp;'MAIL&nbsp;FROM:'&nbsp;SMTP&nbsp;command.&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$smtp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mailFrom</span><span style="color: #007700">(</span><span style="color: #0000BB">$from</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Unable&nbsp;to&nbsp;set&nbsp;sender&nbsp;to&nbsp;&lt;</span><span style="color: #0000BB">$from</span><span style="color: #DD0000">&gt;\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Address&nbsp;the&nbsp;message&nbsp;to&nbsp;each&nbsp;of&nbsp;the&nbsp;recipients.&nbsp;*/<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$rcpt&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$to</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$smtp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rcptTo</span><span style="color: #007700">(</span><span style="color: #0000BB">$to</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Unable&nbsp;to&nbsp;add&nbsp;recipient&nbsp;&lt;</span><span style="color: #0000BB">$to</span><span style="color: #DD0000">&gt;:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Set&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;message.&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$smtp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data</span><span style="color: #007700">(</span><span style="color: #0000BB">$subj&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\r\n"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">"Unable&nbsp;to&nbsp;send&nbsp;data\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;Disconnect&nbsp;from&nbsp;the&nbsp;SMTP&nbsp;server.&nbsp;*/<br /></span><span style="color: #0000BB">$smtp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">disconnect</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

   </div>
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.networking.net-smtp.net-smtp-summary.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.networking.net-smtp.html">Net_SMTP</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.networking.net-smtp.net-smtp.net-smtp.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Class Summary Net_SMTP</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">constructor Net_SMTP::Net_SMTP</td>
  </tr>
 </table>
</div>
</body></html>
