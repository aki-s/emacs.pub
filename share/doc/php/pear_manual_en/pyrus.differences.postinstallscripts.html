<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Pyrus Post-install scripts: differences from PEAR</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="pyrus.differences.html" title="Differences from the PEAR Installer" />
  <link rel="prev" href="pyrus.differences.frompear.html" title="Pyrus: Improvements from the PEAR Installer" />
  <link rel="next" href="pyrus.differences.customcommands.html" title="Pyrus Custom Commands: differences from PEAR" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Pyrus Post-install scripts: differences from PEAR</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="pyrus.differences.frompear.html" title="Pyrus: Improvements from the PEAR Installer">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="pyrus.differences.customcommands.html" title="Pyrus Custom Commands: differences from PEAR">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="section" id="pyrus.differences.postinstallscripts">
 <div class="info"><h1>Pyrus Post-install scripts: differences from PEAR</h1>
</div>

 <div class="section" id="pyrus.differences.postinstallscripts.overview">
  <div class="info"><h2 class="title">Overview</h2></div>
  <p class="para">
   Post-install scripts (documented
   <a href="guide.developers.package2.tasks.html#guide.developers.package2.tasks.postinstallscript" class="link">here</a>
   and <a href="guide.migrating.postinstall.html" class="link">here</a>)
   are mostly the same in Pyrus with a few important differences.
  </p>
  <p class="para">
   The XML format in package.xml is identical, so no change need be made to
   the <code class="literal">&lt;paramgroup&gt;</code> or other tags.  The script itself
   should still follow the naming conventions of PEAR.  The only real difference
   is the naming of methods within the script.
  </p>
  <p class="para">
   PEAR requires that all post-install scripts implement <strong class="function">init()</strong>,
   <strong class="function">run()</strong> and optionally <strong class="function">postProcessPrompts()</strong>.
   Pyrus requires post-install scripts to implement <strong class="function">init2()</strong>,
   <strong class="function">run2()</strong>, and optionally <strong class="function">postProcessPrompts2()</strong>.
   This allows PEAR and Pyrus-based post-install scripts to co-exist in the
   same package without difficulty.  Note that post-install scripts must be
   <code class="literal">E_STRICT</code> and <code class="literal">E_DEPRECATED</code> compliant,
   otherwise many PHP warnings will be emitted.  One way of handling this issue
   is to put PHP4 non-E_STRICT-compatible code into a separate file and include it
   dynamically at run-time.  The same should be done for any PHP5+ non-PHP4
   compatible code if the post-install script is expected to be able to run in PHP 4.
  </p>
 </div>

 <div class="section" id="pyrus.differences.postinstallscripts.init2">
  <div class="info"><h2 class="title">The init2 method</h2></div>
  <p class="para">
   The <strong class="function">init2()</strong> method should accept two parameters like so:
   </p><div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">init2</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkg</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lastversion</span><span style="color: #007700">)<br />{<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
   <p><code class="literal">$pkg</code> is an object representing the package, and
   <code class="literal">$lastversion</code> is the last installed version of the
   package.
  </p>
 </div>

 <div class="section" id="pyrus.differences.postinstallscripts.run2post2">
  <div class="info"><h2 class="title">The run2 and postProcessPrompts2 methods</h2></div>
  <p class="para">
   These two methods should accept identical parameters to what the PEAR
   equivalent accepted.  The only reason these are called is to allow
   easy differentiation between what kind of installer is calling the post-install
   script.
  </p>
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="pyrus.differences.frompear.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="pyrus.differences.html">Differences from the PEAR Installer</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="pyrus.differences.customcommands.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Pyrus: Improvements from the PEAR Installer</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Pyrus Custom Commands: differences from PEAR</td>
  </tr>
 </table>
</div>
</body></html>
