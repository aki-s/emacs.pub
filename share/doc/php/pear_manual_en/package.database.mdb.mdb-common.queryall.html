<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>MDB_Common::queryAll()</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.database.mdb.html" title="MDB" />
  <link rel="prev" href="package.database.mdb.mdb-common.query.html" title="MDB_Common::query()" />
  <link rel="next" href="package.database.mdb.mdb-common.querycol.html" title="MDB_Common::queryCol()" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">MDB_Common::queryAll()</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.database.mdb.mdb-common.query.html" title="MDB_Common::query()">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.database.mdb.mdb-common.querycol.html" title="MDB_Common::queryCol()">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.database.mdb.mdb-common.queryall">
 
  <h1 class="refname">MDB_Common::queryAll()</h1>
  <div class="refnamediv">MDB_Common::queryAll() &ndash; fetch result set as a nested array</div>

 
 <h2 class="refsynopsisdiv">Synopsis</h2>
  <div class="funcsynopsis">
   <div class="programlisting">
      require_once &#039;MDB.php&#039;;
   </div>
   <p><code class="funcprototype">
    array <strong class="function">&amp;queryAll</strong>
     ( 
    
      string $query
    
     , 
      array $types
      <span class="initializer"> = null</span>
    
     , integer
      $fetchmode
      <span class="initializer"> = MDB_FETCHMODE_DEFAULT</span>
    
     , boolean
      $rekey
      <span class="initializer"> = false</span>
    
     , boolean
      $force_array
      <span class="initializer"> = false</span>
    
     , boolean
      $group
      <span class="initializer"> = false</span>
    
   )</code></p>
  </div>
 
 <div class="refsection" id="package.database.mdb.mdb-common.queryall.desc">
    <h1 class="title">Description</h1>
   <p class="para">
      Fetch the entire result set of a query and return it into a nested array. The function takes
     care of doing the query and freeing the results when finished.
   </p>
 </div>
 <div class="refsection" id="package.database.mdb.mdb-common.queryall.parameter">
    <h1 class="title">Parameter</h1>
    <p class="para">
   </p><div class="variablelist">
    <dl class="varlistentry">
     <dt class="term">
        <span class="type">string</span>
        <em><code class="parameter">$query</code></em>
     </dt>
     <dd class="listitem">
      <p class="para">
         the SQL query
        </p>
     </dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term">
        <span class="type">array</span>
        <em><code class="parameter">$types</code></em>
     </dt>
     <dd class="listitem">
      <p class="para">
         if supplied, the types of the columns in the result set will be set for fetching
        </p>
     </dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term">
        <span class="type">integer</span>
        <em><code class="parameter">$fetchmode</code></em>
     </dt>
     <dd class="listitem">
      <p class="para">
         the fetch mode to use
        </p>
     </dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term">
        <span class="type">boolean</span>
        <em><code class="parameter">$rekey</code></em>
     </dt>
     <dd class="listitem">
      <p class="para">
        if set to <strong class="constant">TRUE</strong> the array result be modified as follows:
        If the result set contains more than two columns, the value
        will be an array of the values from column 2 to n. If the result
        set contains only two columns, the returned value will be a
        scalar with the value of the second column (unless forced to an
        array with the $force_array parameter).
        </p>
     </dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term">
        <span class="type">boolean</span>
        <em><code class="parameter">$force_array</code></em>
     </dt>
     <dd class="listitem">
      <p class="para">
         used only if the query returns
         exactly two columns.
         If <strong class="constant">TRUE</strong>, the values of the returned array
         will be one-element arrays instead of scalars.
        </p>
     </dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term">
        <span class="type">boolean</span>
        <em><code class="parameter">boolean $group</code></em>
     </dt>
     <dd class="listitem">
      <p class="para">
         if <strong class="constant">TRUE</strong>, the values of
         the returned array is wrapped in another array.
         If the same key value (in the first column)
         repeats itself, the values
         will be appended to this array instead
         of overwriting the
         existing values.
        </p>
     </dd>
    </dl>
   </div>
  
 </div>
 <div class="refsection" id="package.database.mdb.mdb-common.queryall.return">
    <h1 class="title">Return value</h1>
    <p class="para">
   <em><code class="parameter">array</code></em> - an nested array or a
       <a href="package.database.mdb.mdb-error.html" class="link"><strong class="classname">MDB_Error</strong></a>, if fail.
    </p>
 </div>
 <div class="refsection" id="package.database.mdb.mdb-common.queryall.throws">
    <h1 class="title">Throws</h1>
    <p class="para">
   </p><table class="doctable table"><caption>Possible PEAR_Error values</caption>

    
     <thead>
      <tr>
       <th>Error code</th>
       <th>Error message</th>
       <th>Reason</th>
       <th>Solution</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>
        <strong class="constant">MDB_ERROR_NO_DB_SELECTED</strong>
       </td>
       <td>
        <strong class="constant">NULL</strong>
       </td>
       <td>
          No database was chosen.
         </td>
       <td>
          Check the <a href="package.database.mdb.intro-dsn.html" class="link">DSN</a>
          in <a href="package.database.mdb.mdb.connect.html" class="link">
         <strong class="function">connect()</strong>
        </a>.
         </td>
      </tr>

      <tr>
       <td>
        <strong class="constant">MDB_ERROR_TRUNCATED</strong>
       </td>
       <td>
        <strong class="constant">NULL</strong>
       </td>
       <td>
          The result set contains fewer then two columns
         </td>
       <td>
          Check the SQL query or choose another
          <strong class="function">query*()</strong> function
         </td>
      </tr>

      <tr>
       <td>every other error code</td>
       <td class="empty">&nbsp;</td>
       <td>
          Database specific error
         </td>
       <td>
          Check the database related section of
          <a href="http://www.php.net/manual/" class="link external">PHP-Manual</a>
          to detect the reason for this error. In the most cases
          a misformed SQL statement. Ie. using LIMIT in a SQL-Statement
          for an Oracle database.
         </td>
      </tr>

     </tbody>
    
   </table>

  
 </div>
 <div class="refsection" id="package.database.mdb.mdb-common.queryall.note">
    <h1 class="title">Note</h1>
    <p class="simpara">This function can not be called
statically.</p>
   </div>
 <div class="refsection" id="package.database.mdb.mdb-common.queryall.see">
    <h1 class="title">See</h1>
    <p class="para">
   <a href="package.database.mdb.mdb-common.query.html" class="link">
    <strong class="function">query()</strong>
   </a>,
     <a href="package.database.mdb.mdb-common.limitquery.html" class="link">
    <strong class="function">limitQuery()</strong>
   </a>,
     <a href="package.database.mdb.mdb-common.prepareQuery.html" class="link">
    <strong class="function">prepareQuery()</strong>
   </a>,
     <a href="package.database.mdb.mdb-common.executeQuery.html" class="link">
    <strong class="function">executeQuery()</strong>
   </a>
     ,<a href="package.database.mdb.mdb-common.queryrow.html" class="link">
    <strong class="function">queryRow()</strong>
   </a>
     ,<a href="package.database.mdb.mdb-common.queryone.html" class="link">
    <strong class="function">queryOne()</strong>
   </a>
     ,<a href="package.database.mdb.mdb-common.querycol.html" class="link">
    <strong class="function">queryCol()</strong>
   </a>
  </p>
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.database.mdb.mdb-common.query.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.database.mdb.html">MDB</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.database.mdb.mdb-common.querycol.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">MDB_Common::query()</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">MDB_Common::queryCol()</td>
  </tr>
 </table>
</div>
</body></html>
