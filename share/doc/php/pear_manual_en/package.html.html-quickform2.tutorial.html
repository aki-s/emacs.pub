<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>QuickForm2 Tutorial</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.html.html-quickform2.introduction.html" title="Introduction" />
  <link rel="prev" href="package.html.html-quickform2.introduction.html" title="Introduction" />
  <link rel="next" href="package.html.html-quickform2.qf-migration.html" title="Migration from HTML_QuickForm" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">QuickForm2 Tutorial</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.html.html-quickform2.introduction.html" title="Introduction">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.html.html-quickform2.qf-migration.html" title="Migration from HTML_QuickForm">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.html.html-quickform2.tutorial">
 
  <h1 class="refname">QuickForm2 Tutorial</h1>
  <div class="refnamediv">QuickForm2 Tutorial &ndash; Description of basic package features</div>

 

 <div class="refsection" id="package.html.html-quickform2.tutorial.example">
  <div class="info">
   <h1>Your first QuickForm2-based form</h1>

  </div>
  <div class="example">
   <div class="info">
    <p><strong>Builds and processes a form with a single input field</strong></p>
   </div>
   <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Load&nbsp;the&nbsp;main&nbsp;class<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'HTML/QuickForm2.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Instantiate&nbsp;the&nbsp;HTML_QuickForm2&nbsp;object<br /></span><span style="color: #0000BB">$form&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">HTML_QuickForm2</span><span style="color: #007700">(</span><span style="color: #DD0000">'tutorial'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Set&nbsp;defaults&nbsp;for&nbsp;the&nbsp;form&nbsp;elements<br /></span><span style="color: #0000BB">$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addDataSource</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">HTML_QuickForm2_DataSource_Array</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Joe&nbsp;User'<br /></span><span style="color: #007700">)));<br /><br /></span><span style="color: #FF8000">//&nbsp;Add&nbsp;some&nbsp;elements&nbsp;to&nbsp;the&nbsp;form<br /></span><span style="color: #0000BB">$fieldset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'fieldset'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">setLabel</span><span style="color: #007700">(</span><span style="color: #DD0000">'QuickForm2&nbsp;tutorial&nbsp;example'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$fieldset</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'text'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">50</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'maxlength'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setLabel</span><span style="color: #007700">(</span><span style="color: #DD0000">'Enter&nbsp;your&nbsp;name:'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fieldset</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'submit'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'value'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Send!'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Define&nbsp;filters&nbsp;and&nbsp;validation&nbsp;rules<br /></span><span style="color: #0000BB">$name</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFilter</span><span style="color: #007700">(</span><span style="color: #DD0000">'trim'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$name</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addRule</span><span style="color: #007700">(</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Please&nbsp;enter&nbsp;your&nbsp;name'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Try&nbsp;to&nbsp;validate&nbsp;a&nbsp;form<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;h1&gt;Hello,&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">())&nbsp;.&nbsp;</span><span style="color: #DD0000">'!&lt;/h1&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Output&nbsp;the&nbsp;form<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$form</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  </div>
  <p class="para">
    Lets review the above example step by step.
  </p>


  <div class="refsection" id="package.html.html-quickform2.tutorial.example.building">
   <div class="info">
    <h1>Building the form</h1>

   </div>
   <p class="para">
    The line
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$form&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">HTML_QuickForm2</span><span style="color: #007700">(</span><span style="color: #DD0000">'tutorial'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    creates an instance of <a href="package.html.html-quickform2.elements.form.html" class="link"><strong class="classname">HTML_QuickForm2</strong></a>
    that will contain <a href="package.html.html-quickform2.elements.html" class="link">objects representing
     form elements</a> and other necessary information. We only pass the form&#039;s id to the <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2.html#method__construct" class="apidoclink">constructor</a>, which means that default
    values will be used for other parameters. In particular, the form&#039;s method will default to
    <code class="literal">POST</code> and the form&#039;s action to the current file. When using QuickForm2, it is
    easier to keep all the form related logic in one file.
   </p>
   <p class="para">
    Next we add a <a href="package.html.html-quickform2.values-datasources.html#package.html.html-quickform2.values-datasources.datasources-overview" class="link">DataSource</a>
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addDataSource</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">HTML_QuickForm2_DataSource_Array</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Joe&nbsp;User'<br /></span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    containing the default value <code class="literal">&#039;Joe User&#039;</code> for <code class="literal">name</code> element.
    DataSources are objects that provide elements&#039; incoming values, they are searched in the order
    they were added to the form. When constructor of <strong class="classname">HTML_QuickForm2</strong>
    considers the form submitted, it will automatically add a DataSource with submit values, so
    search will not reach the DataSource added above. However, when submit DataSource is not there,
    default value will be taken from the above DataSource.
   </p>
   <p class="para">
    To improve the presentation, we are adding a fieldset element to the form first:
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fieldset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'fieldset'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">setLabel</span><span style="color: #007700">(</span><span style="color: #DD0000">'QuickForm2&nbsp;tutorial&nbsp;example'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    and set its label (it will be output as <code class="literal">&lt;legend&gt;</code>, actually).
   </p>
   <p class="para">
    We then add a text input box and a submit button to the fieldset:
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$fieldset</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'text'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'size'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">50</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'maxlength'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setLabel</span><span style="color: #007700">(</span><span style="color: #DD0000">'Enter&nbsp;your&nbsp;name:'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fieldset</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'submit'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'value'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Send!'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    Note that most of the setter methods are returning <em><code class="parameter">$this</code></em>, so it is
    possible to chain method calls. Note also that we can arbitrarily nest fieldsets and other
    containers (you can&#039;t nest another <strong class="classname">HTML_QuickForm2</strong> instance, however).
   </p>
  </div>

  
  <div class="refsection" id="package.html.html-quickform2.tutorial.example.checking">
   <div class="info">
    <h1>Checking input</h1>

   </div>
   <p class="para">
    The line
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$name</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFilter</span><span style="color: #007700">(</span><span style="color: #DD0000">'trim'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    adds a filter for the element&#039;s value - the function that will be applied to it when
    <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Node.html#methodgetValue" class="apidoclink">getValue()</a> is called.
    In this case it is a builtin <a href="http://www.php.net/manual-lookup.php?pattern=trim" class="link external"><strong class="function">trim()</strong></a> function,
    but can be any valid <a href="http://www.php.net/manual/language.pseudo-types.php" class="link external"><span class="type">callback</span></a>. Thus we will strip 
    all leading and trailing whitespace from the name, as we do not need it and as we want to be
    sure that a name was entered, not just some spaces.
   </p>
   <p class="para">
    Next we define a rule for the field:
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$name</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addRule</span><span style="color: #007700">(</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Please&nbsp;enter&nbsp;your&nbsp;name'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    This means that QuickForm2 will display an error message if the name was not entered. Note also
    that QuickForm2 will automatically mark required fields in the form.
   </p>
  </div>


  <div class="refsection" id="package.html.html-quickform2.tutorial.example.processing">
   <div class="info">
    <h1>Validating and processing</h1>

   </div>
   <p class="para">
    We now have the form built and rules defined and need to decide whether to process it or display:
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Do&nbsp;some&nbsp;stuff<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
    <p><a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2.html#methodvalidate" class="apidoclink">HTML_QuickForm2::validate()</a> method
    will consider the form valid (i.e. return <strong class="constant">TRUE</strong>) if some data was actually submitted and all
    <a href="package.html.html-quickform2.rules.html" class="link">the rules defined for the form were
    satisfied</a>. In our case this means that <code class="literal">&#039;name&#039;</code> element was not left
    empty.
   </p>
   <p class="para">
    If the form is validated we need to process <a href="package.html.html-quickform2.values-datasources.html#package.html.html-quickform2.values-datasources.values-overview" class="link">the values</a>
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;h1&gt;Hello,&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">())&nbsp;.&nbsp;</span><span style="color: #DD0000">'!&lt;/h1&gt;'</span><span style="color: #007700">;<br />exit;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    This is an example, in your scripts you&#039;ll usually want to store the values somewhere and to
    redirect to some other page to prevent a duplicate submit.
   </p>
   <p class="para">
    The last line is pretty easy:
    </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$form</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div><p>
    If the form is not valid, which means that it either was not yet submitted or that there were errors, it
    will be displayed. Error messages (if any) will be displayed near the corresponding elements.
   </p>
  </div>
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.html.html-quickform2.introduction.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.html.html-quickform2.introduction.html">Introduction</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.html.html-quickform2.qf-migration.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Introduction</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Migration from HTML_QuickForm</td>
  </tr>
 </table>
</div>
</body></html>
