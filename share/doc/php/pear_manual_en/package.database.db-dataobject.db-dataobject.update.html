<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>-&gt;update()</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.database.db-dataobject.html" title="DB_DataObject" />
  <link rel="prev" href="package.database.db-dataobject.db-dataobject.insert.html" title="-&gt;insert()" />
  <link rel="next" href="package.database.db-dataobject.db-dataobject.delete.html" title="-&gt;delete()" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">-&gt;update()</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.database.db-dataobject.db-dataobject.insert.html" title="-&gt;insert()">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.database.db-dataobject.db-dataobject.delete.html" title="-&gt;delete()">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.database.db-dataobject.db-dataobject.update">
   
    <h1 class="refname">-&gt;update()</h1>
    <div class="refnamediv">-&gt;update() &ndash; Update objects variables into database</div>

   
   <h2 class="refsynopsisdiv">Synopsis</h2>
    <div class="funcsynopsis">
     
     <p><code class="funcprototype">
      int <strong class="function">$DB_DataObject-&gt;update</strong> ( 
      
         
       dataobject|boolean  $original|$useWhere
      
       
                  
     )</code></p>
    </div>
   
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.update.desc">
    <h1 class="title">Description</h1>
    <p class="para">
     Updates current objects variables into the database. if you supply it with a dataObject, as an 
     argument, it will only update the differences between the new and old.
    </p>

    <p class="para">
       if  called with DB_DATAOBJECT_WHEREADD_ONLY as the argument, the update
        request is built based on the whereAdd values, rather than the primary
        key. This enables global updates to be performed, rather than single
        row ones.
     </p>
   </div>   
  
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.update.parameter">
    <h1 class="title">Parameter</h1>
    <p class="para">
     </p><ul class="itemizedlist">
      
      <li class="listitem">
       <p class="para">
        <em><code class="parameter">DataObject $original</code></em> -
        if provided the update query will be built from the difference between the current and 
        original dataobject.
       </p>
      </li>      
            
     </ul>
    
   </div>   
      
         
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.update.return">
    <h1 class="title">Return value</h1>
    <p class="para">
     <em><code class="parameter">int </code></em> number of rows affected or <strong class="constant">FALSE</strong> on failure 
    </p>
   </div>      
            
            
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.update.throws">
    <h1 class="title">Throws</h1>
    <p class="para">
     </p><table class="doctable table"><caption>Possible PEAR_Error values</caption>
            
         
       <thead>
        <tr>
         <th>Error code</th>
         <th>Error message</th>        
         <th>Meaning</th>        
         <th>Solution</th>        
        </tr>

       </thead>

       <tbody class="tbody">
                 
        <tr>
         <td>DB_DATAOBJECT_ERROR_INVALIDCONFIG</td>
         <td>"<span class="quote">update:No table definition for $table</span>"</td>
         <td class="empty">&nbsp;</td>
         <td class="empty">&nbsp;</td>
        </tr>
       
                 
        <tr>
         <td>DB_DATAOBJECT_ERROR_NODATA</td>
         <td>"<span class="quote">update: No Data specifed for query $settings</span>"</td>
         <td class="empty">&nbsp;</td>
         <td class="empty">&nbsp;</td>
        </tr>
       
                                        
       </tbody>
      
     </table>

    
   </div>         
               
                
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.update.note">
    <h1 class="title">Note</h1>  
                 
    <p class="simpara">This function can not be called
statically.</p>
    
                         
                             
  <p class="simpara"></p>
   </div>    
                   
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.update.example">
    <h1 class="title">Example</h1>
    <div class="example"><div class="info"><p><strong>Simple fetch and update</strong></p></div>
     
      <div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$person&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DataObjects_Person</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">12</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">=</span><span style="color: #DD0000">'fred'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /><br /></span><span style="color: #0000BB">$person&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DataObjects_Person</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">12</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$original&nbsp;</span><span style="color: #007700">=&nbsp;clone(</span><span style="color: #0000BB">$person</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;clone&nbsp;is&nbsp;emulated&nbsp;in&nbsp;php4&nbsp;for&nbsp;compatibility&nbsp;reasons.&nbsp;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">=</span><span style="color: #DD0000">'fred'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$original</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>    
     </div>
    </div>
    <div class="example"><div class="info"><p><strong>Resulting SQL</strong></p></div>
     
     <div class="programlisting">
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>SELECT&nbsp;*&nbsp;FROM&nbsp;person&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;12<br/>UPDATE&nbsp;person&nbsp;SET&nbsp;name=&#039;fred&#039;,&nbsp;age=&#039;21&#039;,&nbsp;eyes=&#039;blue&#039;&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;12<br/><br/>SELECT&nbsp;*&nbsp;FROM&nbsp;person&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;12<br/>UPDATE&nbsp;person&nbsp;SET&nbsp;name=&#039;fred&#039;&nbsp;&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;12    
     </div>
    </div>    
    <div class="example"><div class="info"><p><strong>Simple fetch and update</strong></p></div>
     
      <div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$person&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DataObjects_Person</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">removed</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">whereAdd</span><span style="color: #007700">(</span><span style="color: #DD0000">'age&nbsp;&gt;&nbsp;21'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>    
     </div>
    </div>
    <div class="example"><div class="info"><p><strong>Resulting SQL</strong></p></div>
     
     <div class="programlisting">
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>SELECT&nbsp;*&nbsp;FROM&nbsp;person&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;12;<br/>UPDATE&nbsp;person&nbsp;SET&nbsp;removed=1&nbsp;WHERE&nbsp;age&nbsp;&gt;&nbsp;21    
     </div>
    </div>        
   </div>         
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.database.db-dataobject.db-dataobject.insert.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.database.db-dataobject.html">DB_DataObject</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.database.db-dataobject.db-dataobject.delete.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">-&gt;insert()</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">-&gt;delete()</td>
  </tr>
 </table>
</div>
</body></html>
