<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Structures_DataGrid_DataSource_DBTable</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.structures.structures-datagrid.structures-datagrid-datasource.html" title="DataSource drivers" />
  <link rel="prev" href="package.structures.structures-datagrid.structures-datagrid-datasource.dbquery.html" title="Structures_DataGrid_DataSource_DBQuery" />
  <link rel="next" href="package.structures.structures-datagrid.structures-datagrid-datasource.excel.html" title="Structures_DataGrid_DataSource_Excel" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Structures_DataGrid_DataSource_DBTable</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.structures.structures-datagrid.structures-datagrid-datasource.dbquery.html" title="Structures_DataGrid_DataSource_DBQuery">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.structures.structures-datagrid.structures-datagrid-datasource.excel.html" title="Structures_DataGrid_DataSource_Excel">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.structures.structures-datagrid.structures-datagrid-datasource.dbtable">
 
  <h1 class="refname">Structures_DataGrid_DataSource_DBTable</h1>
  <div class="refnamediv">Structures_DataGrid_DataSource_DBTable &ndash; PEAR::DB_Table Data Source Driver</div>

 
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-datasource.dbtable.desc"><div class="info"><h1>Description</h1>
</div>
  
  <p class="para">
   This class is a data source driver for the PEAR::DB_Table object
  </p>
 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-datasource.dbtable.modes"><div class="info"><h1>Supported operations modes</h1>
</div>
  
  <p class="para">
   This driver supports the following operation modes:
  </p>
  <table class="doctable table"><caption>Supported operations modes of this driver</caption>
   
   
    <thead>
     <tr>
      <th>Mode</th>
      <th>Supported?</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>Multiple field sorting</td>
      <td>yes</td>
     </tr>

     <tr>
      <td>Insert, update and delete records</td>
      <td>yes</td>
     </tr>

    </tbody>
   
  </table>

 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-datasource.dbtable.options"><div class="info"><h1>Options</h1>
</div>
  
  <p class="para">
   This driver accepts the following options:
  </p>
  <table class="doctable table"><caption>Options for this driver</caption>
   
   
    <thead>
     <tr>
      <th>Option</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default Value</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>fields</td>
      <td>array</td>
      <td>Which data fields to fetch from the datasource. An empty array
       means: all fields. Form: array(field1, field2, ...)</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>generate_columns</td>
      <td>bool</td>
      <td>Generate Structures_DataGrid_Column objects with labels. See the
       &#039;labels&#039; option. DEPRECATED: use Structures_DataGrid::generateColumns()
       instead</td>
      <td>false</td>
     </tr>

     <tr>
      <td>labels</td>
      <td>array</td>
      <td>Data field to column label mapping. Only used when
       &#039;generate_columns&#039; is true. Form: array(field =&gt; label, ...)
       DEPRECATED: use Structures_DataGrid::generateColumns() instead</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>params</td>
      <td>array</td>
      <td>Placeholder parameters for prepare/execute</td>
      <td>array()</td>
     </tr>

     <tr>
      <td>primaryKey</td>
      <td>array</td>
      <td>Name(s), or numerical index(es) of the field(s) which contain a
       unique record identifier (only use several fields in case of a
       multiple-fields primary key)</td>
      <td>null</td>
     </tr>

     <tr>
      <td>view</td>
      <td>string</td>
      <td>The view from $sql array in your DB_Table object. This option is
       required.</td>
      <td>null</td>
     </tr>

     <tr>
      <td>where</td>
      <td>string</td>
      <td>A where clause for the SQL query.</td>
      <td>null</td>
     </tr>

    </tbody>
   
  </table>

 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-datasource.dbtable.notes"><div class="info"><h1>General notes</h1>
</div>
  
  <p class="para">
   If you use aliases in the select part of your view, the count() method from
   DB_Table and, therefore, $datagrid-&gt;getRecordCount() might return a wrong
   result. To avoid this, DB_Table uses a special query for counting if it is
   given via a view that needs to be named as &#039;__count_&#039; followed by the name
   of the view that this counting view belongs to. (For example: if you have a
   view named &#039;all&#039;, the counting view needs to be named as &#039;__count_all&#039;.)
  </p>
  <p class="para">   
   To use update() and delete() methods, it is required that the indexes are
   properly defined in the $idx array in your DB_Table subclass. If you have,
   for example, created your database table yourself and did not setup the $idx
   array, you can use the &#039;primaryKey&#039; option to define the primary key field.
  </p>
  <p class="para">
  </p>
 </div>
 <div class="refsection" id="package.structures.structures-datagrid.structures-datagrid-datasource.dbtable.examples"><div class="info"><h1>Examples</h1>
</div>
  
  <div class="example"><div class="info"><p><strong>Bind a DB_Table class to Structures_DataGrid</strong></p></div>
   
   <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;basic&nbsp;guestbook&nbsp;class&nbsp;that&nbsp;extends&nbsp;DB_Table<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">GuestBook_Table&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">DB_Table<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$col&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;unique&nbsp;row&nbsp;ID<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'type'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'integer'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'require'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;first&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fname'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'type'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'varchar'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">32<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;last&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'lname'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'type'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'varchar'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">64<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;email&nbsp;address<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'email'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'type'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'varchar'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">128</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'require'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;date&nbsp;signed<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'signdate'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'type'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'date'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'require'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$idx&nbsp;</span><span style="color: #007700">=&nbsp;array();&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;indices&nbsp;don't&nbsp;matter&nbsp;here<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">var&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;multiple&nbsp;rows&nbsp;for&nbsp;a&nbsp;list&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'list'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'select'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'id,&nbsp;signdate,&nbsp;CONCAT(fname,&nbsp;"&nbsp;",&nbsp;lname)&nbsp;AS&nbsp;fullname'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'order'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'signdate&nbsp;DESC'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;instantiate&nbsp;the&nbsp;extended&nbsp;DB_Table&nbsp;class<br />//&nbsp;(using&nbsp;an&nbsp;existing&nbsp;database&nbsp;connection&nbsp;and&nbsp;the&nbsp;table&nbsp;name&nbsp;'guestbook')<br /></span><span style="color: #0000BB">$guestbook&nbsp;</span><span style="color: #007700">=&amp;&nbsp;new&nbsp;</span><span style="color: #0000BB">GuestBook_Table</span><span style="color: #007700">(</span><span style="color: #0000BB">$db</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'guestbook'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Options&nbsp;for&nbsp;the&nbsp;bind()&nbsp;call<br />//&nbsp;(using&nbsp;the&nbsp;predefined&nbsp;query&nbsp;'list'&nbsp;from&nbsp;the&nbsp;$sql&nbsp;array&nbsp;and&nbsp;a&nbsp;where<br />//&nbsp;condition)<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'view'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'list'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'where'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'YEAR(signdate)&nbsp;=&nbsp;2100'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;bind&nbsp;the&nbsp;guestbook&nbsp;object<br />//&nbsp;(if&nbsp;you&nbsp;don't&nbsp;generate&nbsp;any&nbsp;column&nbsp;yourself&nbsp;before&nbsp;rendering,&nbsp;three<br />//&nbsp;columns&nbsp;will&nbsp;be&nbsp;generated:&nbsp;id,&nbsp;signdate,&nbsp;fullname)<br /></span><span style="color: #0000BB">$test&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$datagrid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bind</span><span style="color: #007700">(</span><span style="color: #0000BB">$guestbook</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;print&nbsp;binding&nbsp;error&nbsp;if&nbsp;any<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();&nbsp;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  </div>
 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.structures.structures-datagrid.structures-datagrid-datasource.dbquery.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.structures.structures-datagrid.structures-datagrid-datasource.html">DataSource drivers</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.structures.structures-datagrid.structures-datagrid-datasource.excel.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Structures_DataGrid_DataSource_DBQuery</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Structures_DataGrid_DataSource_Excel</td>
  </tr>
 </table>
</div>
</body></html>
