<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>PEAR::setErrorHandling()</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="core.pear.pear.html" title="PEAR base and error handling class" />
  <link rel="prev" href="core.pear.pear.raiseerror.html" title="PEAR::raiseError()" />
  <link rel="next" href="core.pear.pear.expecterror.html" title="PEAR::expectError()" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">PEAR::setErrorHandling()</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="core.pear.pear.raiseerror.html" title="PEAR::raiseError()">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="core.pear.pear.expecterror.html" title="PEAR::expectError()">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="core.pear.pear.seterrorhandling">
   
    <h1 class="refname">PEAR::setErrorHandling()</h1>
    <div class="refnamediv">PEAR::setErrorHandling() &ndash; sets handling of errors generated through PEAR packages</div>

   
   <h2 class="refsynopsisdiv">Synopsis</h2>
    <div class="funcsynopsis">
     <div class="programlisting">
      require_once &#039;PEAR.php&#039;;
     </div>
     <p><code class="funcprototype">
      void <strong class="function">PEAR::setErrorHandling</strong> ( 
      
       integer $mode
       <span class="initializer"> = null</span>
      
       , 
       mixed $options
       <span class="initializer"> = null</span>
            
     )</code></p>
    </div>
   
   <div class="refsection" id="core.pear.pear.seterrorhandling.desc">
    <h1 class="title">Description</h1>
    <p class="para">
     <strong class="function">setErrorHandling()</strong> can be invoked as both a standard
     object method ($obj-&gt;setErrorHandling) and as a static method
     (PEAR::setErrorHandling).  If called
     statically, <strong class="function">PEAR::setErrorHandling()</strong> sets the default
     error handling behaviour for all
     PEAR objects (global error handling behaviour). If called as an object method,
     <strong class="function">$obj-&gt;setErrorHandling()</strong> sets
     the default error handling for only that object (local error handling behaviour).
    </p>
   </div>   
   <div class="refsection" id="core.pear.pear.seterrorhandling.parameter">
    <h1 class="title">Parameter</h1>
    <p class="para">
     </p><ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <em><code class="parameter">integer $mode</code></em> - one of the following constants
        </p><ul class="itemizedlist">
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_RETURN</strong> If an error occurs, a 
           <a href="core.pear.pear-error.html" class="link"><strong class="classname">PEAR_Error</strong></a> is returned from the error-generation
           method (normally <a href="core.pear.pear.raiseerror.html" class="link"><strong class="function">raiseError()</strong></a>.)
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_PRINT</strong> Like <strong class="constant">
           PEAR_ERROR_RETURN</strong>, but an error message will be 
           printed additionally.
          </p>
         </li>         
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_TRIGGER</strong> Like <strong class="constant">
           PEAR_ERROR_RETURN</strong>, but the PHP builtin-function
           <strong class="function">trigger_error()</strong> will be called in PEAR_Error&#039;s
           constructor with the error message.
          </p>
         </li>         
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_DIE</strong> The script will terminate and
           an error message will be printed on instantiation of a PEAR_Error.
          </p>
         </li>         
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_CALLBACK</strong> If a error occurs, the
           callback passed to <em><code class="parameter">$options</code></em> is called.
          </p>
         </li>                  
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_EXCEPTION</strong> If Zend Engine 2 is present,
           then an exception will be thrown using the <a href="core.pear.pear-error.html" class="link"><strong class="classname">PEAR_Error</strong></a> object.
          </p>
         </li>         
        </ul>         
       
      </li>
      <li class="listitem">
       <p class="para">
        <em><code class="parameter">mixed $options</code></em> - the value for <em><code class="parameter">$options</code></em>
        depends on <em><code class="parameter">$mode</code></em>
        </p><ul class="itemizedlist">
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_PRINT</strong> and 
           <strong class="constant">PEAR_ERROR_DIE</strong> support
           an optional <strong class="function">printf()</strong> format string used 
           when printing the error message.  This format string should contain
           a single %s, which will be used to insert the error message into the
           string.  Use the string to enclose the error message with other
           useful information not included in the error message prefix or
           error message.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_TRIGGER</strong> requires an user error 
           level constant used by <strong class="function">trigger_error()</strong> (possible constants: <strong class="constant">E_USER_NOTICE</strong>, 
           <strong class="constant">E_USER_WARNING</strong> or 
           <strong class="constant">E_USER_ERROR</strong>).  Note that if the error constant
           is not one of these valid error constants, a PHP warning will be
           triggered.
          </p>
         </li>
         <li class="listitem">
          <p class="para">
           <strong class="constant">PEAR_ERROR_CALLBACK</strong> The callback must be a function
           name in the format described in the <a href="http://www.php.net/manual/language.pseudo-types.php" class="link external">Pseudo-Type</a>
           section of the PHP manual (either a string, or an array). The callback must accept a single
           parameter, the <a href="core.pear.pear-error.html" class="link"><strong class="classname">PEAR_Error</strong></a> object generated by an error condition.
           Note that if the callback is not a valid callback, a PHP warning will
           be triggered.
          </p>
         </li>                  
        </ul>         
       
      </li>      
     </ul>
    
    <p class="para">
     Here&#039;s an example of a few ways to use setErrorHandling:
     </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'PEAR.php'</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;dummy&nbsp;error&nbsp;constant&nbsp;for&nbsp;this&nbsp;example<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'MYCLASS_ERROR_CODE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;demonstration&nbsp;of&nbsp;default&nbsp;global&nbsp;error&nbsp;handling<br />//&nbsp;in&nbsp;this&nbsp;case,&nbsp;all&nbsp;PEAR&nbsp;Errors&nbsp;will&nbsp;trigger&nbsp;a&nbsp;PHP&nbsp;warning<br /></span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">setErrorHandling</span><span style="color: #007700">(</span><span style="color: #0000BB">PEAR_ERROR_TRIGGER</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">E_USER_WARNING</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;file&nbsp;and&nbsp;line&nbsp;number&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;constructor&nbsp;of&nbsp;PEAR_Error<br />//&nbsp;in&nbsp;PEAR.php<br /></span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'test&nbsp;warning'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;this&nbsp;error&nbsp;specifies&nbsp;a&nbsp;mode,&nbsp;and&nbsp;overrides&nbsp;the&nbsp;default&nbsp;global&nbsp;error&nbsp;handling<br /></span><span style="color: #0000BB">$e&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'return&nbsp;only'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PEAR_ERROR_RETURN</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">setErrorHandling</span><span style="color: #007700">(</span><span style="color: #0000BB">PEAR_ERROR_PRINT</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Gronk&nbsp;error:&nbsp;%s&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;prints&nbsp;"Gronk&nbsp;error:&nbsp;test&nbsp;warning&lt;br&nbsp;/&gt;\n"<br /></span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'test&nbsp;warning'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;Fake&nbsp;class&nbsp;to&nbsp;demonstrate&nbsp;error&nbsp;handling<br />&nbsp;*&nbsp;@package&nbsp;myClass<br />&nbsp;*/<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">myClass&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">PEAR&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Demonstration&nbsp;of&nbsp;default&nbsp;local&nbsp;error&nbsp;handling<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">myClass</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;object&nbsp;method&nbsp;callback<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setErrorHandling</span><span style="color: #007700">(</span><span style="color: #0000BB">PEAR_ERROR_CALLBACK</span><span style="color: #007700">,&nbsp;array(&amp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'handleErr'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;prints&nbsp;"custom&nbsp;handler...is&nbsp;working"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'custom&nbsp;handler'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;static&nbsp;class&nbsp;method&nbsp;callback<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setErrorHandling</span><span style="color: #007700">(</span><span style="color: #0000BB">PEAR_ERROR_CALLBACK</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'myClass'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'handleErrStatic'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'custom&nbsp;handler'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;function&nbsp;callback<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setErrorHandling</span><span style="color: #007700">(</span><span style="color: #0000BB">PEAR_ERROR_CALLBACK</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'standardCallback'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'custom&nbsp;handler'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Callback&nbsp;set&nbsp;by&nbsp;the&nbsp;constructor<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;PEAR_Error&nbsp;The&nbsp;error&nbsp;object<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">handleErr</span><span style="color: #007700">(</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">lastError&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"...is&nbsp;working\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Static&nbsp;callback&nbsp;set&nbsp;by&nbsp;the&nbsp;constructor<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Note&nbsp;that&nbsp;in&nbsp;PHP&nbsp;5,&nbsp;$this&nbsp;is&nbsp;not&nbsp;set&nbsp;if&nbsp;the&nbsp;method&nbsp;is&nbsp;declared&nbsp;with<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;"static"&nbsp;access&nbsp;modifier.&nbsp;&nbsp;In&nbsp;PHP&nbsp;4,&nbsp;$this&nbsp;is&nbsp;set,&nbsp;but&nbsp;is&nbsp;not<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;set&nbsp;to&nbsp;the&nbsp;myClass&nbsp;object,&nbsp;so&nbsp;don't&nbsp;use&nbsp;it!<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;PEAR_Error&nbsp;The&nbsp;error&nbsp;object<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@static<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">handleErrStatic</span><span style="color: #007700">(</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'static&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"...is&nbsp;working\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;@param&nbsp;PEAR_Error&nbsp;The&nbsp;error&nbsp;object<br />&nbsp;*/<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">standardCallback</span><span style="color: #007700">(</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">'normal&nbsp;function&nbsp;callback:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />}<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;causes&nbsp;the&nbsp;printing&nbsp;of&nbsp;three&nbsp;messages&nbsp;through&nbsp;error&nbsp;callbacks:<br />//&nbsp;"custom&nbsp;handler...is&nbsp;working"<br />//&nbsp;"static&nbsp;custom&nbsp;handler...&nbsp;is&nbsp;working"<br />//&nbsp;"normal&nbsp;function&nbsp;callback:&nbsp;custom&nbsp;handler"<br /></span><span style="color: #0000BB">$mine&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">myClass</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">setErrorHandling</span><span style="color: #007700">(</span><span style="color: #0000BB">PEAR_ERROR_DIE</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;terminates&nbsp;the&nbsp;script&nbsp;with&nbsp;the&nbsp;error&nbsp;message&nbsp;"oops"<br /></span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">raiseError</span><span style="color: #007700">(</span><span style="color: #DD0000">'oops'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYCLASS_ERROR_CODE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    
   </div>   
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="core.pear.pear.raiseerror.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="core.pear.pear.html">PEAR base and error handling class</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="core.pear.pear.expecterror.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">PEAR::raiseError()</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">PEAR::expectError()</td>
  </tr>
 </table>
</div>
</body></html>
