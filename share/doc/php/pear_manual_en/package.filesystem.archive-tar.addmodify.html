<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Archive_Tar::addModify()</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.filesystem.archive-tar.html" title="Archive-Tar" />
  <link rel="prev" href="package.filesystem.archive-tar.add.html" title="Archive_Tar::add()" />
  <link rel="next" href="package.filesystem.archive-tar.create.html" title="Archive_Tar::create()" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Archive_Tar::addModify()</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.filesystem.archive-tar.add.html" title="Archive_Tar::add()">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.filesystem.archive-tar.create.html" title="Archive_Tar::create()">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.filesystem.archive-tar.addmodify">
   
    <h1 class="refname">Archive_Tar::addModify()</h1>
    <div class="refnamediv">Archive_Tar::addModify() &ndash; add files or directories</div>

   
   <h2 class="refsynopsisdiv">Synopsis</h2>
    <div class="funcsynopsis">
     <div class="programlisting">
      require_once &#039;Archive/Tar.php&#039;;
     </div>     
    <p><code class="funcprototype">
     boolean <strong class="function">addModify</strong> ( 
     mixed $filelist
      , string
      $add_dir
      , string
      $remove_dir = &#039;&#039;
    )</code></p>
    </div>
   
   <div class="refsection" id="package.filesystem.archive-tar.addmodify.desc">
    <h1 class="title">Description</h1>
    <p class="para">
     This methods add files and directories listed in <em><code class="parameter">
     filelist</code></em> at the end of the existing archive.
    </p>
    <p class="para">
     If the archive does not exists it attempts to create it.
     If a file or directory is already in the archive it will only be added
     at the end of the archive. There is no update of the existing archived
     file or directory. However while extracting the archive, the last file will
     replace the first one. This results in a none optimization of the
     archive size. If a file or directory does not exists, it is ignored.
    </p>
   </div>   
   <div class="refsection" id="package.filesystem.archive-tar.addmodify.parameter">
    <h1 class="title">Parameter</h1>
    <p class="para">
     </p><ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <em><code class="parameter">mixed $filelist</code></em> - 
        an array of filenames and directory
        names, or a single string with names separated by a single blank space.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <em><code class="parameter">string $add_dir</code></em> - 
        a string which contains a path to be
        added to the memorized path of each element in the list.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <em><code class="parameter">string $remove_dir</code></em> - 
        a string which contains a path to be
        removed from the memorized path of each element in the list, when
        relevant. 
       </p>
       <p class="para">
        The path indicated in <em><code class="parameter">add_dir</code></em> will be added
        at the beginning of the memorized path of each file/directory 
        listed. However it can be set to empty &#039;&#039;. The adding of a 
        path is done after the removing of path. The path 
        add/remove ability enables the user to prepare an archive
        for extraction in a different path than the original path.
       </p>        
     </li>
    </ul>
    
   </div>      
   <div class="refsection" id="package.filesystem.archive-tar.addmodify.return">
    <h1 class="title">Return value</h1>
    <p class="para">
     <em><code class="parameter">boolean</code></em> - Returns <strong class="constant">TRUE</strong> on success, <strong class="constant">FALSE</strong> on failure.
    </p>
   </div>         
   <div class="refsection" id="package.filesystem.archive-tar.addmodify.throws">
    <h1 class="title">Throws</h1>
    <p class="para">
     </p><table class="doctable table"><caption>Possible PEAR_Error values</caption>
            
      
       <thead>
        <tr>
         <th>Error code</th>
         <th>Error message</th>        
         <th>Reason</th>        
         <th>Solution</th>        
        </tr>

       </thead>

       <tbody class="tbody">
        <tr>
         <td><strong class="constant">NULL</strong></td>
         <td>"<span class="quote">Invalid file list</span>"</td>
         <td>The argument for the function is not
          correctly formatted or build.
         </td>
         <td>
          Check for typing mistakes in the argument
         </td>
        </tr>
       
        <tr>
         <td><strong class="constant">NULL</strong></td>
         <td>
          "<span class="quote">Unable to open in write mode <em><code class="parameter">file name</code></em></span>"
         </td>
         <td>
          The file permissions for an existing file do not allow
          writing or the file is locked.
         </td>
         <td>
          Check permissions and possible competive programs using
          the file.
         </td>
        </tr>
               
        <tr>
         <td><strong class="constant">NULL</strong></td>
         <td>
          "<span class="quote">Invalid file list</span>"
         </td>
         <td>
          Archive is empty or corrupted
         </td>
         <td>          
         </td>
        </tr>
                       
        <tr>
         <td><strong class="constant">NULL</strong></td>
         <td>
          "<span class="quote">File <em><code class="parameter">filename</code></em> does not exist</span>"
         </td>
         <td>
          A file you want to add to the archive does not exist.
         </td>
         <td>          
          Check for typing mistakes in the function argument.
         </td>
        </tr>
                              
        <tr>
         <td><strong class="constant">NULL</strong></td>
         <td>
          "<span class="quote">Directory <em><code class="parameter">dirname</code></em> can not be read</span>"
         </td>
         <td>
          A directory or a file in it you want to add to the archive 
          does not exists or the permissions for reading the
          directory does not allow access.
         </td>
         <td>          
          Check for typing mistakes in the function argument and permissions.
         </td>
        </tr>

        <tr>
         <td><strong class="constant">NULL</strong></td>
         <td>
          "<span class="quote">Unable to open file <em><code class="parameter">filename</code></em>in binary read mode</span>"
         </td>
         <td>
          The file to add to the archive could not be read.
         </td>
         <td>          
          Check for typing mistakes in the function argument and file 
          permissions.
         </td>
        </tr>
                
       </tbody>
      
     </table>

    
   </div>            
   <div class="refsection" id="package.filesystem.archive-tar.addmodify.note">
    <h1 class="title">Note</h1>
    <p class="simpara">This function can not be called
statically.</p>
   </div>            
   <div class="refsection" id="package.filesystem.archive-tar.addmodify.example">
    <h1 class="title">Example</h1>
    <div class="example"><div class="info"><p><strong>Add files to a compressed archive in a new directory</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$tar_object&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Archive_Tar</span><span style="color: #007700">(</span><span style="color: #DD0000">"tarname.tar"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]=</span><span style="color: #DD0000">"dev/file.txt"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]=</span><span style="color: #DD0000">"dev/data/"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]=</span><span style="color: #DD0000">"log/file.log"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tar_object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addModify</span><span style="color: #007700">(</span><span style="color: #0000BB">$v_list</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"install"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;files&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;archive&nbsp;as&nbsp;:<br />//&nbsp;&nbsp;&nbsp;install/file.txt<br />//&nbsp;&nbsp;&nbsp;install/data<br />//&nbsp;&nbsp;&nbsp;install/data/file1.txt<br />//&nbsp;&nbsp;&nbsp;install/data/...&nbsp;all&nbsp;the&nbsp;files&nbsp;and&nbsp;sub-dirs&nbsp;of&nbsp;data/<br />//&nbsp;&nbsp;&nbsp;install/file.log<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
    <div class="example"><div class="info"><p><strong>
      Add files to a compressed archive moving to a new directory
     </strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$tar_object&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Archive_Tar</span><span style="color: #007700">(</span><span style="color: #DD0000">"tarname.tar"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]=</span><span style="color: #DD0000">"dev/file.txt"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]=</span><span style="color: #DD0000">"dev/data/"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]=</span><span style="color: #DD0000">"log/file.log"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tar_object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addModify</span><span style="color: #007700">(</span><span style="color: #0000BB">$v_list</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"install"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"dev"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;files&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;archive&nbsp;as&nbsp;:<br />//&nbsp;&nbsp;&nbsp;install/file.txt<br />//&nbsp;&nbsp;&nbsp;install/data<br />//&nbsp;&nbsp;&nbsp;install/data/file1.txt<br />//&nbsp;&nbsp;&nbsp;install/data/...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;the&nbsp;files&nbsp;and&nbsp;sub-dirs&nbsp;of&nbsp;data/<br />//&nbsp;&nbsp;&nbsp;install/log/file.log<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>      
    <div class="example"><div class="info"><p><strong>
      Add files to a compressed archive moving to a new directory
      (especially for Windows)
     </strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$tar_object&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Archive_Tar</span><span style="color: #007700">(</span><span style="color: #DD0000">"tarname.tar"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]=</span><span style="color: #DD0000">"d:\\dev\\file.txt"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]=</span><span style="color: #DD0000">"d:\\dev\\data\\"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$v_list</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]=</span><span style="color: #DD0000">"d:\\log\\file.log"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tar_object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addModify</span><span style="color: #007700">(</span><span style="color: #0000BB">$v_list</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"install/temp"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"d:\\dev"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;files&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;archive&nbsp;as&nbsp;:<br />//&nbsp;&nbsp;&nbsp;install/temp/file.txt<br />//&nbsp;&nbsp;&nbsp;install/temp/data<br />//&nbsp;&nbsp;&nbsp;install/temp/data/file1.txt<br />//&nbsp;&nbsp;&nbsp;install/temp/data/...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;the&nbsp;files&nbsp;and&nbsp;sub-dirs&nbsp;of&nbsp;data/<br />//&nbsp;&nbsp;&nbsp;install/temp/log/file.log<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>      
   <p class="para">
    On Windows system, Windows path format can be used. 
    However if the files are using a Windows path, 
    the <em><code class="parameter">$remove_dir</code></em> parameter must also be
    in Windows path format.
    The <em><code class="parameter">$add_dir</code></em> parameter can be in 
    Windows or Unix path format.
   </p>
    
   </div>               
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.filesystem.archive-tar.add.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.filesystem.archive-tar.html">Archive-Tar</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.filesystem.archive-tar.create.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Archive_Tar::add()</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Archive_Tar::create()</td>
  </tr>
 </table>
</div>
</body></html>
