<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Results</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.database.mdb2.html" title="MDB2" />
  <link rel="prev" href="package.database.mdb2.datatypes.html" title="Datatypes" />
  <link rel="next" href="package.database.mdb2.intro-execute.html" title="Prepare &amp; Execute" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Results</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.database.mdb2.datatypes.html" title="Datatypes">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.database.mdb2.intro-execute.html" title="Prepare &amp; Execute">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.database.mdb2.intro-fetch">
 
  <h1 class="refname">Results</h1>
  <div class="refnamediv">Results &ndash; Obtaining data from query results</div>

 

 <div class="refsection" id="package.database.mdb2.intro-fetch.desc">
  <h1 class="title">Description</h1>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.fetch"><div class="info"><h1>Fetching Individual Rows From Query Results</h1>
</div>
   
   <p class="para">
    The <strong class="classname">MDB2_Result_Common</strong> object provides two
    methods for fetching data from rows of a result set:
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodfetchOne" class="link external">
     <strong class="function">fetchOne()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodfetchRow" class="link external">
     <strong class="function">fetchRow()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodfetchCol" class="link external">
     <strong class="function">fetchCol()</strong></a> and
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodfetchAll" class="link external">
     <strong class="function">fetchAll()</strong></a>.
   </p>
   <p class="para">
    <strong class="function">fetchRow()</strong> and <strong class="function">fetchOne()</strong> read an
    entire row or a single field from a column respectively. The result pointer
    gets moved to the next row each time these methods are called. <strong class="constant">NULL</strong> is
    returned when the end of the result set is reached.
   </p>
   <p class="para">
    <strong class="function">fetchAll()</strong> and <strong class="function">fetchCol()</strong> read all
    rows in the result set and therefore move the result pointer to the end.
    While <strong class="function">fetchAll()</strong> reads the entire row data,
    <strong class="function">fetchCol()</strong> only reads a single column.
   </p>
   <p class="para">
    <strong class="classname">MDB2_Error</strong> is returned if an error is encountered.
   </p>

   <div class="example"><div class="info"><p><strong>Fetching a result set</strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Create&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2<br />//&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;your&nbsp;program...<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'MDB2.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$mdb2&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">MDB2</span><span style="color: #007700">::</span><span style="color: #0000BB">connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'pgsql://usr:pw@localhost/dbnam'</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Proceed&nbsp;with&nbsp;getting&nbsp;some&nbsp;data...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;mytable'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Get&nbsp;each&nbsp;row&nbsp;of&nbsp;data&nbsp;on&nbsp;each&nbsp;iteration&nbsp;until<br />//&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;rows<br /></span><span style="color: #007700">while&nbsp;((</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">()))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Assuming&nbsp;MDB2's&nbsp;default&nbsp;fetchmode&nbsp;is&nbsp;MDB2_FETCHMODE_ORDERED<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;while&nbsp;(($one&nbsp;=&nbsp;$res-&gt;fetchOne()))&nbsp;{<br />//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;$one&nbsp;.&nbsp;"\n";<br />//&nbsp;}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.format"><div class="info"><h1>Formats of Fetched Rows</h1>
</div>
   
   <p class="para">
    The data from the row of a query result can be
    placed into one of three constructs:
    an ordered array (with column numbers as keys),
    an associative array (with column names as keys) or
    an object (with column names as properties).
   </p>

   <p class="para">
    <strong class="constant">MDB2_FETCHMODE_ORDERED</strong> (default)
    </p><pre class="screen">
     <br/>Array<br/>(<br/>&nbsp;&nbsp;&nbsp;&nbsp;[0]&nbsp;=&gt;&nbsp;28<br/>&nbsp;&nbsp;&nbsp;&nbsp;[1]&nbsp;=&gt;&nbsp;hi<br/>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </pre>

   

   <p class="para">
    <strong class="constant">MDB2_FETCHMODE_ASSOC</strong>
    </p><pre class="screen">
     <br/>Array<br/>(<br/>&nbsp;&nbsp;&nbsp;&nbsp;[a]&nbsp;=&gt;&nbsp;28<br/>&nbsp;&nbsp;&nbsp;&nbsp;[b]&nbsp;=&gt;&nbsp;hi<br/>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </pre>

   

   <p class="para">
    <strong class="constant">MDB2_FETCHMODE_OBJECT</strong>
    </p><pre class="screen">
     <br/>stdClass&nbsp;Object<br/>(<br/>&nbsp;&nbsp;&nbsp;&nbsp;[a]&nbsp;=&gt;&nbsp;28<br/>&nbsp;&nbsp;&nbsp;&nbsp;[b]&nbsp;=&gt;&nbsp;hi<br/>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </pre>

   
   <p class="para">
    NOTE: When a query contains the same column name more
    than once (such as when joining tables which have
    duplicate column names) and the fetch mode is
    <strong class="constant">MDB2_FETCHMODE_ASSOC</strong> or
    <strong class="constant">MDB2_FETCHMODE_OBJECT</strong>,
    the data from the last column with a given name will
    be the one returned. There are two immediate options
    to work around this issue:
    </p><ul class="simplelist">
     <li class="member">
      Use aliases in your query, for example
      <strong class="userinput"><code>People.Name AS PersonName</code></strong>
     </li>
     <li class="member">
      Change the fetch mode to <strong class="constant">MDB2_FETCHMODE_ORDERED</strong>
     </li>
    </ul>
   
   <p class="para">
    TIP: If you are running into this issue, it likely
    indicates poor planning of the database schema. Either
    data is needlessly being duplicated or the same names are
    being used for different kinds of data.
   </p>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.set"><div class="info"><h1>How to Set Formats</h1>
</div>
   
   <p class="para">
    You can set the fetch mode each time you call a
    fetch method and/or you can set the default fetch
    mode for the whole MDB2 instance by using the
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodsetFetchMode" class="link external">
     <strong class="function">setFetchMode()</strong></a> method.

    </p><div class="example"><div class="info"><p><strong>Determining fetch mode per call</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;users'</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">(</span><span style="color: #0000BB">MDB2_FETCHMODE_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
    <div class="example"><div class="info"><p><strong>Changing default fetch mode</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFetchMode</span><span style="color: #007700">(</span><span style="color: #0000BB">MDB2_FETCHMODE_ASSOC</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;users'</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
   
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.number"><div class="info"><h1>Fetch Rows by Number</h1>
</div>
   
   <p class="para">
    The PEAR MDB2 fetch system also supports an extra parameter
    to the fetch statement. So you can fetch rows from a result
    by number. This is especially helpful if you only want to show
    sets of an entire result (for example in building paginated
    HTML lists), fetch rows in an special order, etc.
    </p><div class="example"><div class="info"><p><strong>Fetching by number</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2_Result&nbsp;object&nbsp;named&nbsp;$res...<br /><br />//&nbsp;the&nbsp;row&nbsp;to&nbsp;start&nbsp;fetching<br /></span><span style="color: #0000BB">$from&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;how&nbsp;many&nbsp;results&nbsp;per&nbsp;page<br /></span><span style="color: #0000BB">$resPage&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;the&nbsp;last&nbsp;row&nbsp;to&nbsp;fetch&nbsp;for&nbsp;this&nbsp;page<br /></span><span style="color: #0000BB">$to&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$from&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$resPage</span><span style="color: #007700">;<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">$from</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$to</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$rowNum</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">(</span><span style="color: #0000BB">MDB2_FETCHMODE_ORDERED</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rowNum</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
   
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.rows"><div class="info"><h1>Getting Entire Result Sets</h1>
</div>
   
   <p class="para">
    The <strong class="classname">MDB2_Result_Common</strong> object provides several
    methods to read entire results sets:
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Result_Common.html#methodfetchCol" class="link external">
     <strong class="function">fetchCol()</strong></a> and
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Result_Common.html#methodfetchAll" class="link external">
     <strong class="function">fetchAll()</strong></a>.
   </p>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.free"><div class="info"><h1>Freeing Result Sets</h1>
</div>
   
   <p class="para">
    Once you finish using a result set, if your script
    continues for a while, it&#039;s a good idea to save
    memory by freeing the result set via
    Use <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Result_Common.html#methodfree" class="link external">
     <strong class="function">free()</strong></a>.
    </p><div class="example"><div class="info"><p><strong>Freeing</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;name,&nbsp;address&nbsp;FROM&nbsp;clients'</span><span style="color: #007700">);<br />while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">(</span><span style="color: #0000BB">MDB2_FETCHMODE_ASSOC</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">',&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'address'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">free</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
   
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.getResource"><div class="info"><h1>Getting the native result resource</h1>
</div>
   
   <p class="para">
    If whatever data you need to read from a result set is not yet implemented
    in MDB2 you can get the native result resource using the
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Result_Common.html#methodgetResource" class="link external">
     <strong class="function">getResource()</strong></a> method and then call the
    underlying PHP extension directly (though this would of course require that
    it is now up to you to make this sufficiently portable).
    </p><div class="example"><div class="info"><p><strong>Native result resource</strong></p></div>
     
     <div class="phpcode">
      <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;name,&nbsp;address&nbsp;FROM&nbsp;clients'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$native_result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getResource</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
   
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.more"><div class="info"><h1>Getting More Information From Query Results</h1>
</div>
   
   <p class="para">
    With MDB2 there are four ways to retrieve useful
    information about the query result sets themselves:
   </p>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">numRows()</strong></span> tells how many
     rows are in a <strong class="command">SELECT</strong> query result
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest'</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'result_buffering'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numRows</span><span style="color: #007700">();<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'cannot&nbsp;get&nbsp;number&nbsp;of&nbsp;rows&nbsp;in&nbsp;the&nbsp;result&nbsp;set&nbsp;when&nbsp;"result_buffering"&nbsp;is&nbsp;disabled'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">numCols()</strong></span> tells how many
     columns are in a <strong class="command">SELECT</strong> query result
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numCols</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">rowCount()</strong></span> tells which row number
      the internal result row pointer currently points to
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">();<br /></span><span style="color: #FF8000">//&nbsp;returns&nbsp;2&nbsp;if&nbsp;the&nbsp;result&nbsp;set&nbsp;contains&nbsp;at&nbsp;least&nbsp;2&nbsp;rows<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rowCount</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">getColumnNames()</strong></span> returns an associative
     array with the names of the column of the result set as keys and the
     position inside the result set as the values
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getColumnNames</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">seek()</strong></span> allows to seek to a specific row inside
     a result set. Note that seeking to previously read rows is only possible
     if the &#039;result_buffering&#039; option is left enabled, otherwise only forward
     seeking is supported.
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;Seek&nbsp;to&nbsp;the&nbsp;10th&nbsp;row&nbsp;in&nbsp;the&nbsp;result&nbsp;set<br /></span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">seek</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">nextResult()</strong></span> allows iterate over multiple
      results returned by a multi query.
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$multi_query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'multi_query'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;check&nbsp;if&nbsp;multi_query&nbsp;can&nbsp;be&nbsp;enabled<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$multi_query</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;phptest2;'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;move&nbsp;result&nbsp;pointer&nbsp;to&nbsp;the&nbsp;next&nbsp;result<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextResult</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'multi_query&nbsp;option&nbsp;is&nbsp;not&nbsp;supported'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      Another <strong class="function">nextResult()</strong></span> example with a Stored Procedure returning multiple result sets.
    </strong></p></div>

    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">executeStoredProcedure</span><span style="color: #007700">(</span><span style="color: #DD0000">'procedureName'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'argument1'</span><span style="color: #007700">));<br />do&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">(</span><span style="color: #0000BB">MDB2_FETCHMODE_OBJECT</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}&nbsp;while&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextResult</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">free</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>

   <div class="example"><div class="info"><p><strong>
     <span class="phrase">
      <strong class="function">bindColumn()</strong></span> allows to bind a reference to
      a user variable to a specific field inside the result set. This means that
      when fetching the next row, this variable is automatically updated.
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$address&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;id,&nbsp;name,&nbsp;address&nbsp;FROM&nbsp;clients'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'integer'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindColumn</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;provide&nbsp;a&nbsp;type&nbsp;for&nbsp;the&nbsp;column&nbsp;not&nbsp;included&nbsp;in&nbsp;the&nbsp;query()&nbsp;call<br /></span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindColumn</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'text'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;but&nbsp;specifying&nbsp;a&nbsp;type&nbsp;is&nbsp;as&nbsp;always&nbsp;optional&nbsp;in&nbsp;MDB2<br /></span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindColumn</span><span style="color: #007700">(</span><span style="color: #DD0000">'address'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$address</span><span style="color: #007700">);<br />while&nbsp;(</span><span style="color: #0000BB">$res</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;address&nbsp;of&nbsp;'</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">'&nbsp;(user&nbsp;id&nbsp;'</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">')&nbsp;is&nbsp;'</span><span style="color: #0000BB">$address</span><span style="color: #DD0000">'\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.convinience"><div class="info"><h1>Querying and fetching in one call</h1>
</div>
   
   <p class="para">
    All of the fetch methods are also available in a variant that executes a
    query directly:
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodqueryOne" class="link external">
     <strong class="function">queryOne()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodqueryRow" class="link external">
     <strong class="function">queryRow()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodqueryCol" class="link external">
     <strong class="function">queryCol()</strong></a> and
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#methodqueryAll" class="link external">
     <strong class="function">queryAll()</strong></a>.
   </p>

   <div class="example"><div class="info"></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>
   <p class="para">
    Users that prefer to use prepared statements can make use of the
    following methods from the <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Extended.html" class="link external">
    Extended</a> module:
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Extended.html#methodgetOne" class="link external">
     <strong class="function">getOne()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Extended.html#methodgetRow" class="link external">
     <strong class="function">getRow()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Extended.html#methodgetCol" class="link external">
     <strong class="function">getCol()</strong></a>,
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Extended.html#methodgetAll" class="link external">
     <strong class="function">getAll()</strong></a> and
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Extended.html#methodgetAssoc" class="link external">
     <strong class="function">getAssoc()</strong></a>.
   </p>

   <div class="example"><div class="info"></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Once&nbsp;you&nbsp;have&nbsp;a&nbsp;valid&nbsp;MDB2&nbsp;object&nbsp;named&nbsp;$mdb2...<br /></span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadModule</span><span style="color: #007700">(</span><span style="color: #DD0000">'Extended'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;phptest&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">extended</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRow</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">),&nbsp;array(</span><span style="color: #DD0000">'integer'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.datatypes"><div class="info"><h1>Data types</h1>
</div>
   
   <p class="para">
    MDB2 supports a number of <a href="package.database.mdb2.datatypes.html" class="link">data types</a>
    across all drivers. These can be set for result sets at query or prepare time or using the
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Result_Common.html#methodsetResultTypes" class="link external">
    <strong class="function">setResultTypes()</strong></a> method.
    You can find an overview of the <a href="package.database.mdb2.datatypes.html" class="link">supported 
    data types and their format here</a>.
   </p>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.lobs"><div class="info"><h1>Fetching LOBs</h1>
</div>
   
   <p class="para">
    To retrieve a Large Object (BLOB or CLOB), you can use streams, as you were reading a file
   </p>

   <div class="example"><div class="info"><p><strong>
     Fetching LOBs with streams.
    </strong></p></div>
    
    <div class="phpcode">
     <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$result&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;document,&nbsp;picture&nbsp;FROM&nbsp;files&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;1'</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'clob'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'blob'</span><span style="color: #007700">));<br />if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;||&nbsp;!</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valid</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//uh-oh<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchRow</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//fetch&nbsp;the&nbsp;Character&nbsp;LOB&nbsp;into&nbsp;the&nbsp;$clob_value&nbsp;variable<br /></span><span style="color: #0000BB">$clob&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />if&nbsp;(!</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$clob</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">is_resource</span><span style="color: #007700">(</span><span style="color: #0000BB">$clob</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$clob_value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//use&nbsp;streams<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$clob</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$clob_value&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$clob</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8192</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">datatype</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">destroyLOB</span><span style="color: #007700">(</span><span style="color: #0000BB">$clob</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//fetch&nbsp;the&nbsp;Binary&nbsp;LOB&nbsp;into&nbsp;the&nbsp;$blob_value&nbsp;variable<br /></span><span style="color: #0000BB">$blob&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br />if&nbsp;(!</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$blob</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">is_resource</span><span style="color: #007700">(</span><span style="color: #0000BB">$blob</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$blob_value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$blob</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$blob_value</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$blob</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8192</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mdb2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">datatype</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">destroyLOB</span><span style="color: #007700">(</span><span style="color: #0000BB">$blob</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//free&nbsp;the&nbsp;result<br /></span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">free</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>

  <div class="refsection" id="package.database.mdb2.intro-fetch.desc.error"><div class="info"><h1>Checking for Errors</h1>
</div>
   
   <p class="para">
    Don&#039;t forget to use
    <a href="http://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2.html#methodisError" class="link external">
     <strong class="function">isError()</strong></a> to check
    if your actions return a <strong class="classname">MDB2_Error</strong> object.
   </p>
  </div>

 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.database.mdb2.datatypes.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.database.mdb2.html">MDB2</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.database.mdb2.intro-execute.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Datatypes</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Prepare &amp; Execute</td>
  </tr>
 </table>
</div>
</body></html>
