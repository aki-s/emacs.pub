<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>-&gt;insert()</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.database.db-dataobject.html" title="DB_DataObject" />
  <link rel="prev" href="package.database.db-dataobject.db-dataobject.count.html" title="-&gt;count()" />
  <link rel="next" href="package.database.db-dataobject.db-dataobject.update.html" title="-&gt;update()" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">-&gt;insert()</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.database.db-dataobject.db-dataobject.count.html" title="-&gt;count()">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.database.db-dataobject.db-dataobject.update.html" title="-&gt;update()">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.database.db-dataobject.db-dataobject.insert">
   
    <h1 class="refname">-&gt;insert()</h1>
    <div class="refnamediv">-&gt;insert() &ndash; Insert current objects variables into database</div>

   
   <h2 class="refsynopsisdiv">Synopsis</h2>
    <div class="funcsynopsis">
      
     <p><code class="funcprototype">
      mixed <strong class="function">$DB_DataObject-&gt;insert</strong> ( 
      
      
      
                  
     )</code></p>
    </div>
   
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.insert.desc">
    <h1 class="title">Description</h1>
    <p class="para">
     Insert the data into the database, based on the variable values of the current object and returns the ID
     of the inserted element if sequences or primary keys are being used. The values are correctly quoted,
     and some limited type checking is done.
    </p>
      <p class="para">
     With mysql, the mysql_next_id() method is used, on other databases, PEAR DB sequence method is
     used.
    </p>
      <p class="para">
    Note, insert() may not return the ID correctly in quite a few situations:
    </p>
     <p class="para">
        </p><ul class="itemizedlist">
          <li class="listitem">
            <span class="simpara">If the database backend does not support it.</span>
          </li>
          <li class="listitem">
            <span class="simpara">The generator did not correctly flag the correct column as autoincrement/nextval</span>
          </li>
          <li class="listitem">
            <span class="simpara">An error occured (turn on debugging to see it)</span>
          </li>
          <li class="listitem">
            <span class="simpara">The insert failed or &#039;0&#039; rows where affected.</span>
          </li>
         </ul>
      
   </div>   
      
         
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.insert.return">
    <h1 class="title">Return value</h1>
    <p class="para">
     <em><code class="parameter">mixed</code></em> -  Id or key
    </p>
   </div>      
            
            
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.insert.throws">
    <h1 class="title">Throws</h1>
    <p class="para">
     </p><table class="doctable table"><caption>Possible PEAR_Error values</caption>
            
         
       <thead>
        <tr>
         <th>Error code</th>
         <th>Error message</th>        
         <th>Meaning</th>        
         <th>Solution</th>        
        </tr>

       </thead>

       <tbody class="tbody">
                 
        <tr>
         <td>DB_DATAOBJECT_ERROR_INVALIDCONFIG</td>
         <td>"<span class="quote">insert:No table definition for $table</span>"</td>
         <td class="empty">&nbsp;</td>
         <td class="empty">&nbsp;</td>
        </tr>
       
                 
        <tr>
         <td>DB_DATAOBJECT_ERROR_NODATA</td>
         <td>"<span class="quote">insert: No Data specifed for query</span>"</td>
         <td class="empty">&nbsp;</td>
         <td class="empty">&nbsp;</td>
        </tr>
       
                 
        <tr>
         <td>DB_*</td>
         <td>*</td>
         <td>see PEAR::<a href="package.database.db.html" class="link"><strong class="classname">DB</strong></a></td>
         <td>see PEAR::<a href="package.database.db.html" class="link"><strong class="classname">DB</strong></a></td>
        </tr>
       
                         
       </tbody>
      
     </table>

    
   </div>         
               
                
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.insert.note">
    <h1 class="title">Note</h1>  
                 
    <p class="simpara">This function can not be called
statically.</p>
    
                         
                             
  <p class="simpara"></p>
   </div>    
                   
   <div class="refsection" id="package.database.db-dataobject.db-dataobject.insert.example">
    <h1 class="title">Example</h1>
    <div class="example"><div class="info"><p><strong>Simple insert</strong></p></div>
     
      <div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$person&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DataObjects_Person</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">=</span><span style="color: #DD0000">'fred'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$person</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>    
     </div>
    </div>
    <div class="example"><div class="info"><p><strong>Resulting SQL</strong></p></div>
     
      <div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />INSERT&nbsp;INTO&nbsp;person&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">name</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">VALUES&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'fred'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>    
     </div>
    </div>    
   </div>         
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.database.db-dataobject.db-dataobject.count.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.database.db-dataobject.html">DB_DataObject</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.database.db-dataobject.db-dataobject.update.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">-&gt;count()</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">-&gt;update()</td>
  </tr>
 </table>
</div>
</body></html>
