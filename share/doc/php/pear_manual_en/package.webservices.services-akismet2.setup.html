<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Setup</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.webservices.services-akismet2.html" title="Services_Akismet2" />
  <link rel="prev" href="package.webservices.services-akismet2.intro.html" title="Introduction" />
  <link rel="next" href="package.webservices.services-akismet2.comment.html" title="The Comment Class" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Setup</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.webservices.services-akismet2.intro.html" title="Introduction">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.webservices.services-akismet2.comment.html" title="The Comment Class">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="section" id="package.webservices.services-akismet2.setup">

 <div class="info">
  <h1>Setup</h1>

 </div>

 <div class="section" id="package.webservices.services-akismet2.setup.services">

  <div class="info">
   <h2 class="title">Service Providers</h2>
  </div>

  <p class="para">
   Though originally created for use with the
   <a href="http://www.akismet.com/" class="link external">Akismet service</a>, the
   Akismet API is also used by other spam-filtering services.
   <strong class="package">Services_Akismet2</strong> works with any service that uses the
   Akismet API. To use <strong class="package">Services_Akismet2</strong> with other
   spam-filtering service providers, specify the API server in either the
   <a href="http://pear.php.net/package/Services_Akismet2/docs/latest/Services_Akismet2/Services_Akismet2.html#method__construct" class="link external">constructor</a>,
   or by using the
   <code class="methodname"><a href="http://pear.php.net/package/Services_Akismet2/docs/latest/Services_Akismet2/Services_Akismet2.html#methodsetConfig" class="link external">setConfig()</a></code>
   method.
  </p>

  <p class="para">
   For example:
   </p><div class="informalexample">
    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Services/Akismet2.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;set&nbsp;service&nbsp;provider&nbsp;in&nbsp;constructor<br /></span><span style="color: #0000BB">$akismet&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Akismet2</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'AABBCCDDEEFF'</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'apiServer'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'antispam.example.com'<br /></span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;set&nbsp;service&nbsp;provider&nbsp;using&nbsp;setConfig()&nbsp;method<br /></span><span style="color: #0000BB">$akismet&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Akismet2</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'AABBCCDDEEFF'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$akismet</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setConfig</span><span style="color: #007700">(</span><span style="color: #DD0000">'apiServer'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'antispam.example.com'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;for&nbsp;a&nbsp;service&nbsp;provider&nbsp;that&nbsp;uses&nbsp;a&nbsp;non-standard&nbsp;port&nbsp;(8080)<br /></span><span style="color: #0000BB">$akismet&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Akismet2</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'AABBCCDDEEFF'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$akismet</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setConfig</span><span style="color: #007700">(</span><span style="color: #DD0000">'apiServer'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'antispam.example.com'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setConfig</span><span style="color: #007700">(</span><span style="color: #DD0000">'apiPort'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8080</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>
  

  <p class="para">
   Popular spam-filtering service providers using the Akismet API include:
   </p><ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">Akismet, and</span>
    </li>
    <li class="listitem">
     <span class="simpara"><a href="http://antispam.typepad.com/" class="link external">TypePad AntiSpam</a>.</span>
    </li>
   </ul>
  

 </div>

 <div class="section" id="package.webservices.services-akismet2.setup.api-keys">

  <div class="info">
   <h2 class="title">API Keys</h2>
  </div>

  <p class="para">
   All requests using the Akismet API must be verified using an API key. The
   API key is usually tied to a particular website and ensures the user is
   allowed to use the service (which is not free to provide). Most service
   providers offer API keys free of charge for personal or low-volume use, and
   offer licensing for commercial or high-volume applications.
  </p>

  <p class="para">
   </p><blockquote class="note">
    <p class="para">
     API keys are specific to a particular service provider. If you switch
     spam-filtering service providers, you will need to acquire an API key for
     the particular service.
    </p>
   </blockquote>

  

  <p class="para">
   The format of the API key may vary between service providers. The API key
   itself is specified in the constructor. A
   <strong class="classname"><a href="http://pear.php.net/package/Services_Akismet2/docs/latest/Services_Akismet2/Services_Akismet2_InvalidApiKeyException.html" class="link external">Services_Akismet2_InvalidApiKeyException</a></strong>
   will be thrown when a request is made using an invalid API key.
  </p>

 </div>

 <div class="section" id="package.webservices.services-akismet2.setup.testing">

  <div class="info">
   <h2 class="title">Testing Your API Key</h2>
  </div>

  <p class="para">
   After you have acquired an API key, you may want to test it. A comment with
   the author set to <code class="literal">viagra-test-123</code> should always be
   detected as spam, so it is a good way to make sure things are working
   properly.
   </p><div class="informalexample">
    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Services/Akismet2.php'</span><span style="color: #007700">;<br />require_once&nbsp;</span><span style="color: #DD0000">'Services/Akismet2/Comment.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$comment&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Akismet2_Comment</span><span style="color: #007700">(array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'comment_author'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'viagra-test-123'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'user_ip'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'127.0.0.1'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'user_agent'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'just&nbsp;testing'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'referrer'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'http://example.com'<br /></span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$akismet&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Akismet2</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://myblog.example.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'AABBCCDDEEFF'</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$akismet</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isSpam</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Everything&nbsp;is&nbsp;working&nbsp;properly.'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Something\'s&nbsp;not&nbsp;right!'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>
  

 </div>

</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.webservices.services-akismet2.intro.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.webservices.services-akismet2.html">Services_Akismet2</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.webservices.services-akismet2.comment.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Introduction</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">The Comment Class</td>
  </tr>
 </table>
</div>
</body></html>
