<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Custom Group-based elements</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.html.html-quickform2.elements.html" title="Form elements" />
  <link rel="prev" href="package.html.html-quickform2.groups.html" title="Groups" />
  <link rel="next" href="package.html.html-quickform2.elements.repeat.html" title="Repeat element" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Custom Group-based elements</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.html.html-quickform2.groups.html" title="Groups">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.html.html-quickform2.elements.repeat.html" title="Repeat element">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.html.html-quickform2.elements.custom">
 
  <h1 class="refname">Custom Group-based elements</h1>
  <div class="refnamediv">Custom Group-based elements &ndash; Date and Hierselect</div>

 
 <div class="refsection" id="package.html.html-quickform2.elements.custom.date">
  <div class="info">
   <h1>Date element</h1>

  </div>
  <p class="para">
   <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Date.html" class="apidoclink">HTML_QuickForm2_Element_Date</a> is a
   group of <code class="literal">&lt;select&gt;&lt;/select&gt;</code> elements used to input dates (and
   times). Child selects are created according to <code class="literal">&#039;format&#039;</code> parameter. 
  </p>
  <p class="para">
   <code class="varname">$data</code> parameter for <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Date.html#method__construct" class="apidoclink">element's
    constructor</a> may contain the following custom keys:
   </p><div class="variablelist">
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;messageProvider&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      <a href="package.html.html-quickform2.elements.message-provider.html" class="link">Message provider</a>
      for localized names of months and weekdays.
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;language&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Date language, using <code class="literal">&#039;locale&#039;</code> will display month / weekday names
      according to the current locale.
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;format&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Format of the date, based on PHP&#039;s <a href="http://www.php.net/manual-lookup.php?pattern=date" class="link external"><strong class="function">date()</strong></a>. Format characters
      recognized: <code class="literal">&#039;D&#039;</code>, <code class="literal">&#039;l&#039;</code>, <code class="literal">&#039;d&#039;</code>,
      <code class="literal">&#039;M&#039;</code>, <code class="literal">&#039;F&#039;</code>, <code class="literal">&#039;m&#039;</code>,
      <code class="literal">&#039;Y&#039;</code>, <code class="literal">&#039;y&#039;</code>, <code class="literal">&#039;h&#039;</code>,
      <code class="literal">&#039;H&#039;</code>, <code class="literal">&#039;i&#039;</code>, <code class="literal">&#039;s&#039;</code>,
      <code class="literal">&#039;a&#039;</code>, <code class="literal">&#039;A&#039;</code>. 
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;minYear&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Minimum year in year select
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;maxYear&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Maximum year in year select
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;addEmptyOption&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Whether an empty option should be added to the top of each select box. May be also set on a
      per-element basis: <code class="literal">array(&#039;Y&#039; =&gt; false, &#039;d&#039; =&gt; true);</code>
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;emptyOptionValue&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      The value passed by the empty option
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;emptyOptionText&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      The text displayed for the empty option. May be also set on a per-element basis:
      <code class="literal">array(&#039;Y&#039; =&gt; &#039;Choose year&#039;, &#039;d&#039; =&gt; &#039;Choose day&#039;);</code> 
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;optionIncrement&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Step to increase the option values by (works for <code class="literal">&#039;i&#039;</code> and
      <code class="literal">&#039;s&#039;</code>)
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;minHour&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Minimum hour in hour select (only for 24 hour format)
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;maxHour&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Maximum hour in hour select (only for 24 hour format)
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;minMonth&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Minimum month in month select
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;maxMonth&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Maximum month in month select
     </span></dd>
    </dl>
   </div>
  
  <p class="para">
   Child selects of <strong class="classname">Date</strong> element are named according to
   <code class="literal">&#039;format&#039;</code> parameter, so Date&#039;s value can be set using the standard
   approach for groups:
   </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addElement</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'date'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'testDate'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'format'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'d-F-Y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'minYear'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y'</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">'maxYear'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2001</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #FF8000">//&nbsp;sets&nbsp;the&nbsp;date&nbsp;to&nbsp;January&nbsp;1st,&nbsp;2012<br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'d'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'F'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Y'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2012</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   Additionally Date&#039;s <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Date.html#methodsetValue" class="apidoclink">setValue()</a> method may accept
   a string containing a date or a number representing Unix timestamp:
   </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;also&nbsp;sets&nbsp;the&nbsp;date&nbsp;to&nbsp;January&nbsp;1st,&nbsp;2012<br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #DD0000">'2012-01-01'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;once&nbsp;again&nbsp;sets&nbsp;the&nbsp;date&nbsp;to&nbsp;January&nbsp;1st,&nbsp;2012<br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #0000BB">1325408400</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div><p>
   String representation of a date is processed by <a href="http://www.php.net/manual-lookup.php?pattern=strtotime" class="link external"><strong class="function">strtotime()</strong></a> function, so
   consider its limitations.
  </p>
 </div>
 
 <div class="refsection" id="package.html.html-quickform2.elements.custom.hierselect">
  <div class="info">
   <h1>Hierselect element</h1>

  </div>
  <blockquote class="note">
   <p class="para">
    Hierselect requires <code class="filename">quickform.js</code> and
    <code class="filename">quickform-hierselect.js</code> files being <a href="package.html.html-quickform2.javascript.html#package.html.html-quickform2.javascript.libraries" class="link">included in the page</a> to
    work.
   </p>
  </blockquote>

  <p class="para">
   <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Hierselect.html" class="apidoclink">HTML_QuickForm2_Element_Hierselect</a> is
   a group of two or more chained <code class="literal">&lt;select&gt;&lt;/select&gt;</code> elements.
   Selecting a value in the first select changes options in the second and so on. 
  </p>
  <p class="para">
   <code class="varname">$data</code> parameter for <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Hierselect.html#method__construct" class="apidoclink">element's
    constructor</a> may contain the following custom keys:
   </p><div class="variablelist">
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;options&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      Data to populate child elements&#039; options with. Passed to <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Hierselect.html#methodloadOptions" class="apidoclink">HTML_QuickForm2_Element_Hierselect::loadOptions()</a>.
     </span></dd>
    </dl>
    <dl class="varlistentry">
     <dt class="term"><code class="literal">&#039;size&#039;</code></dt>
     <dd class="listitem"><span class="simpara">
      number of selects in hierselect. If not given will be set from size of options array or
      size of array passed to <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Hierselect.html#methodsetValue" class="apidoclink">HTML_QuickForm2_Element_Hierselect::setValue()</a>.
     </span></dd>
    </dl>
   </div><p>
   Everything else except <code class="literal">&#039;label&#039;</code> is passed on to created selects.
  </p>
  <p class="para">
   Options for select elements are added using <a href="http://pear.php.net/package/HTML_QuickForm2/docs/latest/HTML_QuickForm2/HTML_QuickForm2_Element_Hierselect.html#methodloadOptions" class="apidoclink">HTML_QuickForm2_Element_Hierselect::loadOptions()</a> method:
   </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$categories&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTML'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTTP'<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;first&nbsp;keys&nbsp;are&nbsp;needed&nbsp;to&nbsp;find&nbsp;related&nbsp;options<br /></span><span style="color: #0000BB">$packages&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTML_AJAX'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTML_Common2'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTML_QuickForm2'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTTP_Download'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'HTTP_Request2'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #0000BB">$hierselect</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadOptions</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$categories</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$packages</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <p class="para">
   Unlike <a href="package.html.html-quickform.html-quickform-hierselect.html" class="link">old hierselect
    element</a> from <strong class="package">HTML_QuickForm</strong> you don&#039;t need to provide all possible
   options. You may instead give server-side and client-side callbacks that will receive values of
   previous selects and return additional options as needed:
   </p><div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$hierselect</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadOptions</span><span style="color: #007700">(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">$categories</span><span style="color: #007700">,&nbsp;array()),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">$loader</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'getPackages'</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">'loadPackagesSync'<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  
  <blockquote class="tip">
   <p class="para">
    <code class="filename">hierselect-ajax.php</code> <a href="package.html.html-quickform2.examples.html" class="link">example file installed with the package</a>
    shows how to use <span class="acronym">AJAX</span> requests to load additional options. 
   </p>
  </blockquote>

 </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.html.html-quickform2.groups.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.html.html-quickform2.elements.html">Form elements</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.html.html-quickform2.elements.repeat.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Groups</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Repeat element</td>
  </tr>
 </table>
</div>
</body></html>
