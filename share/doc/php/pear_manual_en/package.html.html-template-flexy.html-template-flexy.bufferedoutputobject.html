<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>$flexy-&gt;bufferedOutputObject()</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.html.html-template-flexy.html" title="HTML_Template_Flexy" />
  <link rel="prev" href="package.html.html-template-flexy.html-template-flexy.outputobject.html" title="$flexy-&gt;outputObject()" />
  <link rel="next" href="package.html.html-template-flexy.html-template-flexy.getelements.html" title="$flexy-&gt;getElements()" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">$flexy-&gt;bufferedOutputObject()</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.html.html-template-flexy.html-template-flexy.outputobject.html" title="$flexy-&gt;outputObject()">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.html.html-template-flexy.html-template-flexy.getelements.html" title="$flexy-&gt;getElements()">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.html.html-template-flexy.html-template-flexy.bufferedoutputobject">
   
    <h1 class="refname">$flexy-&gt;bufferedOutputObject()</h1>
    <div class="refnamediv">$flexy-&gt;bufferedOutputObject() &ndash; Merges a controller object with the template and returns the result</div>

   
   <h2 class="refsynopsisdiv">Synopsis</h2>
    <div class="funcsynopsis">
  
    <p><code class="funcprototype">
     string $flexy-&gt;<strong class="function">bufferedOutputObject</strong> ( 
      object $controllerObject
      , array  $elements
    )</code></p>
    </div>
   
   <div class="refsection" id="package.html.html-template-flexy.html-template-flexy.bufferedoutputobject.desc">
    <h1 class="title">Description</h1>
    <p class="para">
      This maps the values of the supplied object and runs the compiled template, 
      and returns the result.
    </p>
       <p class="para">
      This can be used in conjuction with PEAR::Cache, or in the example below, with
      a email template (note this still needs testing.. - the backend should 
      eventually support a native tokenizer for email templates.)
    </p>
    
    
   </div>   
   <div class="refsection" id="package.html.html-template-flexy.html-template-flexy.bufferedoutputobject.parameter">
    <h1 class="title">Parameter</h1>
    <p class="para">
          </p><ul class="itemizedlist">
     
     <li class="listitem">
      <p class="para">
       <em><code class="parameter">object $controllerObject</code></em> - 
       The object you want to use with the template, the values of the object will
       relate to the $controllerObject-&gt;tag will map to {tag} on the template
      </p>
     </li>
     
      <li class="listitem">
      <p class="para">
       <em><code class="parameter">array $elements</code></em> - 
       This is an associative array of form, or dynamic elements names (or id&#039;s) which will be merged with 
       the one defined in the template.
      </p>
     </li>
     
     </ul>
    
    
   </div>      
   
        
   <div class="refsection" id="package.html.html-template-flexy.html-template-flexy.bufferedoutputobject.return">
    <h1 class="title">Return value</h1>
    <p class="para">
     <em><code class="parameter">string</code></em> - the object variables overlayed on the template
    </p>
   </div>      
            
   
   
   <div class="refsection" id="package.html.html-template-flexy.html-template-flexy.bufferedoutputobject.note">
    <h1 class="title">Note</h1>
    <p class="simpara">This function can not be called
statically.</p>
   </div>    
                   
   <div class="refsection" id="package.html.html-template-flexy.html-template-flexy.bufferedoutputobject.example">
    <h1 class="title">Example</h1>
    <div class="example"><div class="info"><p><strong>Person DataObject send_password method</strong></p></div>
     
      <div class="phpcode">
       <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">DataObjects_Person&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$cleartextPassword</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$email</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">sendEmail</span><span style="color: #007700">(</span><span style="color: #0000BB">$templateFile</span><span style="color: #007700">,</span><span style="color: #0000BB">$content</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">:&nbsp;(object)&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(</span><span style="color: #0000BB">get_object_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;use&nbsp;the&nbsp;regex&nbsp;compiler,&nbsp;as&nbsp;it&nbsp;doesnt&nbsp;parse&nbsp;&lt;tags&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$template&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">HTML_Template_Flexy</span><span style="color: #007700">(&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'compiler'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Regex'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'filters'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'SimpleTags'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mail'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;compile&nbsp;a&nbsp;text&nbsp;file&nbsp;(email&nbsp;template)&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$template</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">compile</span><span style="color: #007700">(</span><span style="color: #0000BB">$templateFile</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;use&nbsp;variables&nbsp;from&nbsp;this&nbsp;object&nbsp;to&nbsp;ouput&nbsp;data.&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mailtext&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$template</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bufferedOutputObject</span><span style="color: #007700">(</span><span style="color: #0000BB">$content</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//echo&nbsp;"&lt;PRE&gt;";print_R($mailtext);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;With&nbsp;the&nbsp;output&nbsp;try&nbsp;and&nbsp;send&nbsp;an&nbsp;email,&nbsp;using&nbsp;a&nbsp;few&nbsp;tricks&nbsp;in&nbsp;Mail_MimeDecode.&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Mail/mimeDecode.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require_once&nbsp;</span><span style="color: #DD0000">'Mail.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$decoder&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mail_mimeDecode</span><span style="color: #007700">(</span><span style="color: #0000BB">$mailtext</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parts&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$decoder</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSendArray</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$parts</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$parts</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$recipents</span><span style="color: #007700">,</span><span style="color: #0000BB">$headers</span><span style="color: #007700">,</span><span style="color: #0000BB">$body</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$parts</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mailOptions&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">getStaticProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'Mail'</span><span style="color: #007700">,</span><span style="color: #DD0000">'options'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mail&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Mail</span><span style="color: #007700">::</span><span style="color: #0000BB">factory</span><span style="color: #007700">(</span><span style="color: #DD0000">"SMTP"</span><span style="color: #007700">,</span><span style="color: #0000BB">$mailOptions</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">PEAR</span><span style="color: #007700">::</span><span style="color: #0000BB">isError</span><span style="color: #007700">(</span><span style="color: #0000BB">$mail</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">$mail&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">(</span><span style="color: #0000BB">$recipents</span><span style="color: #007700">,</span><span style="color: #0000BB">$headers</span><span style="color: #007700">,</span><span style="color: #0000BB">$body</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>    
     </div>
    </div>
   
    <div class="example"><div class="info"><p><strong>An email template (using the Regex Parser - hence the {t.*})</strong></p></div>
     
      <div class="htmlcode">
       <pre class="htmlcode">         
From: &quot;HTML_Template_Flexy&quot; &lt;html_template_flexy@pear.php.net&gt;
Sender: &quot;HTML_Template_Flexy&quot;  &lt;html_template_flexy@pear.php.net&gt;
To: {t.email}
Subject: Here is your new password
Content-Type: text/plain; charset=us-ascii

Dear {t.name}

Your New Password is {t.cleartextPassword}

please use it  to log into your bank account :)</pre>
    
     </div>
    </div>
   
    <div class="example"><div class="info"><p><strong>The resulting email head and body</strong></p></div>
     
      <div class="htmlcode">
       <pre class="htmlcode">         
      
From: &quot;HTML_Template_Flexy&quot; &lt;html_template_flexy@pear.php.net&gt;
Sender: &quot;HTML_Template_Flexy&quot;  &lt;html_template_flexy@pear.php.net&gt;
To: demo@example.com
Subject: Here is your new password
Content-Type: text/plain; charset=us-ascii

Dear Fred Blobs

Your New Password is 0ab123dcc

please use it  to log into your bank account :)</pre>
    
     </div>
    </div>
   </div>   
   
   
    
   
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.html.html-template-flexy.html-template-flexy.outputobject.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.html.html-template-flexy.html">HTML_Template_Flexy</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.html.html-template-flexy.html-template-flexy.getelements.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">$flexy-&gt;outputObject()</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">$flexy-&gt;getElements()</td>
  </tr>
 </table>
</div>
</body></html>
