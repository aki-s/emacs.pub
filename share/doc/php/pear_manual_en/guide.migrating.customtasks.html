<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Custom File Tasks</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="developers-changes14.html" title="PEAR Installer: customizing the installer itself" />
  <link rel="prev" href="guide.migrating.customroles.defining.html" title="creating custom roles" />
  <link rel="next" href="guide.migrating.customtasks.xml.html" title="custom tasks in package.xml" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Custom File Tasks</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="guide.migrating.customroles.defining.html" title="creating custom roles">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="guide.migrating.customtasks.xml.html" title="custom tasks in package.xml">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="chapter" id="guide.migrating.customtasks">
 <div class="info"><h1>Custom File Tasks</h1>
<div class="TOC">
<strong>Table of Contents</strong><ul class="chunklist chunklist_chapter">
<li><a href="guide.migrating.customtasks.xml.html">custom tasks in package.xml</a> — Using a customized task in a package.xml</li>
<li><a href="guide.migrating.customtasks.php.html">coding custom tasks</a> — Creating customized tasks in PHP</li>
</ul>
</div>

  <h2 class="EDITEDBY">Edited By</h2><span class="personname fn">Gregory Beaver </span>
  <p class="date">$Date: 2008-10-09 15:16:18 $</p>
 </div>
 

 <p class="simpara">
  For many small library packages, very little customization is needed.  Just install
  and go.  package.xml 1.0 is very good at this task.  As packages grow in size and
  complexity, it is often necessary to make slight changes to the contents of files,
  and occasionally to external components such as databases.
 </p>

 <p class="simpara">
  package.xml 1.0 provides a single undocumented system of customizing file contents through
  the &lt;replace&gt; tag, like so:
 </p>

 <p class="para">
  </p><div class="xmlcode">
   <pre class="xmlcode">
&lt;file name=&quot;blah.php&quot; role=&quot;php&quot;&gt;
 &lt;replace from=&quot;@token@&quot; to=&quot;version&quot; type=&quot;package-info&quot;/&gt;
 &lt;replace from=&quot;@anothertoken@&quot; to=&quot;php_dir&quot; type=&quot;pear-config&quot;/&gt;
&lt;/file&gt;</pre>

  </div>
 

 <p class="simpara">
  This example above would scan the blah.php file at installation, and then use
  <a href="http://www.php.net/str_replace" class="link external"><strong class="function">str_replace()</strong></a>
  to replace all occurrences of the string <code class="literal">@token@</code> with the package&#039;s
  version number.  Then, it would replace all occurrences of the string
  <code class="literal">@anothertoken@</code> with the value of the user&#039;s php_dir configuration
  variable.
 </p>

 <p class="simpara">
  Although powerful, the replace tag is the only customization tag available in package.xml
  version 1.0.  When developing package.xml version 2.0, the replace tag and innovative work
  of other projects such as <a href="http://phing.info/" class="link external">Phing</a> became the inspiration
  for an expanded kind customization called a &quot;task&quot;.
 </p>

 <p class="simpara">
  Tasks are defined by xml children of a
  <a href="guide.developers.package2.file.html" class="link">&lt;file&gt;</a> tag.  Tasks are
  implemented by extending the <strong class="classname">PEAR_Task_Common</strong> task.
 </p>
 

 

</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="guide.migrating.customroles.defining.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="developers-changes14.html">PEAR Installer: customizing the installer itself</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="guide.migrating.customtasks.xml.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">creating custom roles</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">custom tasks in package.xml</td>
  </tr>
 </table>
</div>
</body></html>
