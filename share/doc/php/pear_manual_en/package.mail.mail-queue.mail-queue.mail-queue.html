<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>constructor Mail_Queue::Mail_Queue</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.mail.mail-queue.html" title="Mail_Queue" />
  <link rel="prev" href="package.mail.mail-queue.mail-queue.tutorial.html" title="Tutorial" />
  <link rel="next" href="package.mail.mail-queue.mail-queue.deletemail.html" title="Mail_Queue::deleteMail" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">constructor Mail_Queue::Mail_Queue</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.mail.mail-queue.mail-queue.tutorial.html" title="Tutorial">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.mail.mail-queue.mail-queue.deletemail.html" title="Mail_Queue::deleteMail">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.mail.mail-queue.mail-queue.mail-queue">
   
    <h1 class="refname">constructor <strong class="function">Mail_Queue::Mail_Queue</strong></h1>
    <div class="refnamediv">constructor  <strong class="function">Mail_Queue::Mail_Queue()</strong> &ndash; Mail_Queue constructor</div>

   
   <h2 class="refsynopsisdiv">Synopsis</h2>
    <div class="funcsynopsis">
     <div class="programlisting">
      require_once &#039;Mail/Queue.php&#039;;
     </div>
     <p><code class="funcprototype">
      mixed      constructor <strong class="function">Mail_Queue::Mail_Queue</strong> ( 
      array $container_options
       , array $mail_options
     )</code></p>
    </div>
    

    <div class="refsection" id="package.mail.mail-queue.mail-queue.mail-queue.desc">
     <h1 class="title">Description</h1>
     <p class="para">Creates a new mail queue object to store mails in, fetch mails from
     and send mails with.</p>
    </div>
   <div class="refsection" id="package.mail.mail-queue.mail-queue.mail-queue.param">
    <h1 class="title">Parameter</h1>
    <p class="para">
     </p><div class="variablelist">
      <dl class="varlistentry">
       <dt class="term">
        <span class="type">array</span>
        <em><code class="parameter">$container_options</code></em>
       </dt>
       <dd class="listitem">
        <p class="para">
         Array of container (mail storage) options. See tutorial for details.
        </p>
       </dd>
      </dl>     
     </div>
     <div class="variablelist">
      <dl class="varlistentry">
       <dt class="term">
        <span class="type">array</span>
        <em><code class="parameter">$mail_options</code></em>
       </dt>
       <dd class="listitem">
        <p class="para">
         Array of mailer options. See tutorial for details.
        </p>
       </dd>
      </dl>     
     </div>
    
   </div>
   <div class="refsection"><div class="info"></div>
   
   <p class="para">
    </p><div class="example"><div class="info"></div>
     
     <div class="phpcode">
  <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Mail/Queue.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$container_options&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'type'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'db'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'database'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'dbname'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'phptype'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'username'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'root'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'password'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'mail_table'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'mail_queue'</span><span style="color: #007700">,<br />);<br /></span><span style="color: #FF8000">//optionally,&nbsp;a&nbsp;'dns'&nbsp;string&nbsp;can&nbsp;be&nbsp;provided&nbsp;instead&nbsp;of&nbsp;db&nbsp;parameters.<br />//look&nbsp;at&nbsp;DB::connect()&nbsp;method&nbsp;or&nbsp;at&nbsp;DB&nbsp;or&nbsp;MDB&nbsp;docs&nbsp;for&nbsp;details.<br />//you&nbsp;could&nbsp;also&nbsp;use&nbsp;mdb&nbsp;container&nbsp;instead&nbsp;db<br /></span><span style="color: #0000BB">$mail_options&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'driver'&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'smtp'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'host'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'your_smtp_server.com'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'port'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">25</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'auth'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'username'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'password'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />);<br /><br /></span><span style="color: #0000BB">$mail_queue&nbsp;</span><span style="color: #007700">=&amp;&nbsp;new&nbsp;</span><span style="color: #0000BB">Mail_Queue</span><span style="color: #007700">(</span><span style="color: #0000BB">$container_options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mail_options</span><span style="color: #007700">);<br /><br />*&nbsp;*****************************************************************<br />*&nbsp;</span><span style="color: #FF8000">//&nbsp;TO&nbsp;ADD&nbsp;AN&nbsp;EMAIL&nbsp;TO&nbsp;THE&nbsp;QUEUE<br /></span><span style="color: #007700">*&nbsp;*****************************************************************<br /></span><span style="color: #0000BB">$from&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'user@server.com'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$from_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'admin'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$recipient&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'recipient@other_server.com'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$recipient_name&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'recipient'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Test&nbsp;message'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$from_params&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;empty(</span><span style="color: #0000BB">$from_name</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #DD0000">'&lt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$from</span><span style="color: #007700">.</span><span style="color: #DD0000">'&gt;'&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">'"'</span><span style="color: #007700">.</span><span style="color: #0000BB">$from_name</span><span style="color: #007700">.</span><span style="color: #DD0000">'"&nbsp;&lt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$from</span><span style="color: #007700">.</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$recipient_params&nbsp;</span><span style="color: #007700">=&nbsp;empty(</span><span style="color: #0000BB">$recipient_name</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #DD0000">'&lt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$recipient</span><span style="color: #007700">.</span><span style="color: #DD0000">'&gt;'&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">'"'</span><span style="color: #007700">.</span><span style="color: #0000BB">$recipient_name</span><span style="color: #007700">.</span><span style="color: #DD0000">'"&nbsp;&lt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$recipient</span><span style="color: #007700">.</span><span style="color: #DD0000">'&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hdrs&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'From'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$from_params</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'To'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$recipient_params</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Subject'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'test&nbsp;message&nbsp;body'</span><span style="color: #007700">,<br />);<br /></span><span style="color: #0000BB">$mime&nbsp;</span><span style="color: #007700">=&amp;&nbsp;new&nbsp;</span><span style="color: #0000BB">Mail_mime</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$mime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setTXTBody</span><span style="color: #007700">(</span><span style="color: #0000BB">$message</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$body&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$hdrs&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mime</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">headers</span><span style="color: #007700">(</span><span style="color: #0000BB">$hdrs</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Put&nbsp;message&nbsp;to&nbsp;queue<br /></span><span style="color: #0000BB">$mail_queue</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">put</span><span style="color: #007700">(</span><span style="color: #0000BB">$from</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$recipient</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hdrs</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Also&nbsp;you&nbsp;could&nbsp;put&nbsp;this&nbsp;msg&nbsp;in&nbsp;more&nbsp;advanced&nbsp;mode<br /></span><span style="color: #0000BB">$seconds_to_send&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3600</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$delete_after_send&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$id_user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$mail_queue</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">put</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$from</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$recipient</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$hdrs</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$seconds_to_send</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$delete_after_send</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id_user&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;TO&nbsp;SEND&nbsp;EMAILS&nbsp;IN&nbsp;THE&nbsp;QUEUE<br /><br />//&nbsp;How&nbsp;many&nbsp;mails&nbsp;could&nbsp;we&nbsp;send&nbsp;each&nbsp;time<br /></span><span style="color: #0000BB">$max_ammount_mails&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$mail_queue&nbsp;</span><span style="color: #007700">=&amp;&nbsp;new&nbsp;</span><span style="color: #0000BB">Mail_Queue</span><span style="color: #007700">(</span><span style="color: #0000BB">$container_options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mail_options</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$mail_queue</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sendMailsInQueue</span><span style="color: #007700">(</span><span style="color: #0000BB">$max_ammount_mails</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
     </div>
    </div>
   
   </div>
   <div class="refsection" id="package.mail.mail-queue.mail-queue.mail-queue.returns">
    <h1 class="title">Return value</h1>
        <p class="para">
      <em class="emphasis">returns</em>True on success else pear error class.
    </p>
   </div>
   <div class="refsection" id="package.mail.mail-queue.mail-queue.mail-queue.throws">
    <h1 class="title">Throws</h1>
        <p class="para">
      <em class="emphasis">throws</em> no exceptions thrown
    </p>
   </div>
   <div class="refsection" id="package.mail.mail-queue.mail-queue.mail-queue.note">
    <h1 class="title">Note</h1>
    <p class="simpara">This function can not be called
statically.</p>
   </div>
</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.mail.mail-queue.mail-queue.tutorial.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.mail.mail-queue.html">Mail_Queue</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.mail.mail-queue.mail-queue.deletemail.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Tutorial</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Mail_Queue::deleteMail</td>
  </tr>
 </table>
</div>
</body></html>
