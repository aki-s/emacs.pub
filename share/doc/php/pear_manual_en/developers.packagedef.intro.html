<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Introduction</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="developers.packagedef.html" title="package.xml" />
  <link rel="prev" href="developers.packagedef.html" title="package.xml" />
  <link rel="next" href="coding-standards.html" title="Coding Standards" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Introduction</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="developers.packagedef.html" title="package.xml">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="coding-standards.html" title="Coding Standards">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="section" id="developers.packagedef.intro"><div class="info"><h1>Introduction to the package definition file <code class="filename">package.xml</code></h1>
</div>
   
   

   <blockquote class="warning">
<h3 class="warning-title">package.xml version 1.0 is deprecated</h3>

    
    <p class="para">
     package.xml 1.0 is deprecated.
     You should really be using package.xml version 2.0.
     Documentation can be found at
     <a href="guide.developers.package2.html" class="link">package.xml 2.0 documentation</a>.
    </p>
    <p class="para">
     As of 2007-04, More than 99.8% of all PEAR
     installations in the wild are capable of using package.xml 2.0
     files, so you should not worry about backwards compatibility.
    </p>
   </blockquote>


   <p class="simpara">
    The package definition file <code class="filename">package.xml</code> is,
    as the name already implies, a well-formed XML file that contains
    all information about a PEAR package.
   </p>
   <p class="simpara">
    This chapter will describe the allowed elements of the package
    definition file and it will discuss how to create such a file for
    your package.
   </p>

   <p class="simpara">
   The <a href="package.pear.pear-packagefilemanager.html" class="link">PEAR_PackageFileManager</a>
   package simplifies the creation of package.xml.
   You can install PEAR_PackageFileManager via the usual command
   </p>

    <p class="para">
     </p><pre class="screen">
      <strong class="userinput"><code>
$ pear install PEAR_PackageFileManager
      </code></strong>
     </pre>

    

   <div class="section" id="developers.packagedef.elements"><div class="info"><h2 class="title">Allowed elements</h2></div>
    

    <p class="para">
     The toplevel element in <code class="filename">package.xml</code> is the
     element <code class="literal">&lt;package version=&quot;1.0&quot;&gt;</code>. The
     allowed sub elements are:
    </p>

    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       <code class="literal">&lt;name&gt;</code>: The name of the package.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       <code class="literal">&lt;summary&gt;</code>: Short summary of the
       package&#039;s description.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       <code class="literal">&lt;description&gt;</code>: Full length description
       of the package.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       <code class="literal">&lt;license&gt;</code>: The license of the package
       (LGPL, PHP License etc.).
      </span>
     </li>
     <li class="listitem">
      <p class="para">
       <code class="literal">&lt;maintainers&gt;</code>: Information about the
       maintainers of the package.
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          maintainer: Information about a single maintainer. (May be used
          multiple times.)
          </p><ul class="itemizedlist">
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;user&gt;</code>: The account name of the user.
            </span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;role&gt;</code>: The role the user has
             during package development. (Can be either lead, developer,
             helper.)</span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;name&gt;</code>: The realname of the user.
            </span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;email&gt;</code>: The email address of the user.
            </span>
           </li>
          </ul>
         
        </li>
       </ul>
      
     </li>
     <li class="listitem">
      <p class="para">
       <code class="literal">&lt;release&gt;</code>: Information about the current
       release.
       </p><ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <code class="literal">&lt;version&gt;</code>: The version number of
          the release.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">&lt;state&gt;</code>: The state of the release.
          (Can be one of stable, beta, alpha, devel, or snapshot.)
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">&lt;date&gt;</code>: The date when the release has
          been rolled.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">&lt;license&gt;</code>: The <a href="faq.devs.html#faq.licenses" class="link">license</a>
          under which the code is available.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <code class="literal">&lt;notes&gt;</code>: Releasenotes
         </span>
        </li>
        <li class="listitem">
         <p class="para">
          <code class="literal">&lt;filelist&gt;</code>
          </p><ul class="itemizedlist">
           <li class="listitem">
            <span class="simpara"><code class="literal">&lt;file name=&quot;xxx&quot; role=&quot;xxx&quot; /&gt;</code>: Filename</span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;dir name=&quot;xxx&quot; [role=&quot;xxx&quot;]&gt;</code>: Name
             of a subdirectory. This subdirectory can again contain
             <code class="literal">&lt;file role=&quot;xxx&quot;&gt;</code> entries.
            </span>
           </li>
          </ul>
         
        </li>
        <li class="listitem">
         <p class="para">
          <code class="literal">&lt;deps&gt;</code>: List of dependencies of the
          package.
          </p><ul class="itemizedlist">
           <li class="listitem">
            <p class="para">
             <code class="literal">
              &lt;dep type=&quot;xxx&quot; rel=&quot;yyy&quot; optional=&quot;yes&quot;&gt;name&lt;/dep&gt;
             </code>: For more information about dependencies, please
             see
             <a href="developers.packagedef.intro.html#guide.developers.packagedef.deps" class="link">below</a>.
            </p>
           </li>
           </ul>
          
         </li>
       </ul>
      
     </li>
     <li class="listitem">
      <p class="para">
       <code class="literal">&lt;changelog&gt;</code>: Changelog-like information
       about the package.
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <code class="literal">&lt;release&gt;</code>
          </p><ul class="itemizedlist">
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;version&gt;</code>: Version of the
             specific release.
            </span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;state&gt;</code>: State of the specific
             release.
            </span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;date&gt;</code>: Date when the specific
             release has been rolled.
            </span>
           </li>
           <li class="listitem">
            <span class="simpara">
             <code class="literal">&lt;notes&gt;</code>: Changelog information
            </span>
           </li>
          </ul>
         
        </li>
       </ul>
      
     </li>
    </ul>

   </div>

   <div class="section" id="developers.packagedef.characters"><div class="info"><h2 class="title">Allowed characters</h2></div>
    
    <p class="para">
     The letters allowed inside elements are A-Z and a-z.
     Other characters, such as <code class="literal">Ã©</code>
     must use entities
     (in this case: <code class="literal">&amp;eacute;</code>).
    </p>
    <p class="para">
     If you create your package.xml files using the
     PEAR_PackageFileManager, upgrade your PEAR installation
     to version 1.4.0a2 or greater and you won&#039;t have
     to worry about this because the file manager takes care
     of this automatically.
    </p>
    <p class="para">
     If you write your package.xml files manually, you will
     need to enter the entities yourself.
     A list of the  most common entities can be found at:
     <a href="http://www.evolt.org/article/A_Simple_Character_Entity_Chart/17/21234/" class="link external">
      http://www.evolt.org/article/A_Simple_Character_Entity_Chart/17/21234/</a>
     If the characters you need aren&#039;t in that list, go to
     <a href="http://www.oasis-open.org/docbook/xmlcharent/0.1/index.shtml" class="link external">
      http://www.oasis-open.org/docbook/xmlcharent/0.1/index.shtml</a>
     and look at the other entity lists.
    </p>
   </div>

   <div class="section" id="developers.packagedef.validating"><div class="info"><h2 class="title">Validating</h2></div>
     

     <p class="para">
       In order to validate <code class="filename">package.xml</code> files one
       can use the <strong class="command">xmllint</strong> tool that comes with
       <a href="http://www.xmlsoft.org/" class="link external">libxml2</a>.
     </p>
     <p class="para">
       <strong class="command">
         xmllint --dtdvalid http://pear.php.net/dtd/package-1.0 --noout package.xml
       </strong>
     </p>
   </div>

   <div class="section" id="developers.packagedef.creating"><div class="info"><h2 class="title">Creating a package definition file</h2></div>
    
    

    <p class="para">
     </p><div class="example"><div class="info"><p><strong>Basic <code class="filename">package.xml</code></strong></p></div>
      
      <div class="xmlcode">
<pre class="xmlcode">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;
&lt;package version=&quot;1.0&quot;&gt;
 &lt;name&gt;Money_Fast&lt;/name&gt;
 &lt;summary&gt;Make money fast.&lt;/summary&gt;
 &lt;description&gt;
  This package helps you to make money pretty fast.
 &lt;/description&gt;
 &lt;license&gt;PHP License&lt;/license&gt;
 &lt;maintainers&gt;
  &lt;maintainer&gt;
   &lt;user&gt;foo&lt;/user&gt;
   &lt;name&gt;Joe Foo&lt;/name&gt;
   &lt;email&gt;foo@example.com&lt;/email&gt;
   &lt;role&gt;lead&lt;/role&gt;
  &lt;/maintainer&gt;
 &lt;/maintainers&gt;

 &lt;release&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;date&gt;2002-05-27&lt;/date&gt;
  &lt;state&gt;stable&lt;/state&gt;
  &lt;notes&gt;
   This is the first release.
  &lt;/notes&gt;
  &lt;filelist&gt;
   &lt;dir name=&quot;/&quot; baseinstalldir=&quot;Money&quot;&gt;
    &lt;file role=&quot;php&quot; name=&quot;Fast.php&quot; /&gt;
   &lt;/dir&gt;
  &lt;/filelist&gt;
 &lt;/release&gt;
&lt;/package&gt;</pre>

      </div>
     </div>
    
    <p class="para">
     This <code class="filename">package.xml</code> can serve as a template for
     you as it already contains all necessary elements. In most cases
     you only need to change the character data between the tags in order
     to use the example in your package.
    </p>
    <p class="para">
     </p><div class="example"><div class="info"><p><strong>Example for nested directories</strong></p></div>
      
      <div class="xmlcode">
<pre class="xmlcode">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;

[...]

 &lt;release&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;date&gt;2002-07-23&lt;/date&gt;
  &lt;state&gt;stable&lt;/state&gt;
  &lt;notes&gt;
   This is the first release.
  &lt;/notes&gt;
  &lt;filelist&gt;
   &lt;dir name=&quot;/&quot; baseinstalldir=&quot;Money&quot;&gt;
    &lt;file role=&quot;php&quot; name=&quot;Fast.php&quot; /&gt;
    &lt;dir name=&quot;Calculator&quot;&gt;
     &lt;file name=&quot;Calculator.php&quot; role=&quot;php&quot; /&gt;
     &lt;file name=&quot;Currency.php&quot; role=&quot;php&quot; /&gt;
     &lt;file name=&quot;Stocks.php&quot; role=&quot;php&quot; /&gt;
    &lt;/dir&gt;
    &lt;dir name=&quot;docs&quot;&gt;
     &lt;file name=&quot;README.txt&quot; role=&quot;doc&quot; /&gt;
     &lt;file name=&quot;tutorial.txt&quot; role=&quot;doc&quot; /&gt;
     &lt;dir name=&quot;examples&quot;&gt;
      &lt;file name=&quot;NASDAQ.php&quot; role=&quot;php&quot; /&gt;
      &lt;file name=&quot;DAX.php&quot; role=&quot;php&quot; /&gt;
     &lt;/dir&gt;
    &lt;/dir&gt;
   &lt;/dir&gt;
  &lt;/filelist&gt;
 &lt;/release&gt;
&lt;/package&gt;</pre>

      </div>
     </div>
    
    <p class="para">
     In this example you get to know a very handy feature: When you
     have a directory in your package that only contains files of
     the same type, you can add to role attribute even to the
     <code class="literal">&lt;dir&gt;</code> tag instead of adding it to every
     single <code class="literal">&lt;file&gt;</code> tag.
    </p>
    <p class="para">
     With the knowledge you&#039;ve acquired from this chapter you should now
     be able to produce a package definition file for your own package.
     If you still have questions concerning the topic, don&#039;t hesitate
     to ask on the <a href="mailto:pear-general@lists.php.net" class="link external">mailinglist</a>.
    </p>
   </div>

   <div class="section" id="developers.packagedef.roles"><div class="info"><h2 class="title">The file roles</h2></div>
    
    <p class="para">
     The <code class="literal">role</code>-attribute in the &lt;file&gt; tag
     defines what type the file has and in which location it should
     be installed.
     </p><table class="doctable table"><caption>Possible values</caption>
      
      
       <thead>
        <tr>
         <th>Value</th>
         <th class="empty">&nbsp;</th>
         <th>Destination dir</th>
        </tr>

       </thead>

       <tbody class="tbody">

        <tr>
         <td>php</td>
         <td>PHP source file</td>
         <td>the directory is determined by the package name</td>
        </tr>


        <tr>
         <td>ext</td>
         <td>Extension, dynamically loadable library</td>
         <td>the PHP extension directory or
          <strong class="constant">PHP_PEAR_EXTENSION_DIR</strong>
          if defined</td>
        </tr>


        <tr>
         <td>doc</td>
         <td>Documentation file</td>
         <td>{PEAR_documentation_dir}/Package_Name/</td>
        </tr>


        <tr>
         <td>data</td>
         <td>Package related data files (graphics, data tables etc)</td>
         <td>{PEAR_data_dir}/Package_Name/</td>
        </tr>


        <tr>
         <td>test</td>
         <td>Package related test files (unit-tests etc)</td>
         <td>{PEAR_test_dir}/Package_Name/</td>
        </tr>


        <tr>
         <td>script</td>
         <td>Package related shell scripts</td>
         <td>the PHP binary directory or
          <strong class="constant">PHP_PEAR_BIN_DIR</strong>
          if defined</td>
        </tr>


        <tr>
         <td>src and extsrc</td>
         <td>C or C++ source code</td>
         <td>not copied directly - used to build a
         extension</td>
        </tr>


       </tbody>
      
     </table>

    

   </div>
   <div class="section" id="guide.developers.packagedef.deps"><div class="info"><h2 class="title">Defining Dependencies</h2></div>
    

    <p class="para">
     The PEAR Package Manager supports checking for
     different system capabilities. You define those
     dependencies with the <code class="literal">&lt;dep&gt;</code> tag:
     </p><div class="example"><div class="info"><p><strong><code class="filename">package.xml</code> with dependencies</strong></p></div>
      
      <div class="example-contents"><p>
       The following example shows how to specify dependencies for
       PHP 4.3.0 or better and <strong class="classname">XML_Parser</strong> 1.0.
      </p></div>
      <div class="xmlcode">
       <pre class="xmlcode">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;

[...]
 &lt;/release&gt;
 &lt;deps&gt;
  &lt;dep type=&quot;php&quot; rel=&quot;ge&quot; version=&quot;4.3.0&quot; /&gt;
  &lt;dep type=&quot;pkg&quot; rel=&quot;has&quot; version=&quot;1.0&quot;&gt;XML_Parser&lt;/dep&gt;
 &lt;/deps&gt;
&lt;/package&gt;</pre>

      </div>
     </div>
    
    <div class="section"><div class="info"><h3 class="title">The <code class="literal">type</code>-attribute</h3></div>
     
     <p class="para">
      The following <code class="literal">type</code>s are supported:
     </p><table class="doctable table"><caption>type values</caption>
      
      
       <thead>
        <tr>
         <th>Value</th>
         <th class="empty">&nbsp;</th>
         <th>Meaning</th>
         <th>Example</th>
        </tr>

       </thead>

       <tbody class="tbody">

        <tr>
         <td>pkg</td>
         <td>Package</td>
         <td>depends on a certain Package</td>
         <td>"<span class="quote">HTML_Flexy</span>"</td>
        </tr>


        <tr>
         <td>ext</td>
         <td>Extension</td>
         <td>depends on a certain PHP extension</td>
         <td>"<span class="quote">curl</span>"</td>
        </tr>


        <tr>
         <td>php</td>
         <td>PHP</td>
         <td>depends on a certain PHP version</td>
         <td>"<span class="quote">4.2</span>"</td>
        </tr>


        <tr>
         <td>prog</td>
         <td>Program</td>
         <td>
          depends on a certain Program available in the
          system path.  This is not supported in the PEAR installer.
         </td>
         <td>"<span class="quote">latex</span>"</td>
        </tr>


        <tr>
         <td>os</td>
         <td>Operating System</td>
         <td>depends on a certain OS version</td>
         <td>"<span class="quote">Linux</span>"</td>
        </tr>


        <tr>
         <td>sapi</td>
         <td>Server API</td>
         <td>depends on a certain Server API.  This is not supported in the PEAR installer.</td>
         <td>"<span class="quote">Apache</span>"</td>
        </tr>


        <tr>
         <td>zend</td>
         <td>Zend</td>
         <td>depends on a certain version of the Zend API.
          This is not supported in the PEAR installer.</td>
         <td>"<span class="quote">2</span>"</td>
        </tr>

       </tbody>
      
     </table>


    
    <blockquote class="warning">

     <p class="simpara">
      The DTD for the package definition file supports
      further types, but those are not supported yet.
     </p>
    </blockquote>

   </div>
   <div class="section"><div class="info"><h3 class="title">The <code class="literal">rel</code>-attribute</h3></div>
    
    <p class="para">
     The <code class="literal">rel</code>-attribute
     defines the relationship between the existing
     capability and the required.
    </p>
     <table class="doctable table"><caption>rel values</caption>
      
      
       <thead>
        <tr>
         <th>Value</th>
         <th class="empty">&nbsp;</th>
         <th>Meaning</th>
         <th>Can be used with</th>
        </tr>

       </thead>

       <tbody class="tbody">

        <tr>
         <td>has</td>
         <td>has</td>
         <td>
          the existing capability must have the
          requirement - version-attribute is
          ignored
         </td>
         <td>pkg, ext, php, prog, os, sapi, zend</td>
        </tr>


        <tr>
         <td>eq</td>
         <td>equal</td>
         <td>
          the existing capability must exactly match the
          version value
         </td>
         <td>pkg, ext, php, prog, os, sapi, zend</td>
        </tr>


        <tr>
         <td>lt</td>
         <td>less than</td>
         <td>
          the existing capability must be less than the version value
         </td>
         <td>pkg, ext, php, zend</td>
        </tr>


        <tr>
         <td>le</td>
         <td>less than or equal</td>
         <td>
          the existing capability must be less than or equal to the
          version value
         </td>
         <td>pkg, ext, php, zend</td>
        </tr>


        <tr>
         <td>gt</td>
         <td>greater than</td>
         <td>
          the existing capability must be greater than the version
          value
         </td>
         <td>pkg, ext, php, zend</td>
        </tr>


        <tr>
         <td>ge</td>
         <td>greater than or equal</td>
         <td>
          the existing capability must greater than or equal to the
          version value
         </td>
         <td>pkg, ext, php, zend</td>
        </tr>


        <tr>
         <td>not</td>
         <td>conflicting dependency</td>
         <td>
          the dependency conflicts with the package, the two cannot co-exist.
          version is ignored.
         </td>
         <td>ext, php</td>
        </tr>


       </tbody>
      
     </table>

     <p class="para">
      <code class="literal">Has</code> will be used if no other value has been
      defined.  Note that rel is required in PEAR 1.4.0 and newer.
     </p>
    </div>
    <div class="section"><div class="info"><h3 class="title">The <code class="literal">version</code>-attribute</h3></div>
     

     <p class="para">
      The attribute <code class="literal">version</code> defines the version
      that is used to compare.
     </p>
    </div>
    <div class="section"><div class="info"><h3 class="title">The <code class="literal">optional</code>-attribute</h3></div>
     

     <p class="para">
      The attribute <code class="literal">optional</code> can be used when
      a dependency is not required but having the package installed
      can bring enhanced functionalities.  The only legal values are &quot;yes&quot;
      and &quot;no&quot;.  If the optional attribute is not present, a dependency is
      required.
      When <code class="literal">optional=&quot;yes&quot;</code> is used, this attribute
      will result in installation messages similar to the following messages:
     </p>
    <p class="para">
     </p><pre class="screen">
      <strong class="userinput"><code>
$ pear install &lt;package&gt;
Optional dependencies:
Package `XML_Tree&#039; is recommended to utilize some features.
Package `MDB&#039; is recommended to utilize some features.
      </code></strong>
     </pre>

    
    </div>
   </div>
  </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="developers.packagedef.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="developers.packagedef.html">package.xml</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="coding-standards.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">package.xml</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Coding Standards</td>
  </tr>
 </table>
</div>
</body></html>
