<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>XML encoding</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.webservices.services-ebay.html" title="Services_Ebay" />
  <link rel="prev" href="package.webservices.services-ebay.getting-started.html" title="Getting started" />
  <link rel="next" href="package.webservices.services-ebay.error-handling.html" title="Error Handling" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">XML encoding</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.webservices.services-ebay.getting-started.html" title="Getting started">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.webservices.services-ebay.error-handling.html" title="Error Handling">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="refentry" id="package.webservices.services-ebay.encoding">
   
    <h1 class="refname">XML encoding</h1>
    <div class="refnamediv">XML encoding &ndash; XML encoding in Services_Ebay</div>

  
  <div class="refsection" id="package.webservices.services-ebay.encoding.refsect1"><div class="info"><h1>XML encoding in Services_Ebay</h1>
</div>
   
   <p class="para">
    Since mid-2005, the eBay API will only accept UTF-8 encoded XML-documents. As encoding
    all data to UTF-8 is tedious, Services_Ebay will take care of this for you. All you need
    to do is specify the encoding you want to use in your script when creating a session object.
   </p>
   <div class="example"><div class="info"><p><strong>Using ISO-8859-1 in your script</strong></p></div>
    
    <div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Services/Ebay.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;pass&nbsp;some&nbsp;authentication&nbsp;data<br /></span><span style="color: #0000BB">$session&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Services_Ebay</span><span style="color: #007700">::</span><span style="color: #0000BB">getSession</span><span style="color: #007700">(</span><span style="color: #0000BB">$devId</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$appId</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$certId</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$session</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setToken</span><span style="color: #007700">(</span><span style="color: #0000BB">$token</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;new&nbsp;proxy&nbsp;object<br /></span><span style="color: #0000BB">$ebay&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Ebay</span><span style="color: #007700">(</span><span style="color: #0000BB">$session</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Services_Ebay</span><span style="color: #007700">::</span><span style="color: #0000BB">loadModel</span><span style="color: #007700">(</span><span style="color: #DD0000">'Item'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$session</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Category&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">57882</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'International&nbsp;Item'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Description&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'This&nbsp;description&nbsp;contains&nbsp;Umlaut&nbsp;characters&nbsp;like&nbsp;Ä,&nbsp;ü&nbsp;and&nbsp;ß'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Location&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'At&nbsp;my&nbsp;home'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">MinimumBid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'532.0'</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">VisaMaster&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ShippingType&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">CheckoutDetailsSpecified&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Country&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'US'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetShipToLocations</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'US'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'DE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'GB'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addShippingServiceOption</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'US'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$ebay</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">AddItem</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  </div>
  <p class="para">
   The umlaut characters contained in the description of the item will be automatically converted
   to UTF-8 when the XML-document is created. Furthermore the result document which is returned by
   the eBay API will be decoded again to ISO-8859-1 so you do not have to worry about UTF-8 at all.
  </p>
  <p class="para">
   Of course, it is also possible to supply UTF-8 encoded data to <strong class="classname">Services_Ebay</strong>.
   All you have to do is change the encoding type, when creating the session object.
  </p>
   <div class="example"><div class="info"><p><strong>Using UTF-8 in your script</strong></p></div>
    
    <div class="phpcode">
    <code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'Services/Ebay.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;pass&nbsp;some&nbsp;authentication&nbsp;data<br /></span><span style="color: #0000BB">$session&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Services_Ebay</span><span style="color: #007700">::</span><span style="color: #0000BB">getSession</span><span style="color: #007700">(</span><span style="color: #0000BB">$devId</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$appId</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$certId</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$session</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setToken</span><span style="color: #007700">(</span><span style="color: #0000BB">$token</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;new&nbsp;proxy&nbsp;object<br /></span><span style="color: #0000BB">$ebay&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Services_Ebay</span><span style="color: #007700">(</span><span style="color: #0000BB">$session</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Services_Ebay</span><span style="color: #007700">::</span><span style="color: #0000BB">loadModel</span><span style="color: #007700">(</span><span style="color: #DD0000">'Item'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$session</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Category&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">57882</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'International&nbsp;Item'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Description&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">utf8_encode</span><span style="color: #007700">(</span><span style="color: #DD0000">'This&nbsp;description&nbsp;contains&nbsp;Umlaut&nbsp;characters&nbsp;like&nbsp;Ä,&nbsp;ü&nbsp;and&nbsp;ß'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Location&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'At&nbsp;my&nbsp;home'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">MinimumBid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'532.0'</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">VisaMaster&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ShippingType&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">CheckoutDetailsSpecified&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Country&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'US'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetShipToLocations</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'US'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'DE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'GB'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addShippingServiceOption</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'US'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$ebay</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">AddItem</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
   </div>
  </div>
  <p class="para">
   In this example you are using <strong class="function">utf8_encode()</strong> to encode the data prior
   to passing it to <strong class="classname">Services_Ebay</strong>. To avoid duplicated encoding, you
   need to set the encoding to UTF-8.
  </p>
  </div>

</div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.webservices.services-ebay.getting-started.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.webservices.services-ebay.html">Services_Ebay</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.webservices.services-ebay.error-handling.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Getting started</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">Error Handling</td>
  </tr>
 </table>
</div>
</body></html>
