<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>Getting commits</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="generator" content="PhD" />

  <link rel="start" href="index.html" title="PEAR Manual" />
  <link rel="up" href="package.tools.versioncontrol-git.tutorial.html" title="Tutorial" />
  <link rel="prev" href="package.tools.versioncontrol-git.tutorial.initialize.html" title="Initialize a new repository" />
  <link rel="next" href="package.tools.versioncontrol-git.tutorial.commit-object.html" title="The commit object (VersionControl_Git_Object_Commit)" />
 </head>
 <body>
<div class="navheader">
 <table style="width: 100%;">
  <tr><th colspan="3" style="text-align: center">Getting commits</th></tr>
  <tr>
   <td style="width: 40%; text-align: left;"><a href="package.tools.versioncontrol-git.tutorial.initialize.html" title="Initialize a new repository">Prev</a></td>
   <td style="width: 20%;"></td>
   <td style="width: 40%; text-align: right;"><a href="package.tools.versioncontrol-git.tutorial.commit-object.html" title="The commit object (VersionControl_Git_Object_Commit)">Next</a></td>
  </tr>
 </table>
 <hr/>
</div>
<div id="body">
<div class="section" id="package.tools.versioncontrol-git.tutorial.getting-commits">
      <div class="info"><h1>Getting commits</h1>
</div>

      <p class="para">The commit object in Git is provided as VersionControl_Git_Object_Commit.</p>
      <p class="para">There are some ways to get a list of VersionControl_Git_Object_Commit objects.</p>

      <div class="section" id="package.tools.versioncontrol-git.tutorial.getting-commits.getcommit">
        <div class="info"><h2 class="title">Use VersionControl_Git::getCommits()</h2></div>

        <p class="para">You can get commits by calling VersionControl_Git::getCommits().</p>
        <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">());<br /></span><span style="color: #FF8000">/*<br />results:<br /><br />array(100)&nbsp;{<br />&nbsp;&nbsp;[0]=&gt;<br />&nbsp;&nbsp;object(VersionControl_Git_Object_Commit)#3&nbsp;(9)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;:<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;[1]=&gt;<br />&nbsp;&nbsp;object(VersionControl_Git_Object_Commit)#6&nbsp;(9)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;:<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;:<br />*/</span>
</span>
</code>
        </div>

        <p class="para">Calling without arguments, VersionControl_Git::getCommits() returns a list of a hundred VersionControl_Git_Object_Commit instances from master branch. You can specify branch name, commit object name, tag name, tree object name and an instance of VersionControl_Git_Object.</p>

        <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;from&nbsp;master&nbsp;branch<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;specify&nbsp;stable&nbsp;branch<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">(</span><span style="color: #DD0000">'stable'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;specify&nbsp;object&nbsp;name<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">(</span><span style="color: #DD0000">'6c8284e4902c3adaf356adeed40d8bda715b73a0'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;specify&nbsp;tag&nbsp;name<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">(</span><span style="color: #DD0000">'v1.0'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;specify&nbsp;an&nbsp;instance&nbsp;of&nbsp;VersionControl_Git_Object<br /></span><span style="color: #0000BB">$commits&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">(</span><span style="color: #0000BB">$commits</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);</span>
</span>
</code>
        </div>

        <p class="para">You can specify the maximum number of commits by the second argument.</p>
        <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;1000&nbsp;commits&nbsp;from&nbsp;master&nbsp;branch<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">(</span><span style="color: #DD0000">'master'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">);</span>
</span>
</code>
        </div>

        <p class="para">You can specify the starting point of fetching by the third argument.</p>
        <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;100&nbsp;commits&nbsp;from&nbsp;master&nbsp;branch&nbsp;(starting&nbsp;at&nbsp;100&nbsp;th&nbsp;commit)<br /></span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCommits</span><span style="color: #007700">(</span><span style="color: #DD0000">'master'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">);</span>
</span>
</code>
        </div>
        </div>

        <div class="section" id="package.tools.versioncontrol-git.tutorial.getting-commits.rev-list-fetcher">
          <div class="info"> <h2 class="title">Use VersionControl_Git_Util_RevListFetcher</h2> </div>

          <p class="para">The VersionControl_Git_Util_RevListFetcher is utility class for wrapping &quot;git-rev-list&quot; command. So you can use any feature of &quot;git-rev-list&quot; by this. VersionControl_Git::getCommits() provides by using VersionControl_Git_Util_RevListFetcher.</p>
          <p class="para">You can use VersionControl_Git_Util_RevListFetcher to specify your VersionControl_Git instance to the constructor</p>
          <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fetcher&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git_Util_RevListFetcher</span><span style="color: #007700">(</span><span style="color: #0000BB">$git</span><span style="color: #007700">);</span>
</span>
</code>
          </div>
          <p class="para">The VersionControl_Git provides the getRevListFetcher() convenience method. Use this normally.</p>
          <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fetcher&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRevListFetcher</span><span style="color: #007700">();</span>
</span>
</code>
          </div>
          <p class="para">After specifying target (branch name, commit name, tree name, etc) and options, you can get an array of VersionControl_Git_Object_Commit by calling the fetch() method.</p>
          <div class="phpcode">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">require_once&nbsp;</span><span style="color: #DD0000">'VersionControl/Git.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$git&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">VersionControl_Git</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/repository'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$git</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRevListFetcher</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">target</span><span style="color: #007700">(</span><span style="color: #DD0000">'master'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'max-count'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'grep'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'initial'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">setOption</span><span style="color: #007700">(</span><span style="color: #DD0000">'date'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'3&nbsp;hours&nbsp;ago'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">();</span>
</span>
</code>
          </div>

          </div>
        </div>
</div>
<div class="navfooter">
 <hr />
 <table style="width: 100%;">
  <tr>
   <td style="width: 40%; text-align: left;"><a accesskey="p" href="package.tools.versioncontrol-git.tutorial.initialize.html">Prev</a></td>
   <td style="width: 20%; text-align: center;"><a accesskey="h" href="package.tools.versioncontrol-git.tutorial.html">Tutorial</a></td>
   <td style="width: 40%; text-align: right;"><a accesskey="n" href="package.tools.versioncontrol-git.tutorial.commit-object.html">Next</a></td>
  </tr>
  <tr>
   <td style="text-align: left; vertical-align: top;">Initialize a new repository</td>
   <td style="text-align: center;"><a accesskey="h" href="index.html">PEAR Manual</a></td>
   <td style="text-align: right; vertical-align: top;">The commit object (VersionControl_Git_Object_Commit)</td>
  </tr>
 </table>
</div>
</body></html>
