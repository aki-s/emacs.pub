<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Java Management Extensions API Enhancements</title><link rel="stylesheet" href="../../../technotes/css/guide.css" />
</head>
<body>
<!-- STATIC HEADER -->

<table width="100%"><tr><td valign="bottom" align="left"><img src="../../../images/javalogo.gif"></td><td valign="bottom" align="right"><a href="../../../index.html"><font size="-1">Documentation Contents</font></a></td></tr></table><table summary="layout" border="0" width="100%">
<tr>
<td align="center">
<h1>JMX API Enhancements</h1>
</td>
</tr>
</table>
<!-- ====================== Body text begins here ====================== -->
<blockquote>
<p>The Java Management Extensions (JMX) technology became a part of
the Java platform in the Java 2 Platform, Standard Edition (J2SE)
5.0. The most significant enhancements that have been made to the
JMX API in the Java Platform, Standard Edition (Java SE) 6 are
listed below.</p>
<ul>
<li>The JMX API now fully supports Generics.</li>
<li>MXBeans have been added. MXBeans are MBeans that provide a
convenient way to bundle related values together without requiring
clients to be specially configured to handle the bundles. A defined
set of MXBeans already existed in the J2SE 5.0 platform, but Java
SE 6 introduces an API to allow you to program your own custom
MXBeans. See <a href=
"tutorial/essential.html#wp1054551">Introducing MXBeans</a> in the
JMX Technology Tutorial for information.</li>
<li>MBean Descriptors have been added. Descriptors allow you to
give additional information about MBeans to management clients. See
<a href="tutorial/essential.html#wp1055639">MBean Descriptors</a>
in the JMX Technology Tutorial for information.</li>
<li>A new class, <a href=
"../../../api/javax/management/JMX.html">javax.management.JMX</a>,
has been added to house constants and static methods.</li>
<li>Improvements have been made to the <a href=
"../../../api/javax/management/monitor/package-summary.html">JMX
Monitor API</a> to support complex types. Previously, only
attributes of simple types could be monitored, but often, the value
to be monitored is buried inside a more complex type. See the
<a href="JMX_1_4_specification.pdf">JMX Specification, version
1.4</a>, for details of the behavior of monitors.</li>
<li><code>key=*</code> wildcards are now supported in <a href=
"../../../api/javax/management/ObjectName.html">ObjectName</a>.
Previously, <code>"domain:key1=value1,*"</code> could be used to
match MBeans that have <code>key1=value1</code> in their name, but
<code>"domain:key1=*"</code> could not be used to match MBeans that
have <code>key1</code> in their name. This is now possible.</li>
</ul>
<p>The following is the full list of changes made to the JMX API in
the Java SE 6 platform. Where relevant, links to the related bug
report or request for enhancement (RFE) are included.</p>
<ul>
<li><a href="#Generic">Generification</a></li>
<li><a href="#MXBeans">MXBeans</a></li>
<li><a href="#Descriptors">Descriptors</a></li>
<li><a href="#JMX">New class javax.management.JMX</a></li>
<li><a href="#Notification">NotificationBroadcaster and
NotificationBroadcasterSupport</a></li>
<li><a href="#ObjectName">ObjectName</a></li>
<li><a href="#Standard">Standard MBeans</a></li>
<li><a href="#Dynamic">Dynamic MBeans</a></li>
<li><a href="#Model">Model MBeans</a></li>
<li><a href="#Open">Open MBeans</a></li>
<li><a href="#Monitor">Monitor Service</a></li>
<li><a href="#Timer">Timer Service</a></li>
<li><a href="#MLet">MLet Service</a></li>
<li><a href="#Relation">Relation Service</a></li>
<li><a href="#Query">Query</a></li>
<li><a href="#MBSIH">MBeanServerInvocationHandler</a></li>
<li><a href="#Serial">Serial forms</a></li>
<li><a href="#Permissions">Permission checks</a></li>
<li><a href="#Exceptions">MBean RuntimeException handling</a></li>
<li><a href="#remote">JMX Remote API Enhancements</a></li>
</ul>
<h3 id="Generic">Generification</h3>
<p>Constraints due to the integration of version 1.2 of the JMX API
in both J2EE 1.4 and J2SE 5.0 meant that it could not be generified
in the latter. This is now rectified (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4847959">4847959</a>).
Most of the generification consists of application of the
generified collections API (<code>java.util.List</code>, and so
on). So for example, where <code>MBeanServer.queryNames</code>
previously returned just <code>Set</code>, it now returns
<code>Set&lt;ObjectName&gt;</code>. The <a href=
"../../../api/javax/management/openmbean/OpenType.html"><code>javax.management.openmbean.OpenType</code></a>
class and its subclasses have also been generified to allow type
constraints to be expressed. <a href=
"../../../api/javax/management/openmbean/OpenMBeanAttributeInfoSupport.html">
<code>OpenMBeanAttributeInfoSupport</code></a> and <a href=
"../../../api/javax/management/openmbean/OpenMBeanParameterInfoSupport.html">
<code>OpenMBeanParameterInfoSupport</code></a> acquire type
constraints in their constructors such that the default or legal
values must be of the correct type. The <a href=
"../../../api/javax/management/StandardMBean.html#StandardMBean(T,%20java.lang.Class)">
<code>StandardMBean</code> constructor</a> likewise acquires a type
constraint so that the resource parameter must implement the
interface specified by the interface parameter.</p>
<p>The following classes and methods have been updated:</p>
<ul>
<li><a href=
"../../../api/javax/management/MBeanServer.html#queryMBeans(javax.management.ObjectName,%20javax.management.QueryExp)">
MBeanServer[Connection].queryMBeans</a> returns
Set&lt;ObjectInstance&gt;</li>
<li><a href=
"../../../api/javax/management/MBeanServer.html#queryNames(javax.management.ObjectName,%20javax.management.QueryExp)">
MBeanServer[Connection].queryNames</a> returns
Set&lt;ObjectName&gt;.</li>
<li><a href=
"../../../api/javax/management/AttributeChangeNotificationFilter.html#getEnabledAttributes()">
AttributeChangeNotificationFilter.getEnabledAttributes</a> returns
Vector&lt;String&gt;</li>
<li><a href=
"../../../api/javax/management/AttributeList.html#">AttributeList</a>
extends ArrayList&lt;Object&gt;</li>
<li><a href=
"../../../api/javax/management/MBeanServerFactory.html#findMBeanServer(java.lang.String)">
MBeanServerFactory.findMBeanServer</a> returns
ArrayList&lt;MBeanServer&gt;</li>
<li><a href=
"../../../api/javax/management/NotificationFilterSupport.html#getEnabledTypes()">
NotificationFilterSupport.getEnabledTypes</a> returns
Vector&lt;String&gt;</li>
<li>The <a href=
"../../../api/javax/management/ObjectName.html#">ObjectName</a>
class's constructor and getInstance method that formerly took a
Hashtable now take a Hashtable&lt;String,String&gt;</li>
<li><a href=
"../../../api/javax/management/ObjectName.html#getKeyPropertyList()">
ObjectName.getKeyPropertyList</a> returns
Hashtable&lt;String,String&gt;</li>
<li><a href=
"../../../api/javax/management/openmbean/CompositeType.html#keySet()">
openmbean.CompositeType.keySet</a> returns Set&lt;String&gt;</li>
<li><a href=
"../../../api/javax/management/openmbean/TabularType.html#getIndexNames()">
TabularType.getIndexNames</a> returns List&lt;String&gt;</li>
<li><a href=
"../../../api/javax/management/relation/Relation.html#getReferencedMBeans()">
Relation.getReferencedMBeans</a> returns
Map&lt;ObjectName,ArrayList&lt;String&gt;&gt;</li>
<li>In <a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#">
RelationServiceMBean</a>:
<ul>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#findAssociatedMBeans(javax.management.ObjectName,%20java.lang.String,%20java.lang.String)">
findAssociatedMBeans</a> returns
Map&lt;ObjectName,ArrayList&lt;String&gt;&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#findRelationsOfType(java.lang.String)">
findRelationsOfType</a> returns List&lt;String&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#getRole(java.lang.String,%20java.lang.String)">
getRole</a> returns List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#findReferencingRelations(javax.management.ObjectName,%20java.lang.String,%20java.lang.String)">
findReferencingRelations</a> returns
Map&lt;String,ArrayList&lt;String&gt;&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#getAllRelationIds()">
getAllRelationIds</a> returns List&lt;String&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#getAllRelationTypeNames()">
getAllRelationTypeNames</a> returns List&lt;String&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#getRoleInfos(java.lang.String)">
getRoleInfos</a> returns List&lt;RoleInfo&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#getReferencedMBeans(java.lang.String)">
getReferencedMBeans</a> returns
Map&lt;ObjectName,ArrayList&lt;String&gt;&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#sendRelationRemovalNotification(java.lang.String,%20java.util.List)">
sendRelationRemovalNotification</a> takes
List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#updateRoleMap(java.lang.String,%20javax.management.relation.Role,%20java.util.List)">
updateRoleMap</a> takes List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#sendRoleUpdateNotification(java.lang.String,%20javax.management.relation.Role,%20java.util.List)">
sendRoleUpdateNotification</a> takes List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#sendRoleUpdateNotification(java.lang.String,%20javax.management.relation.Role,%20java.util.List)">
sendRoleUpdateNotification</a> takes List&lt;ArrayList&gt;</li>
</ul>
</li>
<li><a href=
"../../../api/javax/management/relation/RelationType.html#getRoleInfos()">
RelationType.getRoleInfos</a> returns List&lt;RoleInfo&gt;</li>
<li><a href=
"../../../api/javax/management/relation/MBeanServerNotificationFilter.html#getEnabledObjectNames()">
MBeanServerNotificationFilter.get{Enabled|Disabled}ObjectNames</a>
returns Vector&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationNotification.html#">
RelationNotification</a>:
<ul>
<li>constructor arg theUnregMBeanList is now
List&lt;ObjectName&gt;</li>
<li>constructor args the{New|Old}RoleValue are now
List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationNotification.html#getMBeansToUnregister()">
getMBeansToUnregister</a> returns List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RelationNotification.html#getNewRoleValue()">
get{Old|New}RoleValue</a> returns List&lt;ObjectName&gt;</li>
</ul>
</li>
<li><a href=
"../../../api/javax/management/relation/RelationService.html#">RelationService</a>
methods specified by RelationServiceMBean have received the same
changes as <a href=
"../../../api/javax/management/relation/RelationServiceMBean.html#">
RelationServiceMBean</a></li>
<li><a href=
"../../../api/javax/management/relation/RelationSupport.html#">RelationSupport</a>
methods specified by Relation have received the same changes as
Relation.</li>
<li><a href=
"../../../api/javax/management/relation/RelationTypeSupport.html#getRoleInfos()">
RelationTypeSupport.getRoleInfos</a> returns
List&lt;RoleInfo&gt;</li>
<li><a href=
"../../../api/javax/management/relation/Role.html#">Role</a>
constructor and <a href=
"../../../api/javax/management/relation/Role.html#getRoleValue()">getRoleValue</a>
use List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RoleList.html#">RoleList</a>
extends ArrayList&lt;Object&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RoleUnresolved.html#">RoleUnresolved</a>
uses List&lt;ObjectName&gt;</li>
<li><a href=
"../../../api/javax/management/relation/RoleUnresolvedList.html#">RoleUnresolvedList</a>
extends ArrayList&lt;Object&gt;</li>
<li><a href=
"../../../api/javax/management/timer/Timer.html#">Timer[MBean].get[All]NotificationIDs</a>
returns Vector&lt;Integer&gt;</li>
</ul>
<p>MLetMBean and MLet's getMBeansFromURL methods cannot use
generics because the elements of the returned Set can be either
ObjectInstance or Throwable. AttributeList, RoleList, and
RoleUnresolvedList extend ArrayList&lt;Object&gt; rather than the
more natural ArrayList&lt;Attribute&gt; etc., because the latter
would introduce an inconsistency due to the existing add and set
methods which return void rather than boolean and Object,
respectively.</p>
<p>New methods <a href=
"../../../api/javax/management/AttributeList.html#asList()">AttributeList.asList()</a>,
<a href=
"../../../api/javax/management/relation/RoleList.html#asList()">RoleList.asList()</a>,
and <a href=
"../../../api/javax/management/relation/RoleUnresolvedList.html#asList()">
RoleUnresolvedList.asList()</a> produce a <code>List</code> view of
the underlying object with the correct type parameter. A new
constructor <a href=
"../../../api/javax/management/AttributeList.html#AttributeList(java.util.List)">
AttributeList(List&lt;Attribute&gt;)</a> converts in the opposite
direction (RoleList and RoleUnresolvedList already had such
constructors).</p>
<p>A detailed <a href=
"http://weblogs.java.net/blog/emcmanus/archive/generification.txt">generification
rationale</a> details the choices that were made during
generification of the API.</p>
<h3 id="MXBeans">MXBeans</h3>
<p>Previously, portable modelling of complex types had to be
performed using Open MBeans, which are difficult to use. A feature,
MXBeans, was added in J2SE 5 to make modelling with complex types
easier. In this release, <b>MXBeans have been generalized</b>
(<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6175517">6175517</a>).
MXBeans are a special kind of Standard MBean that provide a
non-identity mapping between types in the Java interface and types
in the management interface. In the same way as for Standard
MBeans, MXBeans contain attributes that are defined by getX and
setX methods, and other methods are operations. With MXBeans,
however, the MBean that is actually registered in the MBean Server
does not have exactly the same types for its attributes and
operation parameters and return values. Instead, each type that
occurs in the MXBean interface is converted to a type built from
the fixed set defined in <code>javax.management.openmbean</code>.
The MBean that is actually registered in the MBean Server is an
Open MBean that references these converted types. When it is
accessed, it converts values between the original MXBean interface
type and the converted Open MBean type.</p>
<p>In this way, a client can access an MXBean without needing to
know any model-specific types that might be referenced in the
MXBean interface. The client only needs to know the standard Open
MBean types.</p>
<p>The complete MXBean specification appears in the documentation
for the annotation <a href=
"../../../api/javax/management/MXBean.html"><code>@MXBean</code></a>.</p>
<p>The introduction of MXBeans has added or affected the following
classes and interfaces:</p>
<ul>
<li><a href=
"../../../api/javax/management/StandardMBean.html#">javax.management.StandardMBean</a>
can now be used for MXBeans as well as Standard MBeans.</li>
<li><a href=
"../../../api/javax/management/MBeanServerInvocationHandler.html#">javax.management.MBeanServerInvocationHandler</a>:
can now be used for MXBean proxies as well as Standard MBean
proxies.</li>
<li><a href=
"../../../api/javax/management/JMX.html">javax.management.JMX</a>:
new class, with 4 new methods.</li>
<li><a href=
"../../../api/javax/management/MXBean.html">javax.management.MXBean</a>:
new annotation.</li>
<li><a href=
"../../../api/javax/management/openmbean/CompositeDataInvocationHandler.html">
javax.management.openmbean.CompositeDataInvocationHandler</a> : new
class, with 2 new methods.</li>
<li><a href=
"../../../api/javax/management/openmbean/CompositeDataView.html">javax.management.openmbean.CompositeDataView</a>:
new interface, with one new method.</li>
<li>Class <a href=
"../../../api/javax/management/StandardMBean.html"><code>StandardMBean</code></a>
can be used to make an MXBean. Also, this class now implements
<a href=
"../../../api/javax/management/MBeanRegistration.html"><code>MBeanRegistration</code></a>.
This allows it to track the name under which an MXBean is
registered, in order to handle inter-MXBean references
correctly.</li>
</ul>
<h3 id="Descriptors">Descriptors</h3>
<p>Descriptors can be used to supply additional metadata about an
MBean. Previously, only Model MBeans supported Descriptors. In this
release, <b>support for Descriptors has been extended to all types
of MBean</b> (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6204469">6204469</a>).
In addition to the general utility of metadata for all types of
MBeans, the change removes certain gratuitous differences between
various kinds of MBeans. In particular, it makes it feasible to
have an MBean that is both an Open MBean and a Model MBean.</p>
<p>For most constructors in the classes MBean*Info (MBeanInfo,
MBeanAttributeInfo, etc), a parallel constructor has been added
with the same parameters plus an additional <a href=
"../../../api/javax/management/Descriptor.html">Descriptor</a>
parameter. Likewise for OpenMBean*InfoSupport.</p>
<p>Open MBeans return information about default and legal values
from the <code>getDefaultValue()</code>,
<code>getLegalValues()</code>, <code>getMaxValue()</code>,
<code>getMinValue()</code> methods of <a href=
"../../../api/javax/management/openmbean/OpenMBeanParameterInfo.html">
<code>OpenMBeanParameterInfo</code></a> and <a href=
"../../../api/javax/management/openmbean/OpenMBeanAttributeInfo.html">
<code>OpenMBeanAttributeInfo</code></a>. <b>This information is now
also present in the corresponding Descriptors, and other types of
MBean can also return the information in their Descriptors</b>.</p>
<p><b>A parent interface of DescriptorAccess called <a href=
"../../../api/javax/management/DescriptorRead.html">javax.management.DescriptorRead</a>
has been added</b>, that contains the getDescriptor method but not
the setDescriptor method. The MBean*Info classes implement
DescriptorRead.</p>
<p><b>A second, immutable implementation of the Descriptor
interface called <a href=
"../../../api/javax/management/ImmutableDescriptor.html">javax.management.ImmutableDescriptor</a>
has also been added</b>. This preserves the property that all
MBeans except Model MBeans have immutable metadata.</p>
<p><b>A number of new conventional Descriptor items ("fields") are
documented in the <a href=
"../../../api/javax/management/Descriptor.html"><code>Descriptor</code></a>
specification</b> (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6254721">6254721</a>).
Some of these items must be understood by the implementation (in
italics in the specification) while others are left uninterpreted.
<b>The predefined field names have corresponding string constants
in the new <a href=
"../../../api/javax/management/JMX.html"><code>JMX</code></a>
class</b> (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6282502">6282502</a>).</p>
<p><b>A new annotation <a href=
"../../../api/javax/management/DescriptorKey.html"><code>DescriptorKey</code></a>
can be used to add information to the Descriptors for a Standard
MBean (or MXBean) via annotations in the Standard MBean (or MXBean)
interface</b> (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6221321">6221321</a>).
This makes it possible for a tool that generates Standard MBeans
from an existing management model to include information from the
model in the generated MBean interfaces, rather than in separate
files.</p>
<p><b>The method <a href=
"../../../api/javax/management/Descriptor.html#getFieldValues(java.lang.String...)">
<code>Descriptor.getFieldValues(String...)</code></a> and the
constructor <a href=
"../../../api/javax/management/modelmbean/DescriptorSupport.html#DescriptorSupport(java.lang.String...)">
<code>DescriptorSupport(String...)</code></a> previously took a
<code>String[]</code> parameter</b>. The varargs syntax makes them
easier to use.</p>
<p>A number of other changes have been made regarding descriptors,
as follows.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6255956">6255956</a>:
<b>Descriptor defines <code>equals</code> method and specifies how
array values are compared</b>. The <code>Descriptor</code>
interface specifies an <a href=
"../../../api/javax/management/Descriptor.html#equals(java.lang.Object)">
<code>equals</code></a> method and its two concrete implementations
implement it. This means that <code>MBeanInfo</code> etc can
continue to be compared for equality taking the Descriptors into
account. So that different implementations of
<code>Descriptor</code> can be mixed, a <a href=
"../../../api/javax/management/Descriptor.html#hashCode()"><code>hashCode()</code></a>
method is also specified and implemented.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6267824">6267824</a>:
<b>Clarify order the returned array is sorted with when calling
<a href=
"../../../api/javax/management/Descriptor.html#getFieldValues(java.lang.String...)">
<code>Descriptor.getFieldValues(null)</code></a></b>. Previously it
was not specified what order the returned values were in.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6273765">6273765</a>:
<b>Descriptor.getFieldValues(non-empty-array) on an empty
descriptor has no special behavior</b>. The array returned by this
method has as many elements as there are parameters, with each
element being the value associated with the corresponding
parameter, or null if there is no such value.</p>
<p>Through an oversight or an editing error, the @returns clause of
this method previously said: <em>If the descriptor is empty, you
will get an empty array.</em> Almost certainly, what was meant was
that if the list of names is empty, you will get an empty array. As
specified, there was a pernicious special case: if some or all of
the names in the list are missing from the Descriptor, the
corresponding elements in the returned array will be null,
<em>except</em> if the Descriptor is empty, in which case there
won't be any elements in the array.</p>
<p>This special case did not show up in the existing use of
Descriptors for Model MBeans, because empty Descriptors were not
valid in any of the places where they were used. (Every Descriptor
had to have at least the "name" and "descriptorType" entries.)
However, this is no longer true for the more generalized use of
Descriptors. The previously-specified behavior would therefore have
generated hard-to-find bugs.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6273613">6273613</a>:
<b>Specify exception wrapping for <code>Descriptor.setField</code>
and <code>Descriptor.setFields</code></b>. These methods were
previously declared to throw <a href=
"../../../api/javax/management/RuntimeOperationsException.html"><code>
RuntimeOperationsException</code></a> but the specification did not
say what the wrapped exception was.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6289244">6289244</a>:
<b>Clarify behaviour when null Descriptor parameter to MBeanInfo
etc.</b> The specification of the constructors of <a href=
"../../../api/javax/management/MBeanInfo.html#MBeanInfo(java.lang.String,%20java.lang.String,%20javax.management.MBeanAttributeInfo[],%20javax.management.MBeanConstructorInfo[],%20javax.management.MBeanOperationInfo[],%20javax.management.MBeanNotificationInfo[],%20javax.management.Descriptor)">
MBeanInfo</a> and related classes previously stated that a null
input value for the <a href=
"../../../api/javax/management/Descriptor.html">Descriptor</a>
parameter would produce an empty Descriptor. In fact it is
equivalent to an empty Descriptor input value, to which the
implementation can add certain standard fields.</p>
</li>
</ul>
<h3 id="JMX">New class javax.management.JMX</h3>
<p><b>A new class <a href=
"../../../api/javax/management/JMX.html"><code>javax.management.JMX</code></a>
has been added to house constants and static methods</b>.</p>
<h3 id="Notification">NotificationBroadcaster and
NotificationBroadcasterSupport</h3>
<p>A number of changes concern the interface <a href=
"../../../api/javax/management/NotificationBroadcaster.html"><code>NotificationBroadcaster</code></a>
and its default implementation <a href=
"../../../api/javax/management/NotificationBroadcasterSupport.html">
<code>NotificationBroadcasterSupport</code></a>.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4506105">4506105</a>:
Previously, to specify the types of notifications that could be
sent, it was necessary to subclass
<code>NotificationBroadcasterSupport</code> and override the
<code>getNotificationInfo()</code> method. In this release, <b>new
constructors have been added, that take a
<code>MBeanNotificationInfo...</code> as input</b>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4661545">4661545</a>:
Previously, the specification was very vague about whether the
notification dispatch model was synchronous or asynchronous. When a
thread called <a href=
"../../../api/javax/management/NotificationBroadcasterSupport.html#sendNotification(javax.management.Notification)">
<code>sendNotification</code></a>, the <a href=
"../../../api/javax/management/NotificationListener.html#handleNotification(javax.management.Notification,%20java.lang.Object)">
<code>NotificationListener.handleNotification</code></a> method of
each listener might be called within that thread (a synchronous
model) or within some other thread (an asynchronous model),
depending on the class implementation. J2SE 5 implemented the
synchronous model, meaning that
<code>NotificationBroadcasterSupport</code> used the sender thread
to send the notification to all listeners. Users had to create a
subclass to override the method <code>handleNotification</code> if
they wanted an asynchronous model.</p>
<p>In Java SE 6, the default model is still synchronous. <b>A
constructor has been added to the class
<code>NotificationBroadcasterSupport</code> to take a <a href=
"../../../api/java/util/concurrent/Executor.html"><code>java.util.concurrent.Executor</code></a>
as a parameter</b>. The <code>Executor</code> is used to dispatch
the notification to its listeners. This allows users to avoid
creating a subclass if they want the asynchronous model.</p>
</li>
<li>
<p><b>A third constructor combines the functionality of the above
two</b>, with both an <code>Executor</code> and an
<code>MBeanNotificationInfo...</code> as parameters.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6244863">6244863</a>:
<b>Specify what happens with NotificationBroadcasterSupport if a
filter or listener throws an exception</b>. Previously, the JMX
specification did not define what happens when the listeners or
filters maintained by a notification broadcaster threw an
exception. This behavior has now been specified. An <a href=
"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Exception.html"><code>
Exception</code></a> does not prevent other listeners from being
invoked. But an <a href=
"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Error.html"><code>
Error</code></a> is propagated to the caller of
<code>sendNotification</code>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6252526">6252526</a>:
<b>A new class, <a href=
"../../../api/javax/management/StandardEmitterMBean.html"><code>javax.management.StandardEmitterMBean</code></a>,
has been added</b>. <code>StandardEmitterMBean</code> is a subclass
of <code>javax.management.StandardMBean</code> that is a
<code>NotificationEmitter</code>.</p>
</li>
</ul>
<h3 id="ObjectName">ObjectName</h3>
<p>A number of changes concern the class <a href=
"../../../api/javax/management/ObjectName.html"><code>ObjectName</code></a>.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4716807">4716807</a>:
<b>Support <code>key=*</code> wildcard in ObjectName</b>.
Previously, it was possible to say
<code>domain:key1=value1,*</code> to match MBeans that have
<code>key1=value1</code> in their name, but not
<code>domain:key1=*</code> to match MBeans that have
<code>key1</code> in their name. The ObjectName functionality has
been extended in this release, so that you can put a wildcard
(<code>*</code> and/or <code>?</code>) anywhere in a value.</p>
<p><b>Two new methods, <a href=
"../../../api/javax/management/ObjectName.html#isPropertyValuePattern()">
<code>isPropertyValuePattern()</code></a> and <a href=
"../../../api/javax/management/ObjectName.html#isPropertyValuePattern(java.lang.String)">
<code>isPropertyValuePattern(String property)</code></a></b>, allow
you to discover whether an ObjectName has a wildcard in the value
of some property, and if so which property it might be.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4780400">4780400</a>:
<b>Two new ObjectName constants added</b>. Users of the JMX API
very often need to refer to two ObjectName constants:</p>
<pre>
    new ObjectName("JMImplementation:type=MBeanServerDelegate")
    new ObjectName("*:*")
</pre>
<p>The first of these is hard to remember, and if you get it wrong
then your code compiles but doesn't work. Both of these suffer from
the problem that the ObjectName constructors throw the checked
exception <code>MalformedObjectNameException</code>, so you end up
having to wrap your constant in a try/catch block.</p>
<p>To remedy this situation, two new constants have been added in
this release:</p>
<ul>
<li><a href=
"../../../api/javax/management/MBeanServerDelegate.html#DELEGATE_NAME">
<code>javax.management.MBeanServerDelegate.DELEGATE_NAME</code></a></li>
<li><a href=
"../../../api/javax/management/ObjectName.html#WILDCARD"><code>javax.management.ObjectName.WILDCARD</code></a></li>
</ul>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5036680">5036680</a>:
<b><code>ObjectName</code> implements
<code>Comparable&lt;ObjectName&gt;</code></b>. By implementing
Comparable we allow a SortedSet&lt;ObjectName&gt; to show its
contents in a reasonable order without having to define a custom
Comparator. See <a href=
"../../../api/javax/management/ObjectName.html#compareTo(javax.management.ObjectName)">
<code>ObjectName.compareTo(ObjectName)</code></a>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6392494">6392494</a>:
<b>Specify that // is reserved in ObjectName domains.</b> It is
planned to use the string // in <a href=
"../../../api/javax/management/ObjectName.html">ObjectName</a>
domains as part of the "cascading" feature in the next version of
the JMX API. A warning has been added to the specification that
this string should be avoided, even though the string does not yet
have any special meaning to the implementation.</p>
</li>
</ul>
<h3 id="Standard">Standard MBeans</h3>
<p>The following changes have been made to the specification of
Standard MBeans.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4949203">4949203</a>:
<b>Correct text about invoking getters and setters</b>. The JMX 1.2
specification document was supposed to clarify, per the Maintenance
Review change list, that getters and setters in a Standard MBean
cannot be invoked through <code>MBeanServer.invoke</code>. But the
text to this effect erroneously appeared in the section about
Dynamic MBeans. It should obviously be in the section about
Standard MBeans.</p>
<p>Also, this text mentioned the property
<code>"jmx.invoke.getters"</code>. Since it appears in the spec,
one might conclude that an implementation is required to respect
this property. But that's not what was stated during the
Maintenance Review and it's not what was intended. Rather, this
property is a feature of the Reference Implementation to ease the
transition for code that may have incorrectly relied on being able
to invoke getters before. So it should appear in the Release Notes
of the Reference Implementation, not in the spec.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6190628">6190628</a>:
<b>Standard MBeans support covariant return types in MBean
interfaces</b>. J2SE 5 introduced covariant return types in classes
and interfaces. However, MBean servers would reject Standard MBeans
created with covariant types as they would appear inconsistent. In
this release, covariance is allowed for operations (methods other
than getters and setters) and for read-only attributes (getters
without corresponding setters).</p>
</li>
</ul>
<h3 id="Dynamic">Dynamic MBeans</h3>
<p>The following changes have been made concerning Dynamic
MBeans.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6306219">6306219</a>:
<b>Clarify <a href=
"../../../api/javax/management/MBeanServer.html#isInstanceOf(javax.management.ObjectName,%20java.lang.String)">
<code>MBeanServer.isInstanceOf</code></a> semantics for Dynamic
MBeans</b>. The specification of this method omitted an important
case where it should return true, namely where the MBean's
ClassLoader can load the named class and the MBean is an instance
of that class. The Reference Implementation did in fact return true
in this case. It makes a difference when a DynamicMBean returns in
its MBeanInfo a class name of which it is not an instance. For
example, an instance of <code>javax.management.StandardMBean</code>
(which is a DynamicMBean) could return an MBeanInfo whose
<code>getClassName()</code> returned
<code>"javax.management.timer.TimerMBean"</code>. Under the current
specification, the call
<code>mbeanServer.isInstanceOf(objectName,&nbsp;"javax.management.StandardMBean")</code>
would then return false, since <code>TimerMBean</code> is not an
instance of <code>StandardMBean</code>. In fact, it returns true,
since the actual MBean object <em>is</em> an instance of
<code>StandardMBean</code>.</p>
<p>With the addition of the class
<code>StandardEmitterMBean</code>, and the existing practice of
using <code>isInstanceOf</code> to determine whether an MBean is a
<code>NotificationBroadcaster</code>, it becomes important to
change the spec to reflect the implementation. A
<code>StandardEmitterMBean</code> will typically return an
MBeanInfo with a class name that is not an
<code>NotificationBroadcaster</code>; however, we want
<code>isInstanceOf(...,&nbsp;"javax.management.NotificationBroadcaster")</code>
to return true.</p>
</li>
</ul>
<h3 id="Model">Model MBeans</h3>
<p>A large number of small changes are applied to the specification
for Model MBeans.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4883709">4883709</a>:
<b>"value" and "displayName" fields in Model MBean descriptors
should be in italics</b>. This is a bug in the PDF spec. Optional
fields are supposed to be in italics but these ones were not.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4997033">4997033</a>:
<b>RequiredModelMBean.setAttribute should throw exception if no
setMethod and no currencyTimeLimit</b>. This change resolves a
contradiction between the PDF and Javadoc texts. The specification
is clarified so that an exception is thrown only when there is no
setMethod and no caching, so that the <code>setAttribute</code>
operation would have no effect.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5043245">5043245</a>:
<b>Attribute type check is too restrictive in
RequiredModelMBean.getAttribute()</b>. The specification was
unclear as to whether the returned value had to be of the exact
type declared for the attribute or could be of a subtype. It is
changed to allow a subtype explicitly.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5046781">5046781</a>:
<b>Spec should say role field in ModelMBeanOperationInfo descriptor
is optional</b>. The PDF spec is clarified to allow this field to
be omitted, reflecting the behavior of the Reference
Implementation.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5046784">5046784</a>:
<b>Value of targetType in Model MBean descriptors is case
insensitive</b>. Although the specification implied through its
examples that this field is case-insensitive, it was omitted from
the explicit list of case-insensitive fields.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5104947">5104947</a>:
<b>Clarify whether ModelMBeanInfoSupport.clone is deep or
shallow</b>. The specification is modified to state the existing
behavior whereby the clone is shallow.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6175387">6175387</a>:
<b>Add new <code>OnUnregister</code> persistPolicy value to Model
MBean descriptor</b>. When persistence is supported for Model MBean
data, you can define how it works using a persistPolicy value in
the Descriptor for an MBean attribute. Previously, these values
were Never, OnUpdate, OnTimer, NoMoreOftenThan, and Always. This
release has added a new value, OnUnregister, that means that the
value of the attribute is persisted when the MBean containing it is
unregistered from the MBean Server. The specification of the
methods that consult this field has been updated accordingly, as
has the list of persistPolicy values that do not result in a store
in <a href=
"../../../api/javax/management/modelmbean/RequiredModelMBean.html#store()">
<code>RequiredModelMBean.store()</code></a> and <a href=
"../../../api/javax/management/modelmbean/RequiredModelMBean.html#setAttribute(javax.management.Attribute)">
<code>RequiredModelMBean.setAttribute</code></a>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6236765">6236765</a>:
<b>ModelMBeanConstructorInfo says certain fields invalid, but
doesn't check.</b> The specification of <a href=
"../../../api/javax/management/modelmbean/ModelMBeanConstructorInfo.html">
ModelMBeanConstructorInfo</a> previously said that the
persistPolicy and currencyTimeLimit fields were invalid, but the
Reference Implementation did not check this. To avoid breaking
existing code that might have included those fields, the
specification has been changed to say that they are meaningless but
are not considered invalid.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6241620">6241620</a>:
<b>DescriptorSupport(String[],Object[]) doc contradictory
concerning null parameters</b>. A contradiction in the spec is
resolved to reflect the behavior of the Reference
Implementation.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6332962">6332962</a>:
<b>Problem serializing DescriptorSupport containing targetObject
field</b>. A Descriptor for an attribute or operation in a Model
MBean can contain a <code>targetObject</code> field to direct
accesses to that attribute or operation towards a different
resource from the one defined for the Model MBean as a whole. As
such, its value is often a non-serializable object, and in any case
it does not make sense to serialize it. Therefore the spec is
updated to exclude it from the serialization of DescriptorSupport
so that RequiredModelMBean.getMBeanInfo() returns a serializable
object.</p>
</li>
</ul>
<h3 id="Open">Open MBeans</h3>
<p>Many of the changes to Open MBeans were inspired by the addition
of user-defined MXBeans. Here is the complete set of changes.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5045358">5045358</a>:
<b>Allow Open MBeans to reference arrays of primitive type</b>.
Previously, the set of types that could be referenced by an Open
MBean only included the primitive wrapper types such as
<code>java.lang.Integer</code> and <code>java.lang.Boolean</code>.
However, it did not include the primitive types such as
<code>int</code> and <code>boolean</code>. Arrays of these
primitives are now included. The ArrayType class has been extended
so that primitive types such as an <code>int[]</code> can be
expressed as an OpenType. This new functionality allows MXBeans to
map arrays of primitive types in the MXBean interface to the
corresponding OpenTypes.</p>
<p>The following methods have been added to the ArrayType
class:</p>
<ul>
<li><a href=
"../../../api/javax/management/openmbean/ArrayType.html#getArrayType(javax.management.openmbean.OpenType)">
javax.management.openmbean.ArrayType.getArrayType(OpenType)</a></li>
<li><a href=
"../../../api/javax/management/openmbean/ArrayType.html#getPrimitiveArrayType(java.lang.Class)">
javax.management.openmbean.ArrayType.getPrimitiveArrayType(Class)</a></li>
<li><a href=
"../../../api/javax/management/openmbean/ArrayType.html#isPrimitiveArray()">
javax.management.openmbean.ArrayType.isPrimitiveArray()</a></li>
<li><a href=
"../../../api/javax/management/openmbean/ArrayType.html#ArrayType(javax.management.openmbean.SimpleType,%20boolean)">
javax.management.openmbean.ArrayType(SimpleType,boolean)</a></li>
</ul>
<p><b>In the constructor <a href=
"../../../api/javax/management/openmbean/ArrayType.html#ArrayType(int,%20javax.management.openmbean.OpenType)">
ArrayType(int dimension, OpenType&lt;?&gt; elementType)</a>, the
elementType parameter can now be an ArrayType instance</b>
(<a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6252649">6252649</a>).
The <a href=
"../../../api/javax/management/openmbean/ArrayType.html#equals(java.lang.Object)">
ArrayType.equals</a> and <a href=
"../../../api/javax/management/openmbean/ArrayType.html#hashCode()">
ArrayType.hashcode</a> methods now take the new primitiveArray flag
into account.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5095277">5095277</a>:
<b><code>CompositeDataSupport.equals</code> compares arrays
element-by-element</b>. Previously, if two
<code>CompositeDataSupport</code> elements each had the same
<code>CompositeType</code> containing at least one
<code>ArrayType</code> item, calling
<code>CompositeDataSupport.equals</code> would only compare the
identities of the arrays. Consequently,
<code>CompositeDataSupport.equals</code> would only return true if
the objects referred to the same array. Now, calling <a href=
"../../../api/javax/management/openmbean/CompositeDataSupport.html#equals(java.lang.Object)">
<code>CompositeDataSupport.equals</code></a> compares the the
arrays element-by-element, so it will return true if the two
objects refer to different arrays with the same contents. A
corresponding change is made to <a href=
"../../../api/javax/management/openmbean/CompositeDataSupport.html#hashCode()">
<code>CompositeDataSupport.hashCode</code></a>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6228130">6228130</a>:
<b><a href=
"../../../api/javax/management/openmbean/TabularDataSupport.html#entrySet()">
<code>TabularDataSupport.entrySet()</code></a> specifies key in the
returned <code>Set</code> is wrapped into a <code>List</code></b>.
The documentation was previously unclear about the contents of the
returned Set. This is now clarified by making it a
<code>Set&lt;Map.Entry&lt;Object,Object&gt;&gt;</code> but
detailing that it is in fact a
<code>Set&lt;Map.Entry&lt;List&lt;?&gt;,CompositeData&gt;&gt;</code>.
For compatibility reasons, the latter declaration is not directly
possible.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6320104">6320104</a>:
<b>Add ability to set to UNKNOWN the OperationInfo impact of an
Open MBean</b>. The allowed values for the <code>impact</code> of
an <a href=
"../../../api/javax/management/MBeanOperationInfo.html"><code>MBeanOperationInfo</code></a>
are <code>ACTION</code>, <code>INFO</code>,
<code>ACTION_INFO</code> and <code>UNKNOWN</code>. The last of
these values was previously not allowed for an <a href=
"../../../api/javax/management/openmbean/OpenMBeanOperationInfoSupport.html">
<code>OpenMBeanOperationInfoSupport</code></a>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5072004">5072004</a>:
<b>Better support for schema evolution in CompositeData and
CompositeType</b>. Given a <a href=
"../../../api/javax/management/openmbean/CompositeType.html">CompositeType</a>
ct, the method <a href=
"../../../api/javax/management/openmbean/CompositeType.html#isValue(java.lang.Object)">
javax.management.openmbean.CompositeType.isValue</a>(x) previously
returned true only if x was a <a href=
"../../../api/javax/management/openmbean/CompositeData.html">CompositeData</a>
and x.<a href=
"../../../api/javax/management/openmbean/CompositeData.html#getCompositeType()">getCompositeType()</a>
was equal to ct. This rule has been relaxed. The type returned by
x.getCompositeType() must still have the same name as ct, and it
must have all the same items as ct, but it can have additional
items. This change also impacts the rules for <a href=
"../../../api/javax/management/openmbean/TabularType.html#isValue(java.lang.Object)">
TabularType.isValue</a> and <a href=
"../../../api/javax/management/openmbean/ArrayType.html#isValue(java.lang.Object)">
ArrayType.isValue</a> regarding CompositeData items contained by
the TabularData or the array.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6333582">6333582</a>:
<b>OpenType should not declare public static array
ALLOWED_CLASSNAMES</b>. This field is deprecated in favour of a new
field <a href=
"../../../api/javax/management/openmbean/OpenType.html#ALLOWED_CLASSNAMES_LIST">
ALLOWED_CLASSNAMES_LIST</a>.</p>
</li>
</ul>
<h3 id="Monitor">Monitor Service</h3>
<p>The following changes are made to the specification of the
Monitor Service (package <a href=
"../../../api/javax/management/monitor/package-summary.html"><code>javax.management.monitor</code></a>).</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6222961">6222961</a>:
<b>Monitor Service supports complex types</b>. Previously with the
Monitor Service, you could only monitor an attribute of simple
type. Often, the value you want to monitor is buried inside a more
complex type. For example, if you are dealing with the J2EE
instrumentation defined by JSR 77, then to set a monitor on a
servlet's service time, you want to get the
<code>ServiceTime</code> attribute for the servlet and monitor
<code>serviceTime.getMaxTime()</code>. The spec is changed so that
you can monitor <code>ServiceTime.maxTime</code> to get this
effect. The detailed specification is in <a href=
"../../../api/javax/management/monitor/package-summary.html"><code>javax.management.monitor</code></a>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6239455">6239455</a>:
<b>Specify that monitor tasks are run within the access control
context of the <code>monitor.start()</code> caller</b>. When
security is active, the security checks carried out to see if the
caller has access to the attribute or to any security protected
operation the attribute implementation might perform are based on
the access control context of the <code>monitor.start()</code>
caller and not on the access control context of the monitor
creator. This is stated in the package documentation for <a href=
"../../../api/javax/management/monitor/package-summary.html"><code>javax.management.monitor</code></a>.</p>
</li>
</ul>
<h3 id="Timer">Timer Service</h3>
<p>The following changes are made to the specification of the Timer
Service (package <a href=
"../../../api/javax/management/timer/package-summary.html"><code>javax.management.timer</code></a>).</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6235077">6235077</a>:
<b>javax.management.timer.Timer doc was inconsistent about what
happens for Date in the past</b>. Prior to version 1.2 of the JMX
Specification, the Timer service was defined to throw an exception
if a notification was scheduled for a time in the past. Starting
from version 1.2, the more logical behaviour of sending the
notification immediately in this case was introduced. However, some
of the documentation for javax.management.timer.Timer still
reflected the old behaviour. In particular, the Notes in the class
documentation included one that said that past-time notifications
will be ignored, and the @throws documentation for the
IllegalArgumentException said it was thrown for a past date.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6387340">6387340</a>:
<b>Remove javax.management.timer.TimerAlarmClockNotification.</b>
This class is unusable by code outside the package it is defined
in, because its only visible constructor has a parameter whose type
is a non-public class. If you call that constructor with a null
parameter, you get an immediate exception. Therefore,
exceptionally, this public class can safely be deleted from the
Java SE API.</p>
</li>
</ul>
<h3 id="MLet">MLet Service</h3>
<p>The following changes are made to the specification of the MLet
Service (package <a href=
"../../../api/javax/management/loading/package-summary.html"><code>javax.management.loading</code></a>).</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4796780">4796780</a>:
<b>MLetContent class should be public</b>. In the last release, the
<a href=
"../../../api/javax/management/loading/MLet.html#check(java.lang.String,%20java.net.URL,%20java.lang.String,%20javax.management.loading.MLetContent)">
<code>MLet.check</code></a> method was made public, but one of its
parameters was of type <a href=
"../../../api/javax/management/loading/MLetContent.html"><code>javax.management.loading.MLetContent</code></a>,
and that class remained private. This introduced an inconsistency
in that a publicly-visible method referenced a non-visible class.
This has been corrected by making MLetContent public.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6223396">6223396</a>:
<b>MLet support for native libraries is underspecified and should
be optional.</b> The specification of <a href=
"../../../api/javax/management/loading/MLet.html#findLibrary(java.lang.String)">
MLet.findLibrary</a> has been updated to detail the algorithm used
to find native libraries inside jar files, and to add a @throws
clause for implementations that do not support this functionality.
The PDF specification has been updated similarly (section
8.3.2).</p>
</li>
</ul>
<h3 id="Relation">Relation Service</h3>
<p>The following changes are made to the specification of the
Relation Service (package <a href=
"../../../api/javax/management/relation/package-summary.html"><code>
javax.management.relation</code></a>).</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4892674">4892674</a>:
<b>Problem serializing RelationNotification</b>. The <a href=
"../../../api/javax/management/relation/RelationNotification.html"><code>
RelationNotification</code></a> constructors required their source
parameter to be an instance of <code>RelationService</code>,
relying on the MBean Server to rewrite this to the ObjectName of
the RelationService before forwarding the notification to users.
This is fragile, and in particular makes it hard to reconstruct a
RelationNotification instance, for example from a serialized XML
form. The constructor is modified to also allow the source to be an
<code>ObjectName</code>.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5053367">5053367</a>:
<b>RelationService.addRelationType spec rejects null relation type
name</b>. RelationService.addRelationType (and
RelationServiceMBean.addRelationType) are explicitly specified to
throw IllegalArgumentException if the RelationType argument returns
null from its getRelationTypeName().
RelationService.addRelationType (and
RelationServiceMBean.addRelationType) are explicitly specified to
throw IllegalArgumentException if the RelationType argument returns
null from its getRelationTypeName(). The other RelationService
methods that take a relation type name are all specified to reject
a null name. Thus if addRelationType allowed one, you would end up
with a RelationType that you could do nothing with. In particular,
you couldn't even remove it again.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6229880">6229880</a>:
<b>RelationSupport javadoc was unclear</b>.
<code>RelationSupport.setRole</code> specified that a
RoleNotFoundException is thrown if the role is not writable. In
fact, a RoleNotFoundException is also thrown when there is no
defined role for the given name (same condition as the getRole
method).</p>
<p><code>RelationSupport.setRoles</code> specified that an
IllegalArgumentException was thrown if the role <em>name</em> was
null. <b>This should be the role <em>list</em></b>.</p>
</li>
</ul>
<h3 id="Query">Query</h3>
<p><b>The new <a href=
"../../../api/javax/management/Query.html#isInstanceOf(javax.management.StringValueExp)">
<code>javax.managent.Query.isInstanceOf(StringValueExp
className)</code></a> method</b> allows users to get all MBeans
that are instances of a specific class (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5072174">5072174</a>).</p>
<h3 id="MBSIH">MBeanServerInvocationHandler</h3>
<p>The following changes are made to the specification of <a href=
"../../../api/javax/management/MBeanServerInvocationHandler.html">MBeanServerInvocationHandler</a>:</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6177524">6177524</a>:
<b>MBeanServerInvocationHandler no longer forwards Object methods
to proxied MBean</b>. Previously, MBeanServerInvocationHandler
forwarded the methods hashCode(), toString(), and equals(Object) to
proxied MBeans, meaning that an MBean proxy could not be used as a
key in a HashMap (for example to look up a cached MBeanInfo for the
proxy). MBeanServerInvocationHandler now only forwards these
methods if they are explicitly mentioned in the MBean interface for
which it is a handler. The
javax.management.MBeanServerInvocationHandler.invoke method has
been updated to examine the MBean interface to check whether it
contains the methods in question.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6278707">6278707</a>:
<b>MBeanServerInvocationHandler acquires getters to retrieve its
constructor parameters</b>. These are the new methods
<code>getMBeanServerConnection()</code>,
<code>getObjectName()</code>, and <code>isMXBean()</code>.</p>
</li>
</ul>
<p>A new method <a href=
"../../../api/javax/management/JMX.html#newMBeanProxy(javax.management.MBeanServerConnection,%20javax.management.ObjectName,%20java.lang.Class)">
<code>JMX.newMBeanProxy</code></a> provides an easier-to-remember
alternative to <a href=
"../../../api/javax/management/MBeanServerInvocationHandler.html#newProxyInstance(javax.management.MBeanServerConnection,%20javax.management.ObjectName,%20java.lang.Class,%20boolean)">
<code>MBeanServerInvocationHandler.newProxyInstance</code></a>.</p>
<h3 id="Serial">Serial forms</h3>
<p>The specification of the serial form of the classes in the JMX
API has been clarified as follows.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6253903">6253903</a>:
Specification for JMX API lists serialVersionUID of all
serializable classes. For implementation reasons, the <a href=
"../../../api/serialized-form.html">Serialized Form</a> page from
the Javadoc-generated specification omits the
<code>serialVersionUID</code> of certain classes. Independent
implementations need this information for compliance, so where
necessary it has been supplied in the specification of the classes
themselves.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6344759">6344759</a>:
Mandate more clearly the 12 <code>javax.management.*Exp</code>
private classes. For interoperation between implementations, the
value returned by the various static <code>Query.*</code> methods
(such as <a href=
"../../../api/javax/management/Query.html#and(javax.management.QueryExp,%20javax.management.QueryExp)">
<code>Query.and</code></a>) must be of a given non-public class, or
at least must serialize as such. The specification of these methods
is updated accordingly.</p>
</li>
</ul>
<h3 id="Permissions">Permission checks</h3>
The JMX specification previously said that permission checks were
made if and only if there is a non-null <a href=
"../../../api/java/lang/SecurityManager.html">SecurityManager</a>.
This has been changed to say that an implementation is free not to
make checks if there is no SecurityManager. In other words, an
implementation may now choose to make checks even in the absence of
a SecurityManager. (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6419572">6419572</a>)
<h3 id="Exceptions">MBean RuntimeException handling</h3>
<p>The JMX spec was unclear as to what happens when a method
implementing an attribute or an operation in an MBean throws a
RuntimeException (<a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5043152">5043152</a>).
Close reading implied that it should wrap the exception in a
RuntimeMBeanException, but it was not completely clear that it
could not wrap it in a RuntimeOperationsException. The spec now
explicitly says that it is a RuntimeMBeanException, and that
RuntimeOperationsException wraps exceptions that occur before any
MBean method is invoked, e.g. getAttribute with a null
attribute.</p>
<p>Model MBeans wrap exceptions coming from methods invoked on the
ManagedResource in RuntimeOperationsException, not
RuntimeMBeanException.<br />
Although this was not clearly specified, changing it would risk
breaking existing code. So the existing behaviour is specified
explicitly, and also that when an MBean throws a
RuntimeOperationsException it is not further wrapped.</p>
<h3 id="remote">JMX Remote API</h3>
<p>The following changes are made to the specification of the JMX
Remote API.</p>
<ul>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6343209">6343209</a>:
<b>Specify how SubjectDelegationPermission works for
ConnectorServer creators.</b> The creator of a <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnectorServer.html">
JMXConnectorServer</a> no longer needs to have all the permissions
that connection created by the connector server will use. It can
have a <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/SubjectDelegationPermission.html">
SubjectDelegationPermission</a> for each remotely-authenticated
identity instead. This simplifies deployment in security-conscious
environments.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5021246">5021246</a>:
<b>Spec for RMI connector should say code downloading used if
applicable.</b> The RMI connector will use code downloading as
specified in the article <a href=
"http://java.sun.com/javase/6/docs/guide/rmi/codebase.html"><em>Dynamic
code downloading using Java RMI</em></a> if applicable. The
Reference Implementation has always behaved this way, and the
specification has been updated to reflect that.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6375696">6375696</a>:
<b>CORBA tie classes for JMX Remote API should be in
javax.management.remote.rmi</b> For compliance with the OMG's "IDL
to Java Language Mapping Specification", the CORBA "tie classes"
for the remote objects <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/rmi/RMIServerImpl.html">
javax.management.remote.rmi.RMIServerImpl</a> and <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/rmi/RMIConnectionImpl.html">
javax.management.remote.rmi.RMIConnectionImpl</a> should be in the
<a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/rmi/package-summary.html">
javax.management.remote.rmi</a> package.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6231888">6231888</a>:
<b>JMXConnector implements Closeable</b> The interface <a href=
"http://java.sun.com/j2se/1.5.0/docs/api/java/io/Closeable.html"><code>
java.io.Closeable</code></a> defines the single method<br />
<code>public void close() throws IOException;</code> and since
<a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnector.html">
<code>JMXConnector</code></a> contains a method with the same
signature, the <code>JMXConnector</code> interface can extend the
<code>Closeable</code> interface.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6234398">6234398</a>:
<b>JMX connection provider API exception handling unclear.</b> The
interfaces <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnectorProvider.html">
<code>JMXConnectorProvider</code></a> and <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnectorServerProvider.html">
<code>JMXConnectorServerProvider</code></a> are clarified so that
methods throw <code>MalformedURLException</code> if the protocol in
the URL is not recognized by the provider, <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXProviderException.html">
<code>JMXProviderException</code></a> if this is the right provider
for the URL but it cannot be used for some reason, and some other
<code>IOException</code> in other cases.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6238076">6238076</a>:
<b>Serialized form of <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/rmi/RMIConnector.html">
<code>javax.management.remote.rmi.RMIConnector</code></a> included
<code>clientNotifID</code> field.</b> This field was inadvertently
included in the serial form. Its purpose is to track the
notification sequence number in <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnectionNotification.html">
<code>JMXConnectionNotification</code>s</a> from the
<code>RMIConnector</code>. An <code>RMIConnector</code> is
typically only serialized if it is the value returned by <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/rmi/RMIConnectorServer.html#toJMXConnector(java.util.Map)">
<code>RMIConnectorServer.toJMXConnector</code></a>, in which case
it will not have been connected and will have a sequence number of
0. Even if an <code>RMIConnector</code> is serialized in other
circumstances, there is little or no interest in continuing the
notification sequence numbers when it is subsequently
deserialized.</p>
</li>
<li>
<p><a href=
"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6238815">6238815</a>:
<b>Add a way to get the address to which a connector client is
connected.</b> The new interface <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXAddressable.html">
<code>JMXAddressable</code></a> can be implemented by a given
connector client. When this is so, users can cast the <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnector.html">
<code>JMXConnector</code></a> instance to
<code>JMXAddressable</code> and call <code>getAddress()</code> to
discover the address to which the client is connected. RMI client
connectors are specified to implement this interface. The <a href=
"http://download.java.net/jdk6/doc/api/javax/management/remote/JMXConnectorServer.html">
<code>JMXConnectorServer</code></a> class also implements this
interface, via its existing <code>getAddress()</code> method.</p>
</li>
</ul>
</blockquote>

<HR>
<TABLE summary="layout" BORDER="0" WIDTH="100%">
<TR VALIGN="TOP"><TD><P><FONT SIZE="-2">
<A HREF=../../../legal/cpyr.html>Copyright &#169;</A> 1993, 2011, Oracle and/or its affiliates. All rights reserved.</FONT></P><FONT SIZE="-1"> Please send comments using this <a href=http://download.oracle.com/javase/feedback.html>Feedback</a> page.</FONT> </TD>
<TD ALIGN=RIGHT> <IMG SRC="../../../images/oraclelogo.gif" ALT="Oracle Corporation and/or its affiliates" BORDER=0 WIDTH=100 HEIGHT=29><BR>
<FONT SIZE="+1"> <i>Java Technology</i></FONT> </TD></TR>
</TABLE> 

<!-- STATIC FOOTER -->

</body>
</html>
